<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parallel RAMSES-Files Reading · Mera.jl</title><meta name="title" content="Parallel RAMSES-Files Reading · Mera.jl"/><meta property="og:title" content="Parallel RAMSES-Files Reading · Mera.jl"/><meta property="twitter:title" content="Parallel RAMSES-Files Reading · Mera.jl"/><meta name="description" content="Documentation for Mera.jl."/><meta property="og:description" content="Documentation for Mera.jl."/><meta property="twitter:description" content="Documentation for Mera.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="Mera.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../../00_multi_FirstSteps/">First Steps</a></li><li><span class="tocitem">1 Data Inspection</span><ul><li><a class="tocitem" href="../../../01_hydro_First_Inspection/">Hydro</a></li><li><a class="tocitem" href="../../../01_particles_First_Inspection/">Particles</a></li><li><a class="tocitem" href="../../../01_clumps_First_Inspection/">Clumps</a></li></ul></li><li><span class="tocitem">2 Load by Selection</span><ul><li><a class="tocitem" href="../../../02_hydro_Load_Selections/">Hydro</a></li><li><a class="tocitem" href="../../../02_particles_Load_Selections/">Particles</a></li><li><a class="tocitem" href="../../../02_clumps_Load_Selections/">Clumps</a></li></ul></li><li><span class="tocitem">3 Get Subregions</span><ul><li><a class="tocitem" href="../../../03_hydro_Get_Subregions/03_hydro_Get_Subregions/">Hydro</a></li><li><a class="tocitem" href="../../../03_particles_Get_Subregions/03_particles_Get_Subregions/">Particles</a></li><li><a class="tocitem" href="../../../03_clumps_Get_Subregions/03_clumps_Get_Subregions/">Clumps</a></li></ul></li><li><a class="tocitem" href="../../../04_multi_Basic_Calculations/">4 Basic Calculations</a></li><li><a class="tocitem" href="../../../05_multi_Masking_Filtering/05_multi_Masking_Filtering/">5 Mask/Filter/Meta</a></li><li><span class="tocitem">6 Projection</span><ul><li><a class="tocitem" href="../../../06_hydro_Projection/06_hydro_Projection/">Hydro</a></li><li><a class="tocitem" href="../../../06_particles_Projection/06_particles_Projection/">Particles</a></li></ul></li><li><span class="tocitem">7 MERA-Files</span><ul><li><a class="tocitem" href="../../../07_multi_Mera_Files/">Mera-Files</a></li><li><a class="tocitem" href="../../../07_1_multi_Mera_Files_Converter/">Converter</a></li></ul></li><li><span class="tocitem">8 Volume Rendering</span><ul><li><a class="tocitem" href="../../../paraview_intro/">Intro</a></li><li><a class="tocitem" href="../../../08_hydro_VTK_export/">Hydro</a></li><li><a class="tocitem" href="../../../08_particles_VTK_export/">Particles</a></li></ul></li><li><a class="tocitem" href="../../../Miscellaneous/">9 Miscellaneous</a></li><li><a class="tocitem" href="../../../examples/">10 Examples</a></li><li><a class="tocitem" href="../../../multi-threading/multi-threading_intro/">11 Multi-Threading</a></li><li><span class="tocitem">12 Benchmarks</span><ul><li><a class="tocitem" href="../../IO/IOperformance/">Server IO</a></li><li class="is-active"><a class="tocitem" href>Parallel RAMSES-Files Reading</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Prerequisites"><span>Prerequisites</span></a></li><li><a class="tocitem" href="#Quick-Benefits-Overview"><span>Quick Benefits Overview</span></a></li><li><a class="tocitem" href="#Understanding-Garbage-Collection-(GC)-in-Your-Results"><span>Understanding Garbage Collection (GC) in Your Results</span></a></li><li><a class="tocitem" href="#Common-Performance-Barriers"><span>Common Performance Barriers</span></a></li><li><a class="tocitem" href="#Setting-Up-Your-Test-Environment"><span>Setting Up Your Test Environment</span></a></li><li><a class="tocitem" href="#Prepare-the-files-and-How-the-Benchmark-Framework-Works"><span>Prepare the files and How the Benchmark Framework Works</span></a></li><li><a class="tocitem" href="#Running-Your-Performance-Tests"><span>Running Your Performance Tests</span></a></li><li><a class="tocitem" href="#Understanding-Your-Results"><span>Understanding Your Results</span></a></li><li><a class="tocitem" href="#Troubleshooting-Common-Issues"><span>Troubleshooting Common Issues</span></a></li><li><a class="tocitem" href="#Implementation-and-Maintenance"><span>Implementation and Maintenance</span></a></li><li><a class="tocitem" href="#Real-World-Performance-Validation"><span>Real-World Performance Validation</span></a></li><li><a class="tocitem" href="#Real-World-Server-Example"><span>Real-World Server Example</span></a></li><li><a class="tocitem" href="#Summary-and-Checklist"><span>Summary &amp; Checklist</span></a></li></ul></li><li><a class="tocitem" href="../../JLD2_reading/Mera_files_reading/">Mera-Files Reading</a></li><li><a class="tocitem" href="../../Projection/multi_projections/">Parallel Projections</a></li></ul></li><li><span class="tocitem">13 Reference Guide</span><ul><li><a class="tocitem" href="../../../quickreference/Julia_Quick_Reference/">Julia</a></li><li><a class="tocitem" href="../../../quickreference/Mera_Quick_Reference/">Mera</a></li></ul></li><li><a class="tocitem" href="../../../api/">14 API Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">12 Benchmarks</a></li><li class="is-active"><a href>Parallel RAMSES-Files Reading</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parallel RAMSES-Files Reading</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ManuelBehrendt/Mera.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ManuelBehrendt/Mera.jl/blob/master/docs/src/benchmarks/RAMSES_reading/ramses_reading.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Multi-Threaded-RAMSES-File-Reading-with-Mera:-Performance-Guide"><a class="docs-heading-anchor" href="#Multi-Threaded-RAMSES-File-Reading-with-Mera:-Performance-Guide">Multi-Threaded RAMSES File Reading with Mera: Performance Guide</a><a id="Multi-Threaded-RAMSES-File-Reading-with-Mera:-Performance-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-Threaded-RAMSES-File-Reading-with-Mera:-Performance-Guide" title="Permalink"></a></h1><h1 id="Prerequisites"><a class="docs-heading-anchor" href="#Prerequisites">Prerequisites</a><a id="Prerequisites-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisites" title="Permalink"></a></h1><p><strong>Note:</strong> This guide uses <code>juliaup</code> for managing Julia versions and calls Julia with a version specifier (e.g., <code>julia +1.11</code>). You can use your preferred Julia installation and invocation style; just ensure you are using Julia 1.10 or higher for the benchmarks.</p><ul><li><strong>Julia version:</strong> 1.10 or higher is required.</li><li><strong>Operating System:</strong> Linux, macOS, or Windows (tested on Linux/macOS).</li><li><strong>Basic Julia knowledge:</strong> Familiarity with the Julia REPL or Jupyter notebooks is helpful.</li></ul><p><strong>Modern astrophysics simulations generate massive volumes of data that require efficient processing.</strong>   In simulations that run on multiple CPU cores—often producing numerous related output files—loading the resulting RAMSES files can become a significant bottleneck, slowing down your workflow.   This guide demonstrates how to leverage multithreaded file loading in <strong>Mera</strong> to significantly accelerate your data analysis process.</p><h2 id="Quick-Benefits-Overview"><a class="docs-heading-anchor" href="#Quick-Benefits-Overview">Quick Benefits Overview</a><a id="Quick-Benefits-Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Benefits-Overview" title="Permalink"></a></h2><ul><li><strong>Why multithreading helps</strong>: While one CPU core waits for disk operations, other cores can start reading additional files simultaneously</li><li><strong>What you measure</strong>: total read time, memory cleanup (garbage collection) overhead, and result consistency</li><li><strong>When to stop adding threads</strong>: performance stops improving or memory cleanup takes more than 10-15% of total time</li><li><strong>Hardware considerations</strong>: Traditional drives work best with 4-8 threads; NVMe drives keep scaling much higher.</li></ul><h2 id="Understanding-Garbage-Collection-(GC)-in-Your-Results"><a class="docs-heading-anchor" href="#Understanding-Garbage-Collection-(GC)-in-Your-Results">Understanding Garbage Collection (GC) in Your Results</a><a id="Understanding-Garbage-Collection-(GC)-in-Your-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-Garbage-Collection-(GC)-in-Your-Results" title="Permalink"></a></h2><p><strong>What Garbage Collection Does</strong></p><p>Garbage collection is Julia&#39;s automatic system for freeing up memory that your programs no longer need. Think of it like an automatic cleanup service running in the background, removing data that&#39;s no longer being used so your system doesn&#39;t run out of memory space.</p><p><strong>How GC Works with Multiple Threads</strong></p><p>When running multiple threads to read files, each thread creates data in memory (like file contents and processing results). After processing, GC automatically cleans up this data. However, GC has overhead costs:</p><ul><li><p><strong>GC uses separate threads</strong> from your file-reading threads</p></li><li><p><strong>GC pauses can slow down your main work</strong> when memory cleanup becomes intensive</p></li><li><p><strong>Too many threads can overwhelm the GC system</strong>, causing cleanup overhead to become a bottleneck</p></li></ul><p><strong>Why This Matters for Your Thread Optimization</strong></p><p>Your benchmark results show GC time as a percentage of total execution time. This helps you understand:</p><ul><li><p><strong>Good performance</strong>: GC time stays below 10-15% of total time</p></li><li><p><strong>Warning signs</strong>: When GC time rises significantly, you&#39;re approaching your system&#39;s threading limits</p></li><li><p><strong>Optimal thread count</strong>: The point where you get maximum file reading speed without triggering excessive memory management overhead</p></li></ul><h2 id="Common-Performance-Barriers"><a class="docs-heading-anchor" href="#Common-Performance-Barriers">Common Performance Barriers</a><a id="Common-Performance-Barriers-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Performance-Barriers" title="Permalink"></a></h2><ul><li><p><strong>Storage speed limits</strong> - a single disk drive can only serve one request efficiently at a time</p></li><li><p><strong>File system overhead</strong> - opening thousands of small RAMSES files creates extra work for metadata operations</p></li><li><p><strong>Memory pressure</strong> - too many threads can trigger heavy garbage collection, stealing CPU cycles from actual work</p></li></ul><h2 id="Setting-Up-Your-Test-Environment"><a class="docs-heading-anchor" href="#Setting-Up-Your-Test-Environment">Setting Up Your Test Environment</a><a id="Setting-Up-Your-Test-Environment-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-Up-Your-Test-Environment" title="Permalink"></a></h2><h3 id="1.-Create-a-Clean-Julia-Project"><a class="docs-heading-anchor" href="#1.-Create-a-Clean-Julia-Project">1. Create a Clean Julia Project</a><a id="1.-Create-a-Clean-Julia-Project-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Create-a-Clean-Julia-Project" title="Permalink"></a></h3><p>Creating a dedicated Julia environment ensures reproducible results and clean dependency management. Start by creating a project directory and initializing the Julia package environment. You can do this in a terminal or in a Jupyter notebook cell (using the <code>;</code> shell escape):</p><pre><code class="language-bash hljs">mkdir ramses_reading
cd ramses_reading
julia --project=.</code></pre><h3 id="2.-Install-Required-Packages"><a class="docs-heading-anchor" href="#2.-Install-Required-Packages">2. Install Required Packages</a><a id="2.-Install-Required-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Install-Required-Packages" title="Permalink"></a></h3><h4 id="Download-and-unzip-the-test-suite"><a class="docs-heading-anchor" href="#Download-and-unzip-the-test-suite">Download and unzip the test suite</a><a id="Download-and-unzip-the-test-suite-1"></a><a class="docs-heading-anchor-permalink" href="#Download-and-unzip-the-test-suite" title="Permalink"></a></h4><pre><code class="language-bash hljs">curl -L -o RAMSES_reading_stats.zip https://github.com/ManuelBehrendt/Mera.jl/raw/master/src/benchmarks/RAMSES_reading/downloads/RAMSES_reading_stats.zip

# or
wget https://github.com/ManuelBehrendt/Mera.jl/raw/master/src/benchmarks/RAMSES_reading/downloads/RAMSES_reading_stats.zip -O RAMSES_reading_stats.zip</code></pre><p>Unzip the downloaded file:</p><pre><code class="language-bash hljs">unzip RAMSES_reading_stats.zip</code></pre><h4 id="Install-the-required-Julia-packages"><a class="docs-heading-anchor" href="#Install-the-required-Julia-packages">Install the required Julia packages</a><a id="Install-the-required-Julia-packages-1"></a><a class="docs-heading-anchor-permalink" href="#Install-the-required-Julia-packages" title="Permalink"></a></h4><p><strong>Important:</strong> Before running Julia code, always activate your project environment. In the Julia REPL or a Jupyter notebook cell, run:</p><pre><code class="language-julia hljs">using Pkg
Pkg.activate(&quot;.&quot;)
Pkg.add([&quot;Mera&quot;, &quot;CairoMakie&quot;, &quot;Glob&quot;])</code></pre><p>This approach creates <code>Project.toml</code> and <code>Manifest.toml</code> files that lock exact package versions, ensuring consistent results across different systems.</p><h3 id="3.-Project-Structure"><a class="docs-heading-anchor" href="#3.-Project-Structure">3. Project Structure</a><a id="3.-Project-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Project-Structure" title="Permalink"></a></h3><p>Your project directory should look like this:</p><pre><code class="nohighlight hljs">ramses_reading/
├── Project.toml         # Dependency specifications
├── Manifest.toml        # Exact package versions
├── run_test.sh          # Automated thread count testing (calls run_tests.jl)
├── run_test.jl          # Core timing measurements
├── run_test_plots.jl    # Visualization of the measurements (outputs PNG)</code></pre><h2 id="Prepare-the-files-and-How-the-Benchmark-Framework-Works"><a class="docs-heading-anchor" href="#Prepare-the-files-and-How-the-Benchmark-Framework-Works">Prepare the files and How the Benchmark Framework Works</a><a id="Prepare-the-files-and-How-the-Benchmark-Framework-Works-1"></a><a class="docs-heading-anchor-permalink" href="#Prepare-the-files-and-How-the-Benchmark-Framework-Works" title="Permalink"></a></h2><h3 id="Core-Timing-Script-(run_test.jl)"><a class="docs-heading-anchor" href="#Core-Timing-Script-(run_test.jl)">Core Timing Script (<code>run_test.jl</code>)</a><a id="Core-Timing-Script-(run_test.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Timing-Script-(run_test.jl)" title="Permalink"></a></h3><ul><li>Reads hydro, particle, and gravity files <strong>default: ten times each</strong> for statistical reliability</li><li>Records total execution time, garbage collection overhead, and any errors</li><li>Requires only two simple inputs:</li></ul><p>edit path to your simulation folder and give output number of a snapshot you want to use for the benchmark</p><h3 id="Automated-Test-Runner-(run_test.sh)"><a class="docs-heading-anchor" href="#Automated-Test-Runner-(run_test.sh)">Automated Test Runner (<code>run_test.sh</code>)</a><a id="Automated-Test-Runner-(run_test.sh)-1"></a><a class="docs-heading-anchor-permalink" href="#Automated-Test-Runner-(run_test.sh)" title="Permalink"></a></h3><ul><li>Systematically tests different thread configurations:</li></ul><p>make sure the file is executable, otherwise do:  chmod +x run<em>test.sh bash run</em>test.sh  </p><ul><li><p>edit multihtreading capabilites of your server in configs</p></li><li><p>Results are saved as structured JSON files and summary CSV tables.</p></li></ul><h3 id="Visualisation-Engine-(run_test_plots.jl)"><a class="docs-heading-anchor" href="#Visualisation-Engine-(run_test_plots.jl)">Visualisation Engine (<code>run_test_plots.jl</code>)</a><a id="Visualisation-Engine-(run_test_plots.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#Visualisation-Engine-(run_test_plots.jl)" title="Permalink"></a></h3><p>After completing the benchmark, generate comprehensive performance visualizations using the analysis script:</p><ul><li>Combines most benchmark results into comprehensive reports</li><li>Generates performance visualizations showing:<ul><li>Total read time vs. thread count</li><li>Speed-up curves compared to single-threaded baseline</li><li>Component-specific timing breakdowns</li></ul></li></ul><h2 id="Running-Your-Performance-Tests"><a class="docs-heading-anchor" href="#Running-Your-Performance-Tests">Running Your Performance Tests</a><a id="Running-Your-Performance-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Your-Performance-Tests" title="Permalink"></a></h2><pre><code class="language-bash hljs">chmod +x run_tests.sh
bash run_tests.sh      </code></pre><p>After completing the benchmark, generate comprehensive performance visualizations using the visualisation script. You can run this in the Julia REPL or in a Jupyter notebook cell (with <code>;</code>):</p><pre><code class="language-bash hljs">julia +1.11 --project=. run_test_plots.jl </code></pre><p><strong>Tip:</strong> After your analysis is complete, you can organize your results by moving the generated CSV and JSON files to a dedicated folder named with the current date (e.g., <code>benchmarks_20250726/</code>). For completeness and reproducibility, also copy the plotting script (<code>run_test_plots.jl</code>) into this folder. This keeps your benchmark data and analysis scripts together and your project directory tidy.</p><h2 id="Understanding-Your-Results"><a class="docs-heading-anchor" href="#Understanding-Your-Results">Understanding Your Results</a><a id="Understanding-Your-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-Your-Results" title="Permalink"></a></h2><h3 id="Performance-Curve-Analysis"><a class="docs-heading-anchor" href="#Performance-Curve-Analysis">Performance Curve Analysis</a><a id="Performance-Curve-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Curve-Analysis" title="Permalink"></a></h3><table><tr><th style="text-align: left">Chart Type</th><th style="text-align: left">Key Indicators</th><th style="text-align: left">Recommended Action</th></tr><tr><td style="text-align: left"><strong>Read Time vs. Threads</strong></td><td style="text-align: left">Time drops sharply initially, then levels off</td><td style="text-align: left">Choose thread count just before the curve flattens</td></tr><tr><td style="text-align: left"><strong>Speed-Up Comparison</strong></td><td style="text-align: left">Gap between ideal and actual performance lines</td><td style="text-align: left">Large gaps suggest tuning buffer sizes or GC threads</td></tr><tr><td style="text-align: left"><strong>GC Overhead Percentage</strong></td><td style="text-align: left">Should remain under 10-15%</td><td style="text-align: left">Higher values indicate thread count reduction needed</td></tr><tr><td style="text-align: left"><strong>Component Breakdown</strong></td><td style="text-align: left">One component much slower than others</td><td style="text-align: left">Investigate file sizes, compression, or format issues</td></tr></table><h3 id="Practical-Optimization-Guidelines"><a class="docs-heading-anchor" href="#Practical-Optimization-Guidelines">Practical Optimization Guidelines</a><a id="Practical-Optimization-Guidelines-1"></a><a class="docs-heading-anchor-permalink" href="#Practical-Optimization-Guidelines" title="Permalink"></a></h3><ul><li><strong>Start conservative</strong>: Test 1, 2, 4, 8 threads first; only jump to 32+ on high-end NVMe storage systems</li><li><strong>Monitor GC threads</strong>: Many workloads perform well with 2:1 compute-to-GC ratios (e.g., 8 compute + 4 GC threads)</li><li><strong>Reuse memory buffers</strong>: Avoiding repeated allocations often reduces GC overhead by 50%+</li><li><strong>Storage-specific limits</strong>: Traditional drives hit performance walls around 4-8 threads due to seek overhead</li><li><strong>Network storage considerations</strong>: Limit threads to avoid saturating network bandwidth, causing requests to queue rather than execute</li></ul><h2 id="Troubleshooting-Common-Issues"><a class="docs-heading-anchor" href="#Troubleshooting-Common-Issues">Troubleshooting Common Issues</a><a id="Troubleshooting-Common-Issues-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting-Common-Issues" title="Permalink"></a></h2><table><tr><th style="text-align: left">Problem</th><th style="text-align: left">Likely Cause</th><th style="text-align: left">Solution</th></tr><tr><td style="text-align: left">Performance <strong>decreases</strong> after 8 threads</td><td style="text-align: left">Storage or network bandwidth saturation</td><td style="text-align: left">Reduce to 4-8 threads</td></tr><tr><td style="text-align: left">GC overhead <strong>exceeds 15%</strong></td><td style="text-align: left">Too many memory allocations</td><td style="text-align: left">Reuse buffers, tune <code>GC_THREADS</code> setting</td></tr><tr><td style="text-align: left"><strong>Large timing variations</strong> between runs</td><td style="text-align: left">System interference from other processes</td><td style="text-align: left">Run during low-activity periods</td></tr></table><h2 id="Implementation-and-Maintenance"><a class="docs-heading-anchor" href="#Implementation-and-Maintenance">Implementation and Maintenance</a><a id="Implementation-and-Maintenance-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-and-Maintenance" title="Permalink"></a></h2><h3 id="Production-Deployment"><a class="docs-heading-anchor" href="#Production-Deployment">Production Deployment</a><a id="Production-Deployment-1"></a><a class="docs-heading-anchor-permalink" href="#Production-Deployment" title="Permalink"></a></h3><ul><li><strong>Document optimal settings</strong> for your specific hardware configuration in team documentation</li><li><strong>Set environment variables</strong> (<code>JULIA_NUM_THREADS</code>, <code>JULIA_NUM_GC_THREADS</code>) for consistent behavior</li><li><strong>Implement monitoring</strong> to track performance over time and detect degradation</li></ul><h3 id="Ongoing-Optimization"><a class="docs-heading-anchor" href="#Ongoing-Optimization">Ongoing Optimization</a><a id="Ongoing-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Ongoing-Optimization" title="Permalink"></a></h3><ul><li><strong>Run regression tests</strong> when hardware or simulation characteristics change</li><li><strong>Share configurations</strong> with collaborators using Project.toml/Manifest.toml for reproducible environments</li><li><strong>Monitor system resources</strong> (CPU utilization, memory usage, I/O wait times) during production workloads</li></ul><h3 id="Contributing-Back-to-the-Community"><a class="docs-heading-anchor" href="#Contributing-Back-to-the-Community">Contributing Back to the Community</a><a id="Contributing-Back-to-the-Community-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing-Back-to-the-Community" title="Permalink"></a></h3><ul><li><strong>Document unusual findings</strong> in Mera.jl GitHub issues for community benefit</li><li><strong>Submit performance improvements</strong> as pull requests when you discover optimizations</li><li><strong>Share benchmark results</strong> that help others with similar hardware configurations</li></ul><h2 id="Real-World-Performance-Validation"><a class="docs-heading-anchor" href="#Real-World-Performance-Validation">Real-World Performance Validation</a><a id="Real-World-Performance-Validation-1"></a><a class="docs-heading-anchor-permalink" href="#Real-World-Performance-Validation" title="Permalink"></a></h2><p>Optimal thread configurations emerge from the interaction between your specific server hardware, simulation file characteristics, and system environment. Continuous benchmarking and performance monitoring ensure your computational resources serve your research goals most effectively.</p><h2 id="Real-World-Server-Example"><a class="docs-heading-anchor" href="#Real-World-Server-Example">Real-World Server Example</a><a id="Real-World-Server-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Real-World-Server-Example" title="Permalink"></a></h2><p>The following example demonstrates benchmark execution and results from a production server running the complete test suite on a RAMSES simulation with output number 250.</p><p>GB 	&lt;2.71 MB&gt;/file AMR-Files:      10.85 GB 	&lt;2.17 MB&gt;/file Hydro-Files:    25.46 GB 	&lt;5.09 MB&gt;/file Gravity-Files:  17.82 GB 	&lt;3.56 MB&gt;/file Particle-Files: 39.53 MB 	&lt;7.9 KB&gt;/file</p><h3 id="Terminal-Output-During-Benchmark-Execution"><a class="docs-heading-anchor" href="#Terminal-Output-During-Benchmark-Execution">Terminal Output During Benchmark Execution</a><a id="Terminal-Output-During-Benchmark-Execution-1"></a><a class="docs-heading-anchor-permalink" href="#Terminal-Output-During-Benchmark-Execution" title="Permalink"></a></h3><p><img src="../PGN_Server_mujlti_reading.png" alt="Server output during benchmark"/></p><h3 id="Terminal-Output-During-Analysis"><a class="docs-heading-anchor" href="#Terminal-Output-During-Analysis">Terminal Output During Analysis</a><a id="Terminal-Output-During-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Terminal-Output-During-Analysis" title="Permalink"></a></h3><p><img src="../PGN_Server_multi_analysis.png" alt="Server output during analysis"/></p><h3 id="Plots-After-Analysis"><a class="docs-heading-anchor" href="#Plots-After-Analysis">Plots After Analysis</a><a id="Plots-After-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Plots-After-Analysis" title="Permalink"></a></h3><h3 id="File-Structure-of-the-Simulation-Used-for-Benchmarking"><a class="docs-heading-anchor" href="#File-Structure-of-the-Simulation-Used-for-Benchmarking">File Structure of the Simulation Used for Benchmarking</a><a id="File-Structure-of-the-Simulation-Used-for-Benchmarking-1"></a><a class="docs-heading-anchor-permalink" href="#File-Structure-of-the-Simulation-Used-for-Benchmarking" title="Permalink"></a></h3><p>The following Julia code provides an overview of the disk usage for the selected simulation output:</p><pre><code class="language-julia hljs">using Mera
path = &quot;/data/folder/&quot;
info = getinfo(250, path, verbose=false)
storageoverview(info)</code></pre><pre><code class="nohighlight hljs">Overview of the used disk space for output: [250]
------------------------------------------------------
GB             &lt;2.71 MB&gt;/file
AMR-Files:      10.85 GB   &lt;2.17 MB&gt;/file
Hydro-Files:    25.46 GB   &lt;5.09 MB&gt;/file
Gravity-Files:  17.82 GB   &lt;3.56 MB&gt;/file
Particle-Files: 39.53 MB   &lt;7.9 KB&gt;/file

mtime: 2024-06-06T10:26:39.133
ctime: 2024-06-06T17:13:46.723</code></pre><hr/><h2 id="Summary-and-Checklist"><a class="docs-heading-anchor" href="#Summary-and-Checklist">Summary &amp; Checklist</a><a id="Summary-and-Checklist-1"></a><a class="docs-heading-anchor-permalink" href="#Summary-and-Checklist" title="Permalink"></a></h2><ul><li>[ ] Julia 1.10+ is installed</li><li>[ ] Project directory created and environment initialized</li><li>[ ] Test suite downloaded <strong>and unzipped</strong></li><li>[ ] Project environment activated before running Julia code (<code>Pkg.activate(&quot;.&quot;)</code>)</li><li>[ ] Required packages installed (<code>Mera</code>, <code>CairoMakie</code>, <code>Glob</code>)</li><li>[ ] Benchmark scripts executed as described</li><li>[ ] Results visualized and interpreted</li></ul><p>If you completed all steps above, your benchmarking environment is ready and you can confidently analyze RAMSES file reading performance with Mera! ```</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../IO/IOperformance/">« Server IO</a><a class="docs-footer-nextpage" href="../../JLD2_reading/Mera_files_reading/">Mera-Files Reading »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 28 July 2025 17:31">Monday 28 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
