<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance &amp; Debugging · Mera.jl</title><meta name="title" content="Performance &amp; Debugging · Mera.jl"/><meta property="og:title" content="Performance &amp; Debugging · Mera.jl"/><meta property="twitter:title" content="Performance &amp; Debugging · Mera.jl"/><meta name="description" content="Documentation for Mera.jl."/><meta property="og:description" content="Documentation for Mera.jl."/><meta property="twitter:description" content="Documentation for Mera.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Mera.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../00_multi_FirstSteps/">First Steps</a></li><li><span class="tocitem">1 Data Inspection</span><ul><li><a class="tocitem" href="../../01_hydro_First_Inspection/">Hydro</a></li><li><a class="tocitem" href="../../01_particles_First_Inspection/">Particles</a></li><li><a class="tocitem" href="../../01_clumps_First_Inspection/">Clumps</a></li><li><a class="tocitem" href="../../api/data_inspection/">API Reference</a></li></ul></li><li><span class="tocitem">2 Load by Selection</span><ul><li><a class="tocitem" href="../../02_hydro_Load_Selections/">Hydro</a></li><li><a class="tocitem" href="../../02_particles_Load_Selections/">Particles</a></li><li><a class="tocitem" href="../../02_clumps_Load_Selections/">Clumps</a></li><li><a class="tocitem" href="../../api/data_loading/">API Reference</a></li></ul></li><li><span class="tocitem">3 Get Subregions</span><ul><li><a class="tocitem" href="../../03_hydro_Get_Subregions/">Hydro</a></li><li><a class="tocitem" href="../../03_particles_Get_Subregions/">Particles</a></li><li><a class="tocitem" href="../../03_clumps_Get_Subregions/">Clumps</a></li><li><a class="tocitem" href="../../api/subregions/">API Reference</a></li></ul></li><li><span class="tocitem">4 Basic Calculations</span><ul><li><a class="tocitem" href="../../04_multi_Basic_Calculations/">Tutorial</a></li><li><a class="tocitem" href="../../api/calculations/">API Reference</a></li></ul></li><li><span class="tocitem">5 Mask/Filter/Meta</span><ul><li><a class="tocitem" href="../../05_multi_Masking_Filtering/">Tutorial</a></li><li><a class="tocitem" href="../../api/masking_filtering/">API Reference</a></li></ul></li><li><span class="tocitem">6 Projection</span><ul><li><a class="tocitem" href="../../06_hydro_Projection/">Hydro</a></li><li><a class="tocitem" href="../../06_particles_Projection/">Particles</a></li><li><a class="tocitem" href="../../api/projections/">API Reference</a></li></ul></li><li><span class="tocitem">7 MERA-Files</span><ul><li><a class="tocitem" href="../../07_multi_Mera_Files/">Mera-Files</a></li><li><a class="tocitem" href="../../07_1_multi_Mera_Files_Converter/">Converter</a></li><li><a class="tocitem" href="../../api/mera_files/">API Reference</a></li></ul></li><li><span class="tocitem">8 Volume Rendering</span><ul><li><a class="tocitem" href="../../paraview/paraview_intro/">Intro</a></li><li><a class="tocitem" href="../../paraview/08_hydro_VTK_export/">Hydro</a></li><li><a class="tocitem" href="../../paraview/08_particles_VTK_export/">Particles</a></li><li><a class="tocitem" href="../../api/volume_rendering/">API Reference</a></li></ul></li><li><span class="tocitem">9 Miscellaneous</span><ul><li><a class="tocitem" href="../../Miscellaneous/">Tutorial</a></li><li><a class="tocitem" href="../../api/miscellaneous/">API Reference</a></li></ul></li><li><span class="tocitem">10 Examples</span><ul><li><a class="tocitem" href="../../examples/">Tutorial</a></li><li><a class="tocitem" href="../../api/examples/">API Reference</a></li></ul></li><li><span class="tocitem">11 Multi-Threading</span><ul><li><a class="tocitem" href="../../multi-threading/multi-threading_intro/">Tutorial</a></li><li><a class="tocitem" href="../../api/multithreading/">API Reference</a></li></ul></li><li><span class="tocitem">12 Notifications</span><ul><li><a class="tocitem" href="../../notifications/">Overview</a></li><li><a class="tocitem" href="../../notifications/bell/">Bell (Local Audio)</a></li><li><a class="tocitem" href="../../notifications/email/">Email</a></li><li><a class="tocitem" href="../../notifications/zulip/">Zulip (Team Chat)</a></li><li><a class="tocitem" href="../../api/notifications/">API Reference</a></li></ul></li><li><span class="tocitem">13 Benchmarks</span><ul><li><a class="tocitem" href="../../benchmarks/IO/IOperformance/">Server IO</a></li><li><a class="tocitem" href="../../benchmarks/RAMSES_reading/ramses_reading/">Parallel RAMSES-Files Reading</a></li><li><a class="tocitem" href="../../benchmarks/JLD2_reading/Mera_files_reading/">Mera-Files Reading</a></li><li><a class="tocitem" href="../../benchmarks/Projection/multi_projections/">Parallel Projections</a></li></ul></li><li><span class="tocitem">14 Julia Quick Reference</span><ul><li><a class="tocitem" href="../01_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../02_migrators/">From Other Languages</a></li><li><a class="tocitem" href="../03_packages/">Essential Packages</a></li><li><a class="tocitem" href="../04_mera_patterns/">Julia Fundamentals</a></li><li class="is-active"><a class="tocitem" href>Performance &amp; Debugging</a><ul class="internal"><li><a class="tocitem" href="#Top-5-Performance-Tips"><span>Top 5 Performance Tips</span></a></li><li><a class="tocitem" href="#General-Performance-Tips"><span>General Performance Tips</span></a></li><li><a class="tocitem" href="#Performance-Tools"><span>Performance Tools</span></a></li><li><a class="tocitem" href="#Metaprogramming"><span>Metaprogramming</span></a></li><li><a class="tocitem" href="#Parallelism-and-GPU"><span>Parallelism &amp; GPU</span></a></li><li><a class="tocitem" href="#Debugging-Tools"><span>Debugging Tools</span></a></li><li><a class="tocitem" href="#Common-Plotting-Examples"><span>Common Plotting Examples</span></a></li><li><a class="tocitem" href="#Type-System-and-Memory-Management"><span>Type System &amp; Memory Management</span></a></li></ul></li><li><a class="tocitem" href="../06_resources/">Resources &amp; Community</a></li></ul></li><li><a class="tocitem" href="../../api/">15 Complete API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">14 Julia Quick Reference</a></li><li class="is-active"><a href>Performance &amp; Debugging</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Performance &amp; Debugging</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Performance-and-Debugging"><a class="docs-heading-anchor" href="#Performance-and-Debugging">Performance &amp; Debugging</a><a id="Performance-and-Debugging-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-and-Debugging" title="Permalink"></a></h1><p><strong>Optimization and profiling tools for Julia</strong></p><h2 id="Top-5-Performance-Tips"><a class="docs-heading-anchor" href="#Top-5-Performance-Tips">Top 5 Performance Tips</a><a id="Top-5-Performance-Tips-1"></a><a class="docs-heading-anchor-permalink" href="#Top-5-Performance-Tips" title="Permalink"></a></h2><blockquote><ol><li><strong>Write code inside functions, not at global scope</strong></li><li><strong>Use concrete types for arrays and variables</strong></li><li><strong>Prefer broadcasting (<code>.</code>) for elementwise operations</strong></li><li><strong>Pre-allocate arrays outside loops</strong></li><li><strong>Profile and benchmark with <code>@profile</code> and <code>@btime</code></strong></li></ol></blockquote><h2 id="General-Performance-Tips"><a class="docs-heading-anchor" href="#General-Performance-Tips">General Performance Tips</a><a id="General-Performance-Tips-1"></a><a class="docs-heading-anchor-permalink" href="#General-Performance-Tips" title="Permalink"></a></h2><blockquote><p><strong>General Performance Tips:</strong></p><ul><li>Write code inside functions, not at global scope   <em>(Functions are much faster than global code in Julia)</em></li><li>Use concrete types for arrays and variables   <em>(E.g., <code>Vector{Float64}</code> not <code>Vector{Any}</code>; concrete types allow Julia to generate fast code)</em></li><li>Avoid type changes in variables (type instability)   <em>(Don&#39;t assign different types to the same variable; e.g., keep <code>x</code> always a <code>Float64</code>)</em></li><li>Use <code>@btime</code> from BenchmarkTools for timing   <em>(Accurate benchmarking, better than <code>@time</code>)</em></li><li>Prefer <code>eachindex(A)</code> for array iteration   <em>(<code>eachindex(A)</code> gives the most efficient and safe way to loop over all indices of <code>A</code>, even for non-contiguous arrays)</em></li><li>Use broadcasting (<code>.</code>) for elementwise ops   <em>(E.g., <code>sin.(x)</code> applies <code>sin</code> to every element of <code>x</code>)</em></li><li>Avoid unnecessary memory allocations   <em>(Pre-allocate arrays outside loops; don&#39;t create new arrays in every iteration)</em></li><li>Use <code>@inbounds</code> and <code>@views</code> for advanced speedups   <em>(<code>@inbounds</code> skips bounds checking; <code>@views</code> avoids copying slices)</em></li><li>Profile with <code>@profile</code> and visualize with ProfileView   <em>(Find bottlenecks in your code)</em></li></ul></blockquote><h2 id="Performance-Tools"><a class="docs-heading-anchor" href="#Performance-Tools">Performance Tools</a><a id="Performance-Tools-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Tools" title="Permalink"></a></h2><blockquote><p>Use these tools to benchmark, profile, and optimize your Julia code. Start with <code>@btime</code> for quick timing, and use <code>@profile</code> for deeper analysis.</p></blockquote><table><tr><th style="text-align: left">Task</th><th style="text-align: left">Julia Code</th><th style="text-align: left">Package</th></tr><tr><td style="text-align: left">Precise timing</td><td style="text-align: left"><code>@btime func(x)</code></td><td style="text-align: left">BenchmarkTools</td></tr><tr><td style="text-align: left">Profile code</td><td style="text-align: left"><code>@profile func(x)</code>&lt;br&gt;<code>ProfileView.@profview func(x)</code></td><td style="text-align: left">[base]/ProfileView</td></tr><tr><td style="text-align: left">Progress bar</td><td style="text-align: left"><code>@showprogress for i in 1:N ... end</code></td><td style="text-align: left">ProgressMeter</td></tr><tr><td style="text-align: left">Live reload</td><td style="text-align: left"><code>using Revise</code> (auto-reload files)</td><td style="text-align: left">Revise</td></tr></table><h2 id="Metaprogramming"><a class="docs-heading-anchor" href="#Metaprogramming">Metaprogramming</a><a id="Metaprogramming-1"></a><a class="docs-heading-anchor-permalink" href="#Metaprogramming" title="Permalink"></a></h2><blockquote><p>Julia supports powerful metaprogramming: you can generate, inspect, and transform code at runtime using macros and expressions. This enables advanced code reuse, domain-specific languages, and performance optimizations.</p></blockquote><h3 id="Macros-and-Expressions"><a class="docs-heading-anchor" href="#Macros-and-Expressions">Macros and Expressions</a><a id="Macros-and-Expressions-1"></a><a class="docs-heading-anchor-permalink" href="#Macros-and-Expressions" title="Permalink"></a></h3><blockquote><p>Macros operate on code before it runs. Use <code>@macro</code> to transform code, and <code>:expr</code> to represent code as data.</p></blockquote><pre><code class="language-julia hljs"># Example: @show macro prints code and value
@show 2 + 2
# Output: 2 + 2 = 4

# Build and evaluate expressions
ex = :(a + b^2)
eval(ex)   # Evaluates the expression in global scope

# Define your own macro
macro sayhello(name)
    :(println(&quot;Hello, $name!&quot;))
end
@sayhello &quot;Julia&quot;</code></pre><blockquote><p><strong>Advantages:</strong></p><ul><li>Write code that writes code (DRY principle)</li><li>Create custom control structures and DSLs</li><li>Enable compile-time checks and optimizations</li><li>Used for performance tools (e.g., <code>@btime</code>, <code>@inbounds</code>, <code>@views</code>)</li></ul></blockquote><h2 id="Parallelism-and-GPU"><a class="docs-heading-anchor" href="#Parallelism-and-GPU">Parallelism &amp; GPU</a><a id="Parallelism-and-GPU-1"></a><a class="docs-heading-anchor-permalink" href="#Parallelism-and-GPU" title="Permalink"></a></h2><blockquote><p>Julia supports multithreading, distributed computing, and GPU acceleration. Use the appropriate macros and packages for your hardware.</p></blockquote><table><tr><th style="text-align: left">Task</th><th style="text-align: left">Julia Code</th><th style="text-align: left">Package</th></tr><tr><td style="text-align: left">Multithreading</td><td style="text-align: left"><code>Threads.@threads for i in 1:N ... end</code></td><td style="text-align: left">[base]</td></tr><tr><td style="text-align: left">Distributed for</td><td style="text-align: left"><code>@distributed for i in 1:N ... end</code></td><td style="text-align: left">Distributed</td></tr><tr><td style="text-align: left">Parallel map</td><td style="text-align: left"><code>pmap(f, xs)</code></td><td style="text-align: left">Distributed</td></tr><tr><td style="text-align: left">Shared arrays</td><td style="text-align: left"><code>SharedArray{T}(dims)</code></td><td style="text-align: left">SharedArrays</td></tr><tr><td style="text-align: left">MPI (cluster)</td><td style="text-align: left"><code>using MPI; MPI.Init(); ...</code></td><td style="text-align: left">MPI.jl</td></tr><tr><td style="text-align: left">Task-based DAG</td><td style="text-align: left"><code>@spawnat</code>, <code>@async</code>, <code>@sync</code></td><td style="text-align: left">[base]</td></tr><tr><td style="text-align: left">Dagger DAG</td><td style="text-align: left"><code>using Dagger; delayed(f)(args...)</code></td><td style="text-align: left">Dagger.jl</td></tr><tr><td style="text-align: left">GPU arrays</td><td style="text-align: left"><code>using CUDA; x = CuArray(rand(1000))</code></td><td style="text-align: left">CUDA</td></tr><tr><td style="text-align: left">Multi-GPU</td><td style="text-align: left"><code>CUDA.devices()</code>, <code>CUDA.@sync</code></td><td style="text-align: left">CUDA</td></tr><tr><td style="text-align: left">ThreadsX</td><td style="text-align: left"><code>ThreadsX.map(f, xs)</code></td><td style="text-align: left">ThreadsX</td></tr><tr><td style="text-align: left">FLoops</td><td style="text-align: left"><code>@floop for ... end</code></td><td style="text-align: left">FLoops</td></tr></table><h2 id="Debugging-Tools"><a class="docs-heading-anchor" href="#Debugging-Tools">Debugging Tools</a><a id="Debugging-Tools-1"></a><a class="docs-heading-anchor-permalink" href="#Debugging-Tools" title="Permalink"></a></h2><table><tr><th style="text-align: left"><strong>Package</strong></th><th style="text-align: left"><strong>Purpose</strong></th><th style="text-align: left"><strong>Key Functions</strong></th></tr><tr><td style="text-align: left">Debugger</td><td style="text-align: left">Debugging</td><td style="text-align: left"><code>@enter</code>, <code>@run</code>, <code>@bp</code></td></tr><tr><td style="text-align: left">ProfileView</td><td style="text-align: left">Profile visualization</td><td style="text-align: left"><code>@profview</code>, visual profiler</td></tr><tr><td style="text-align: left">BenchmarkTools</td><td style="text-align: left">Accurate benchmarking</td><td style="text-align: left"><code>@benchmark</code>, <code>@btime</code></td></tr><tr><td style="text-align: left">Revise</td><td style="text-align: left">Live code reloading</td><td style="text-align: left">Auto-reload on file change</td></tr></table><h2 id="Common-Plotting-Examples"><a class="docs-heading-anchor" href="#Common-Plotting-Examples">Common Plotting Examples</a><a id="Common-Plotting-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Plotting-Examples" title="Permalink"></a></h2><pre><code class="language-julia hljs"># Makie basic plotting
using CairoMakie
fig = Figure()
ax = Axis(fig[1, 1], xlabel=&quot;x&quot;, ylabel=&quot;y&quot;)
lines!(ax, 1:10, rand(10))
scatter!(ax, 1:10, rand(10))
fig

# 3D with GLMakie
using GLMakie
x = y = -10:0.5:10
z = [sin(sqrt(i^2 + j^2)) for i in x, j in y]
surface(x, y, z)

# PyPlot (matplotlib style)
using PyPlot
plot(1:10, rand(10))
scatter(1:5, rand(5))
xlabel(&quot;x&quot;); ylabel(&quot;y&quot;)</code></pre><h2 id="Type-System-and-Memory-Management"><a class="docs-heading-anchor" href="#Type-System-and-Memory-Management">Type System &amp; Memory Management</a><a id="Type-System-and-Memory-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Type-System-and-Memory-Management" title="Permalink"></a></h2><h3 id="Type-Stability-and-Performance"><a class="docs-heading-anchor" href="#Type-Stability-and-Performance">Type Stability and Performance</a><a id="Type-Stability-and-Performance-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Stability-and-Performance" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Type-stable function (good)
function good_sum(x::Vector{Float64})
    s = 0.0  # Always Float64
    for i in eachindex(x)
        s += x[i]
    end
    return s
end

# Type-unstable function (bad)
function bad_sum(x)
    s = 0    # Type changes from Int to Float64
    for val in x
        s += val
    end
    return s
end</code></pre><h3 id="Memory-Allocation-Tips"><a class="docs-heading-anchor" href="#Memory-Allocation-Tips">Memory Allocation Tips</a><a id="Memory-Allocation-Tips-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Allocation-Tips" title="Permalink"></a></h3><ul><li>Use <code>similar(A)</code> to create arrays with same type and size</li><li>Pre-allocate output arrays: <code>result = zeros(n)</code></li><li>Use <code>@views</code> for array slicing without copying</li><li>Use <code>@inbounds</code> to skip bounds checking (when safe)</li><li>Avoid creating temporary arrays in loops</li></ul><pre><code class="language-julia hljs"># Good: pre-allocated, in-place operation
function compute_squares!(result, x)
    @inbounds for i in eachindex(x)
        result[i] = x[i]^2
    end
    return result
end

# Usage
x = rand(1000)
result = similar(x)
compute_squares!(result, x)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../04_mera_patterns/">« Julia Fundamentals</a><a class="docs-footer-nextpage" href="../06_resources/">Resources &amp; Community »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 18 August 2025 18:42">Monday 18 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
