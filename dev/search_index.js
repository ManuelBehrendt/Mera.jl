var documenterSearchIndex = {"docs":
[{"location":"01_particles_First_Inspection/#.-Particles:-First-Data-Inspection-1","page":"Particles","title":"1. Particles: First Data Inspection","text":"","category":"section"},{"location":"01_particles_First_Inspection/#Simulation-Overview-1","page":"Particles","title":"Simulation Overview","text":"","category":"section"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"using Mera\n#info = getinfo(1, \"../../testing/simulations/manu_stable_2019\");\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:40:36.118\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"A short overview of the loaded particle properties is printed:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"existence of particle files\nthe predefined variables\nthe number of particles for each id/family (if exist)\nthe variable names from the descriptor file (if exist)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The functions in Mera \"know\" the predefined particle variable names:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"From >= ramses-version-2018: :vx, :vy, :vz, :mass, :family, :tag, :birth, :metals :var9,....\nFor  =< ramses-version-2017: :vx, :vy, :vz, :mass, :birth, :var6, :var7,....\nCurrently, the following variables are loaded by default (if exist): :level, :x, :y, :z, :id, :family, :tag.\nThe cpu number associated with the particles can be loaded with the variable names: :cpu or :varn1\nIn a future version the variable names from the particle descriptor can be used by setting the field info.descriptor.useparticles = true .","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Get an overview of the loaded particle properties:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"viewfields(info.part_info)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Particle overview\u001b\n\u001b ===============================\u001b\neta_sn\t= 0.0\nage_sn\t= 0.6706464407596582\nf_w\t= 0.0\nNpart\t= 509150\nNdm\t= 2547\nNstars\t= 506603\nNsinks\t= 0\nNcloud\t= 0\nNdebris\t= 0\nNother\t= 0\nNundefined\t= 0\nother_tracer1\t= 0\ndebris_tracer\t= 0\ncloud_tracer\t= 0\nstar_tracer\t= 0\nother_tracer2\t= 0\ngas_tracer\t= 0","category":"page"},{"location":"01_particles_First_Inspection/#Load-AMR/Particle-Data-1","page":"Particles","title":"Load AMR/Particle Data","text":"","category":"section"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Read the AMR and the Particle data from all files of the full box with all existing variables and particle positions:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"particles = getparticles(info);","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-12T20:40:36.139\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(1, 2, 3, 4, 5) = (:vx, :vy, :vz, :mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\n\n\n Reading data...100%|████████████████████████████████████| Time: 0:00:03\u001b\n\n\nFound 5.089390e+05 particles\nMemory used for data table :34.947275161743164 MB\n-------------------------------------------------------","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The memory consumption of the data table is printed at the end. We provide a function which gives the possibility to print the used memory of any object:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"usedmemory(particles);","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Memory used: 35.211 MB","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The assigned object is now of type PartDataType:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"typeof(particles)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"PartDataType","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"It is a sub-type of ContainMassDataSetType","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"supertype( ContainMassDataSetType )","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"DataSetType","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"ContainMassDataSetType is a sub-type of to the super-type DataSetType","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"supertype( PartDataType )","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"HydroPartType","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The data is stored in a JuliaDB table and the user selected particle variables and parameters are assigned to fields:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"viewfields(particles)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"\u001b data ==> JuliaDB table: (:level, :x, :y, :z, :id, :vx, :vy, :vz, :mass, :birth)\u001b\n\n\u001b info ==> subfields: (:output, :path, :fnames, :simcode, :mtime, :ctime, :ncpu, :ndim, :levelmin, :levelmax, :boxlen, :time, :aexp, :H0, :omega_m, :omega_l, :omega_k, :omega_b, :unit_l, :unit_d, :unit_m, :unit_v, :unit_t, :gamma, :hydro, :nvarh, :nvarp, :variable_list, :gravity_variable_list, :particles_variable_list, :clumps_variable_list, :sinks_variable_list, :descriptor, :amr, :gravity, :particles, :clumps, :sinks, :rt, :namelist, :namelist_content, :headerfile, :makefile, :files_content, :timerfile, :compilationfile, :patchfile, :Narraysize, :scale, :grid_info, :part_info, :compilation, :constants)\u001b\n\nlmin\t= 6\nlmax\t= 14\nboxlen\t= 48.0\nranges\t= [0.0, 1.0, 0.0, 1.0, 0.0, 1.0]\nselected_partvars\t= Symbol[:level, :x, :y, :z, :id, :vx, :vy, :vz, :mass, :birth]\n\n\u001b scale ==> subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)\u001b","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"For convenience, all the fields from the info-object above (InfoType) are now also accessible from the object with \"particles.info\" and the scaling relations from code to cgs units in \"particles.scale\".","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Print the fields of an object (composite type) in a simple list:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"propertynames(particles)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"(:data, :info, :lmin, :lmax, :boxlen, :ranges, :selected_partvars, :used_descriptors, :scale)","category":"page"},{"location":"01_particles_First_Inspection/#Overview-of-AMR/Particles-1","page":"Particles","title":"Overview of AMR/Particles","text":"","category":"section"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Get an overview of the AMR structure associated with the object particles (PartDataType). The printed information is stored into the object overview_amr as a JuliaDB table (code units)  and can be used for further calculations:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"amr_overview = amroverview(particles)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Counting...\n\n\n\n\n\nTable with 9 rows, 2 columns:\nlevel  particles\n────────────────\n6      2867\n7      11573\n8      56209\n9      118156\n10     115506\n11     77303\n12     49300\n13     31859\n14     46166","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Get some overview of the data that is associated with the object particles. The calculated information can be accessed from the object data_overview (here) in code units for further calculations:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"data_overview = dataoverview(particles)","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Table with 9 rows, 19 columns:\nColumns:\n #   \u001b  colname    \u001b  type\u001b\n───────────────────\n1   level      Any\n2   x_min      Any\n3   x_max      Any\n4   y_min      Any\n5   y_max      Any\n6   z_min      Any\n7   z_max      Any\n8   id_min     Any\n9   id_max     Any\n10  vx_min     Any\n11  vx_max     Any\n12  vy_min     Any\n13  vy_max     Any\n14  vz_min     Any\n15  vz_max     Any\n16  mass_min   Any\n17  mass_max   Any\n18  birth_min  Any\n19  birth_max  Any","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"If the number of columns is relatively long, the table is typically represented by an overview. To access certain columns, use the select function. The representation \":birth_max\" is called a quoted Symbol (see in Julia documentation):","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"using JuliaDB","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"select(data_overview, (:level,:mass_min, :mass_max, :birth_min, :birth_max ) )","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Table with 9 rows, 5 columns:\nlevel  mass_min    mass_max    birth_min  birth_max\n───────────────────────────────────────────────────\n6      1.13606e-5  1.13606e-5  4.54194    38.2611\n7      1.13606e-5  1.13606e-5  4.35262    38.6822\n8      1.13606e-5  2.27212e-5  4.30782    39.2733\n9      1.13606e-5  2.27212e-5  4.39811    39.397\n10     1.13606e-5  2.27212e-5  4.29246    39.6783\n11     1.13606e-5  2.27212e-5  4.36385    39.744\n12     1.13606e-5  2.27212e-5  4.51187    39.8358\n13     4.99231e-6  2.27212e-5  4.47027    39.883\n14     4.91416e-6  2.27212e-5  5.2582     39.902","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Get an array from the column \":birth\" in data_overview and scale it to the units Myr. The order of the calculated data is consistent with the table above:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"column(data_overview, :birth_min) * info.scale.Myr","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"9-element Array{Float64,1}:\n 67.72475450854526\n 64.901905404619  \n 64.23377578948651\n 65.58011000778922\n 64.00484282690913\n 65.06931266062217\n 67.27645257301232\n 66.6561171130916\n 78.40495776518468","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Or simply convert the birth_max data in the table to Myr units by manipulating the column:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"data_overview = transform(data_overview, :birth_max => :birth_max => value->value * info.scale.Myr);","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"select(data_overview, (:level,:mass_min, :mass_max, :birth_min, :birth_max ) )","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Table with 9 rows, 5 columns:\nlevel  mass_min    mass_max    birth_min  birth_max\n───────────────────────────────────────────────────\n6      1.13606e-5  1.13606e-5  4.54194    570.511\n7      1.13606e-5  1.13606e-5  4.35262    576.79\n8      1.13606e-5  2.27212e-5  4.30782    585.604\n9      1.13606e-5  2.27212e-5  4.39811    587.448\n10     1.13606e-5  2.27212e-5  4.29246    591.643\n11     1.13606e-5  2.27212e-5  4.36385    592.623\n12     1.13606e-5  2.27212e-5  4.51187    593.991\n13     4.99231e-6  2.27212e-5  4.47027    594.694\n14     4.91416e-6  2.27212e-5  5.2582     594.977","category":"page"},{"location":"01_particles_First_Inspection/#Data-inspection-1","page":"Particles","title":"Data inspection","text":"","category":"section"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The data is associated with the field particles.data as a JuliaDB table (code units). Each row corresponds to a particle and each column to a property which makes it easy to find, filter, map, aggregate, group the data, etc. More information can be found in the Mera tutorials or in: JuliaDB API Reference","category":"page"},{"location":"01_particles_First_Inspection/#Table-View-1","page":"Particles","title":"Table View","text":"","category":"section"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"The particle positions x,y,z are given in code units and used in many functions of MERA and should not be modified.","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"particles.data","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Table with 508939 rows, 10 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int32\n2   x        Float64\n3   y        Float64\n4   z        Float64\n5   id       Int32\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   mass     Float64\n10  birth    Float64","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"A more detailed view into the data:","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"select(particles.data, (:level,:x, :y, :z, :birth) )","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"Table with 508939 rows, 5 columns:\n level  \u001b  x           \u001b  y        \u001b  z        \u001b birth\n────────────────────────────────────────────\n6      0.00462947  22.3885  24.571   32.0735\n6      0.109066    22.3782  21.5844  19.8963\n6      0.238211    28.7537  24.8191  24.9471\n6      0.271366    22.7512  31.5681  20.9888\n6      0.312574    16.2385  23.7591  23.0935\n6      0.314957    28.2084  30.966   31.6911\n6      0.328337    4.59858  23.5001  30.3666\n6      0.420712    27.6688  26.5735  18.9512\n6      0.509144    33.1737  23.9789  24.3613\n6      0.565516    25.9409  26.0579  32.7551\n6      0.587289    9.60231  23.8477  29.6981\n6      0.592878    25.5519  21.3079  15.9204\n⋮\n14     37.6271     25.857   23.8833  36.7754\n14     37.6299     25.8403  23.9383  36.0289\n14     37.6301     25.8502  23.9361  38.7225\n14     37.6326     25.8544  23.9383  36.3547\n14     37.6528     25.8898  23.9928  38.2109\n14     37.6643     25.9061  23.9945  39.49\n14     37.6813     25.8743  23.9789  36.6981\n14     37.7207     25.8623  23.8775  38.6107\n14     38.173      25.8862  23.7978  33.0212\n14     38.1738     25.8914  23.7979  35.2712\n14     38.1739     25.8905  23.7992  34.4097","category":"page"},{"location":"01_particles_First_Inspection/#","page":"Particles","title":"Particles","text":"","category":"page"},{"location":"examples/LoadFromExistingOutputs/#Load-Data-from-Existing-Outputs-1","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"","category":"section"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"using Mera","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"*__   __ _______ ______   _______\n|  |_|  |       |    _ | |   _   |\n|       |    ___|   | || |  |_|  |\n|       |   |___|   |_||_|       |\n|       |    ___|    __  |       |\n| ||_|| |   |___|   |  | |   _   |\n|_|   |_|_______|___|  |_|__| |__|","category":"page"},{"location":"examples/LoadFromExistingOutputs/#Load-data-from-a-sequence-of-snapshots-1","page":"Load Data from Existing Outputs","title":"Load data from a sequence of snapshots","text":"","category":"section"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"for i = 1:10\n    info = getinfo(output=i, \"../../../testing/simulations/manu_sim_sf_L10\", verbose=false)\n    #...gethydro(info)...getparticles(info)... etc.\nend","category":"page"},{"location":"examples/LoadFromExistingOutputs/#Load-data-from-existing-simulations-in-a-given-folder-1","page":"Load Data from Existing Outputs","title":"Load data from existing simulations in a given folder","text":"","category":"section"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"List the content of a given folder:","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"path = \"../../../testing/simulations/ramses_star_formation\"\nreaddir(path)","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"9-element Array{String,1}:\n \".ipynb_checkpoints\"\n \"output_00001\"      \n \"output_00003\"      \n \"output_00004\"      \n \"output_00007\"      \n \"output_00010\"      \n \"output_00013\"      \n \"output_00016\"      \n \"output_00019\"","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"Get the relevant simulation output-numbers:","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"N = checkoutputs(path);","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"N.outputs","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"7-element Array{Int64,1}:\n  1\n  4\n  7\n 10\n 13\n 16\n 19","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"List of empty simulation folders:","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"N.missing","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"1-element Array{Int64,1}:\n 3","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"Load the data:","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"for i in N.outputs\n    println(\"Output: $i\")\n    info = getinfo(output=i, path, verbose=false)\n    #...gethydro(info)...getparticles(info)... etc.\nend","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"Output: 1\nOutput: 4\nOutput: 7\nOutput: 10\nOutput: 13\nOutput: 16\nOutput: 19","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"Get the physical time of all existing outputs:","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"gettime.(N.outputs, path, :Myr)","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"7-element Array{Float64,1}:\n 0.0               \n 0.6974071892328049\n 0.8722968605999833\n 1.0432588470755855\n 1.2217932462903247\n 1.4016810597086558\n 1.5865234202798626","category":"page"},{"location":"examples/LoadFromExistingOutputs/#","page":"Load Data from Existing Outputs","title":"Load Data from Existing Outputs","text":"","category":"page"},{"location":"03_hydro_Get_Subregions/#.-Hydro:-Get-Sub-Regions-of-The-Loaded-Data-1","page":"Hydro","title":"3. Hydro: Get Sub-Regions of The Loaded Data","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Load-the-Data-1","page":"Hydro","title":"Load the Data","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"using Mera, PyPlot\nusing ColorSchemes\ncmap = ColorMap(ColorSchemes.lajolla.colors) # See http://www.fabiocrameri.ch/colourmaps.php\n\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\")\ngas  = gethydro(info, :rho, lmax=10, smallr=1e-5);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:23:22.753\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get hydro data: 2020-02-18T23:23:32.417\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1,) = (:rho,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:02:49\u001b\n\n\nMemory used for data table :186.1558656692505 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#Cuboid-Region-1","page":"Hydro","title":"Cuboid Region","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Create-projections-of-the-full-box:-1","page":"Hydro","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:03\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The generated objects include, e.g. the extent of the processed domain, that can be used to declare the specific range of the plots, while the field cextent gives the extent related to a given center (default: [0.,0.,0.]).","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"propertynames(proj_z)","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(:maps, :maps_unit, :maps_lmax, :maps_mode, :lmax_projected, :lmin, :lmax, :ranges, :extent, :cextent, :ratio, :boxlen, :smallr, :smallc, :scale, :info)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cuboid-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Hydro","title":"Cuboid Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cuboid-Region:-Cutout-the-data-assigned-to-the-object-gas-1","page":"Hydro","title":"Cuboid Region: Cutout the data assigned to the object gas","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"Note: The selected regions can be given relative to a user given center or to the box corner [0., 0., 0.] by default. The user can choose between standard notation 0:1 or physical length-units, defined in e.g. info.scale :","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion( gas, :cuboid,\n                            xrange=[-4., 0.],\n                            yrange=[-15., 15.],\n                            zrange=[-2., 2.],\n                            center=[:boxcenter],\n                            range_unit=:kpc);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:06.861\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :47.87415790557861 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The function subregion creates a new object with the same type as the object created by the function gethydro :","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"typeof(gas_subregion)","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"HydroDataType","category":"page"},{"location":"03_hydro_Get_Subregions/#Cuboid-Region:-Projections-of-the-sub-region.-1","page":"Hydro","title":"Cuboid Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cuboid-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Hydro","title":"Cuboid Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion( gas, :cuboid,\n                            xrange=[-4., 0.],\n                            yrange=[-15., 15.],\n                            zrange=[-2., 2.],\n                            center=[:boxcenter],\n                            range_unit=:kpc,\n                            inverse=true);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:09.597\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :138.2824068069458 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region-1","page":"Hydro","title":"Cylindrical Region","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Create-projections-of-the-full-box:-2","page":"Hydro","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Hydro","title":"Cylindrical Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region:-Cutout-the-data-assigned-to-the-object-gas-1","page":"Hydro","title":"Cylindrical Region: Cutout the data assigned to the object gas","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"Select the ranges of the cylinder in the unit \"kpc\", relative to the given center [13., 24., 24.]. The height refers to both z-directions from the plane.","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion(  gas, :cylinder,\n                            radius=3.,\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[13., :bc, :bc]); # direction=:z, by default","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:24.715\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :9.945767402648926 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region:-Projections-of-the-sub-region.-1","page":"Hydro","title":"Cylindrical Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\n\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\n\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region:-Projections-of-the-sub-region-rekated-ti-a-given-data-center:-1","page":"Hydro","title":"Cylindrical Region: Projections of the sub-region rekated ti a given data center:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, direction=:z, center=[13., 24.,24.], range_unit=:kpc, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, direction=:y, center=[13., 24.,24.], range_unit=:kpc, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, direction=:x, center=[13., 24.,24.], range_unit=:kpc, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#The-ranges-of-the-plots-are-now-adapted-to-the-given-data-center:-1","page":"Hydro","title":"The ranges of the plots are now adapted to the given data center:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta), 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\n\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\n\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Hydro","title":"Cylindrical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion(  gas, :cylinder,\n                            radius=3.,\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[13.,:bc,:bc],\n                            inverse=true); # direction=:z, by default","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:29.071\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :176.2107973098755 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, :Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Region-1","page":"Hydro","title":"Spherical Region","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Create-projections-of-the-full-box:-3","page":"Hydro","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Hydro","title":"Spherical Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Region:-Cutout-the-data-assigned-to-the-object-gas-1","page":"Hydro","title":"Spherical Region: Cutout the data assigned to the object gas","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"Select the radius of the sphere in the unit \"kpc\", relative to the given center [13., 24., 24.]:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion(  gas, :sphere,\n                            radius=10.,\n                            range_unit=:kpc,\n                            center=[13.,:bc,:bc]);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:42.261\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :57.03980731964111 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Region:-Projections-of-the-sub-region.-1","page":"Hydro","title":"Spherical Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Hydro","title":"Spherical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = subregion(  gas, :sphere,\n                            radius=10.,\n                            range_unit=:kpc,\n                            center=[13.,:bc,:bc],\n                            inverse=true);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:27:46.433\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :129.1167573928833 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Combined/Nested/Shell-Sub-Regions-1","page":"Hydro","title":"Combined/Nested/Shell Sub-Regions","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#The-sub-region-functions-can-be-used-in-any-combination-with-each-other!-(Combined-with-overlapping-or-nested-ranges)-1","page":"Hydro","title":"The sub-region functions can be used in any combination with each other! (Combined with overlapping or nested ranges)","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"One Example:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"comb_region = subregion(gas, :cuboid, xrange=[-8.,8.], yrange=[-8.,8.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc, verbose=false)\ncomb_region2 = subregion(comb_region, :sphere, radius=12., center=[40.,24.,24.], range_unit=:kpc, inverse=true, verbose=false)\ncomb_region3 = subregion(comb_region2, :sphere, radius=12., center=[8.,24.,24.], range_unit=:kpc, inverse=true, verbose=false);\ncomb_region4 = subregion(comb_region3, :sphere, radius=12., center=[24.,5.,24.], range_unit=:kpc, inverse=true, verbose=false);\ncomb_region5 = subregion(comb_region4, :sphere, radius=12., center=[24.,43.,24.], range_unit=:kpc, inverse=true, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Shell-1","page":"Hydro","title":"Cylindrical Shell","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Create-projections-of-the-full-box:-4","page":"Hydro","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:02\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Shell:-The-red-lines-show-the-shell-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Hydro","title":"Cylindrical Shell: The red lines show the shell that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Shell:-1","page":"Hydro","title":"Cylindrical Shell:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"Pass the height of the cylinder and the inner/outer radius of the shell in the unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = shellregion( gas, :cylinder,\n                            radius=[5., 10.],\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[:boxcenter]);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:28:03.834\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :53.790066719055176 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Cylindrical-Shell:-Get-the-data-outside-of-the-selected-shell-(inverse-selection):-1","page":"Hydro","title":"Cylindrical Shell: Get the data outside of the selected shell (inverse selection):","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = shellregion(gas, :cylinder,\n                            radius=[5., 10.],\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[:boxcenter],\n                            inverse=true);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:28:06.945\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :132.36649799346924 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Shell-1","page":"Hydro","title":"Spherical Shell","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#Create-projections-of-the-full-box:-5","page":"Hydro","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:02\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:02\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Shell:-The-red-lines-show-the-shell-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Hydro","title":"Spherical Shell: The red lines show the shell that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\",ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Shell:-1","page":"Hydro","title":"Spherical Shell:","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"Select the inner and outer radius of the spherical shell in unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = shellregion(gas, :sphere,\n                            radius=[5., 10.],\n                            range_unit=:kpc,\n                            center=[24.,24.,24.]);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:28:21.357\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :56.55305194854736 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Shell:-Projections-of-the-shell-region.-1","page":"Hydro","title":"Spherical Shell: Projections of the shell-region.","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#Spherical-Shell:-Get-the-data-outside-of-the-selected-shell-region-(inverse-selection):-1","page":"Hydro","title":"Spherical Shell: Get the data outside of the selected shell-region (inverse selection):","text":"","category":"section"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"gas_subregion = shellregion(gas, :sphere,\n                            radius=[5., 10.],\n                            range_unit=:kpc,\n                            center=[:boxcenter],\n                            inverse=true);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:28:25.267\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :129.60351276397705 MB\n-------------------------------------------------------","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, verbose=false);\nproj_x = projection(gas_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, verbose=false);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"03_hydro_Get_Subregions/#","page":"Hydro","title":"Hydro","text":"","category":"page"},{"location":"03_clumps_Get_Subregions/#.-Clumps:-Get-Sub-Regions-of-The-Loaded-Data-1","page":"Clumps","title":"3. Clumps: Get Sub-Regions of The Loaded Data","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#Load-the-Data-1","page":"Clumps","title":"Load the Data","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"using Mera, PyPlot\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\")\nclumps = getclumps(info);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:39:44.033\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get clump data: 2020-02-08T20:39:48.496\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region-1","page":"Clumps","title":"Cuboid Region","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#Create-scatter-plots-of-the-full-box:-1","page":"Clumps","title":"Create scatter plots of the full box:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Use the getvar function to extract the positions of the clumps relative to the box center. It returns a dictionary of arrays:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"positions = getvar(clumps, [:x, :y, :z], :kpc, center=[:boxcenter], center_unit=:kpc) # units=[:kpc, :kpc, :kpc]\nx, y, z = positions[:x], positions[:y], positions[:z]; # assign the three components of the dictionary to three arrays","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Alternatively, use the getposition function to extract the positions of the clumps. It returns a tuple of the three components:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z = getpositions(clumps, :kpc, center=[:boxcenter], center_unit=:kpc); # assign the three components of the tuple to three arrays","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Get the extent of the processed domain with respect to a given center. The returned tuple is useful declare the specific range of the plots.","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"rx, ry, rz = getextent(clumps, :kpc,  center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region:-The-red-lines-show-the-region-that-we-want-to-cut-out-as-a-sub-region-from-the-full-data:-1","page":"Clumps","title":"Cuboid Region: The red lines show the region that we want to cut-out as a sub-region from the full data:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\nsubplot(1,3,1)\nscatter(x,y)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region:-Cutout-the-data-assigned-to-the-object-clumps-1","page":"Clumps","title":"Cuboid Region: Cutout the data assigned to the object clumps","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Note: The selected regions can be given relative to a user given center or to the box corner [0., 0., 0.] by default. The user can choose between standard notation 0:1 or physical length-units, defined in e.g. info.scale :","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :cuboid,\n                                    xrange=[-4., 0.],\n                                    yrange=[-15. ,15.],\n                                    zrange=[-2. ,2.],\n                                    center=[:boxcenter],\n                                    range_unit=:kpc);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:40:04.755\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :29.52734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"The function subregion creates a new object with the same type as the object created by the function getclumps :","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"typeof(clumps_subregion)","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"ClumpDataType","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region:-Scatter-Plots-of-the-sub-region.-1","page":"Clumps","title":"Cuboid Region: Scatter-Plots of the sub-region.","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"The coordinates center is the center of the box by default:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # clump positions of the subregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter] ); # extent of the box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\nsubplot(1,3,1)\nscatter(x,y)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region:-Get-the-extent-of-the-subregion-data-ranges-1","page":"Clumps","title":"Cuboid Region: Get the extent of the subregion data ranges","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"rx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc, center=[:boxcenter]); # extent of the subregion","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\nsubplot(1,3,1)\nscatter(x,y)\nxlim(rx_sub)\nylim(ry_sub)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nxlim(rx_sub)\nylim(rz_sub)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nxlim(ry_sub)\nylim(rz_sub)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cuboid-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Clumps","title":"Cuboid Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :cuboid,\n                                    xrange=[-4., 0.],\n                                    yrange=[-15. ,15.],\n                                    zrange=[-2. ,2.],\n                                    center=[:boxcenter],\n                                    range_unit=:kpc,\n                                    inverse=true);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:40:36.521\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :33.65234375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]);\nrx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\nsubplot(1,3,1)\nscatter(x,y)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlim(rx_sub)\nylim(ry_sub)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx_sub)\nylim(rz_sub)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry_sub)\nylim(rz_sub)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Region-1","page":"Clumps","title":"Cylindrical Region","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Extract the the clump positions and the extent of the full box:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps  = getclumps(info);\nx, y, z = getpositions(clumps, :kpc, center=[:boxcenter]);\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T20:40:43.377\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Region:-The-red-lines-show-the-region-that-we-want-to-cut-out-as-a-sub-region-from-the-full-data:-1","page":"Clumps","title":"Cylindrical Region: The red lines show the region that we want to cut-out as a sub-region from the full data:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Region:-Cutout-the-data-assigned-to-the-object-clumps-1","page":"Clumps","title":"Cylindrical Region: Cutout the data assigned to the object clumps","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Select the ranges of the cylinder in the unit \"kpc\", relative to the given center [13., 24., 24.]. The height refers to both z-directions from the plane.","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :cylinder,\n                                radius=3.,\n                                height=2.,\n                                range_unit=:kpc,\n                                center=[(24. -11.), :bc, :bc]); # direction=:z, by default","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:40:50.168\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :5.24609375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Extract the the clump positions of the subregion and the extent of the full box:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter])\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Region:-Scatter-Plot-of-the-selected-data-range-with-respect-to-the-center-of-the-sub-region:-1","page":"Clumps","title":"Cylindrical Region: Scatter-Plot of the selected data range with respect to the center of the sub-region:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc,\n                            center=[ (24. -11.), :bc, :bc],\n                            center_unit=:kpc);\nrx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc,\n                                    center=[ (24. -11.), :bc, :bc],\n                                    center_unit=:kpc);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 3. .* sin.(theta), 3 .* cos.(theta), color=\"red\")\nxlim(rx_sub)\nylim(ry_sub)\nxlabel(\"kpc\")\nylabel(\"kpc\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nxlim(rx_sub)\nylim(rz_sub)\nxlabel(\"kpc\")\nylabel(\"kpc\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nxlim(ry_sub)\nylim(rz_sub)\nxlabel(\"kpc\")\nylabel(\"kpc\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Clumps","title":"Cylindrical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :cylinder,\n                            radius=3.,\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[ (24. -11.),:bc,:bc],\n                            inverse=true);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:41:13.553\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :57.93359375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]);\nrx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Region-1","page":"Clumps","title":"Spherical Region","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Extract the the clump positions and the extent of the full box:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps  = getclumps(info);\nx, y, z = getpositions(clumps, :kpc, center=[:boxcenter]);\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T20:41:17.127\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#The-red-lines-show-the-region-that-we-want-to-cut-out-as-a-sub-region-from-the-full-data:-1","page":"Clumps","title":"The red lines show the region that we want to cut-out as a sub-region from the full data:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"PyObject Text(871.9411764705884, 0.5, 'z [kpc]')","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Region:-Cutout-the-data-assigned-to-the-object-clumps-1","page":"Clumps","title":"Spherical Region: Cutout the data assigned to the object clumps","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Select the radius of the sphere in the unit \"kpc\", relative to the given center [13., 24., 24.]:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :sphere,\n                                     radius=10.,\n                                     range_unit=:kpc,\n                                     center=[ (24. -11.),:bc, :bc]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:41:21.728\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :28.68359375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # subregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]); # full box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Region:-Scatter-Plot-of-the-selected-data-range-with-respect-to-the-center-of-the-sub-region:-1","page":"Clumps","title":"Spherical Region: Scatter-Plot of the selected data range with respect to the center of the sub-region:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc,\n                            center=[ (24. -11.), :bc, :bc],\n                            center_unit=:kpc); # subregion\nrx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc,\n                            center=[(24. -11.), :bc, :bc],\n                            center_unit=:kpc); # subregion","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta), 10 .* cos.(theta), color=\"red\")\nxlim(rx_sub)\nylim(ry_sub)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta), 10 .* cos.(theta), color=\"red\")\nxlim(rx_sub)\nylim(rz_sub)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta), 10 .* cos.(theta), color=\"red\")\nxlim(ry_sub)\nylim(rz_sub)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Clumps","title":"Spherical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = subregion( clumps, :sphere,\n                                     radius=10.,\n                                     range_unit=:kpc,\n                                     center=[ (24. -11.),:bc,:bc],\n                                     inverse=true);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:41:43.641\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :34.49609375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]);\nrx_sub, ry_sub, rz_sub = getextent(clumps_subregion, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\n\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(ry)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"PyObject Text(871.9411764705884, 0.5, 'z [kpc]')","category":"page"},{"location":"03_clumps_Get_Subregions/#Combined/Nested/Shell-Sub-Regions-1","page":"Clumps","title":"Combined/Nested/Shell Sub-Regions","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#The-sub-region-functions-can-be-used-in-any-combination-with-each-other!-(Combined-with-overlapping-ranges-or-nested)-1","page":"Clumps","title":"The sub-region functions can be used in any combination with each other! (Combined with overlapping ranges or nested)","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Shell-1","page":"Clumps","title":"Cylindrical Shell","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Extract the the clump positions and the extent of the full box:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info);\nx, y, z = getpositions(clumps, :kpc, center=[:boxcenter]);\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T20:41:52.553\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#The-red-lines-show-the-shell-that-we-want-to-cut-out-as-a-sub-region-from-the-full-data:-1","page":"Clumps","title":"The red lines show the shell that we want to cut-out as a sub-region from the full data:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\",ls = \"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Shell:-1","page":"Clumps","title":"Cylindrical Shell:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Pass the height of the cylinder and the inner/outer radius of the shell in the unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = shellregion( clumps, :cylinder,\n                                         radius=[5.,10.],\n                                         height=2.,\n                                         range_unit=:kpc,\n                                         center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:42:00.413\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :18.55859375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # shellregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]); # full box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Cylindrical-Shell:-Get-the-data-outside-of-the-selected-shell-region-(inverse-selection):-1","page":"Clumps","title":"Cylindrical Shell: Get the data outside of the selected shell-region (inverse selection):","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = shellregion( clumps, :cylinder,\n                                         radius=[5.,10.],\n                                         height=2.,\n                                         range_unit=:kpc,\n                                         center=[:boxcenter],\n                                         inverse=true);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:42:10.055\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :44.62109375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # shellregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]); # full box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Shell-1","page":"Clumps","title":"Spherical Shell","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Extract the the clump positions and the extent of the full box:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps  = getclumps(info);\nx, y, z = getpositions(clumps, :kpc, center=[:boxcenter]);\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T20:42:14.641\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#The-red-lines-show-the-shell-that-we-want-to-cut-out-as-a-sub-region-from-the-full-data:-2","page":"Clumps","title":"The red lines show the shell that we want to cut-out as a sub-region from the full data:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Shell:-1","page":"Clumps","title":"Spherical Shell:","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"Select the inner and outer radius of the spherical shell in unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = shellregion( clumps, :sphere,\n                                radius=[5.,10.],\n                                range_unit=:kpc,\n                                center=[:boxcenter]);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:42:19.499\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :18.55859375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # shellregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter]); # full box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\",  ls=\"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#Spherical-Shell:-Get-the-data-outside-of-the-selected-shell-region-(inverse-selection):-1","page":"Clumps","title":"Spherical Shell: Get the data outside of the selected shell-region (inverse selection):","text":"","category":"section"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"clumps_subregion = shellregion( clumps, :sphere,\n                                radius=[5.,10.],\n                                range_unit=:kpc,\n                                center=[:boxcenter],\n                                inverse=true);","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T20:42:23.949\u001b \n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :44.62109375 KB\n-------------------------------------------------------","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"x, y, z    = getpositions(clumps_subregion, :kpc, center=[:boxcenter]); # shellregion\nrx, ry, rz = getextent(clumps, :kpc, center=[:boxcenter] ); # full box","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"figure(figsize=(15.5, 3.5))\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nscatter(x,y)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(ry)\nxlabel(\"x k[pc]\")\nylabel(\"y [kpc]\")\n\n\nsubplot(1,3,2)\nscatter(x,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(rx)\nylim(rz)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\n\n\nsubplot(1,3,3)\nscatter(y,z)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlim(ry)\nylim(rz)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\");","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"(Image: png)","category":"page"},{"location":"03_clumps_Get_Subregions/#","page":"Clumps","title":"Clumps","text":"","category":"page"},{"location":"05_multi_Masking_Filtering/#.-Mask/Select/Map/Filter/Metaprogramming...-1","page":"5-Mask/Filter/Meta","title":"5. Mask/Select/Map/Filter/Metaprogramming...","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Learn how to extract data from the data table with JuliaDB and Mera functions\nFilter the data table according to one or several conditions\nExtract data from a filtered data table and use it for further calculations\nExtend the data table with new columns/variables\nMask data with different methods and apply it to some functions","category":"page"},{"location":"05_multi_Masking_Filtering/#Load-The-Data-1","page":"5-Mask/Filter/Meta","title":"Load The Data","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");\ngas       = gethydro(info, lmax=8, smallr=1e-5);  \nparticles = getparticles(info)\nclumps    = getclumps(info);","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"\u001b [Mera]: 2020-02-08T20:56:19.834\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get hydro data: 2020-02-08T20:56:27.064\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6, 7) = (:rho, :vx, :vy, :vz, :p, :var6, :var7)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:02:07\u001b\n\n\nMemory used for data table :71.28007793426514 MB\n-------------------------------------------------------\n\n\u001b [Mera]: Get particle data: 2020-02-08T20:58:39.435\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(1, 2, 3, 4, 5) = (:vx, :vy, :vz, :mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nFound 5.089390e+05 particles\nMemory used for data table :34.947275161743164 MB\n-------------------------------------------------------\n\n\u001b [Mera]: Get clump data: 2020-02-08T20:58:41.769\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"05_multi_Masking_Filtering/#Select-From-Data-Table-1","page":"5-Mask/Filter/Meta","title":"Select From Data Table","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#Select-a-single-column/variable-1","page":"5-Mask/Filter/Meta","title":"Select a single column/variable","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#By-using-JuliaDB-or-Mera-functions-1","page":"5-Mask/Filter/Meta","title":"By using JuliaDB or Mera functions","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"using JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"The JuliaDB data table is stored in the data-field of any DataSetType. Extract an existing column (variable):","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"select(gas.data, :rho) # JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332-element Array{Float64,1}:\n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n ⋮                     \n 0.00010967104288285959\n 0.0001088040126114162\n 0.00010915603617815434\n 0.00010917096551347797\n 0.00012465438542871006\n 0.00011934527871880502\n 0.00011294656300014925\n 0.00011110068692986109\n 0.00010901341218606515\n 0.00010849404903183988\n 0.00010900588395976569\n 0.00010910219163333514","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Pass the entire DataSetType (here gas) to the Mera function getvar to extract the selected variable or derived quantity from the data table. Call getvar() to get a list of the predefined quantities.","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"getvar(gas, :rho) # MERA","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332-element Array{Float64,1}:\n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n ⋮                     \n 0.00010967104288285959\n 0.0001088040126114162\n 0.00010915603617815434\n 0.00010917096551347797\n 0.00012465438542871006\n 0.00011934527871880502\n 0.00011294656300014925\n 0.00011110068692986109\n 0.00010901341218606515\n 0.00010849404903183988\n 0.00010900588395976569\n 0.00010910219163333514","category":"page"},{"location":"05_multi_Masking_Filtering/#Select-several-columns-1","page":"5-Mask/Filter/Meta","title":"Select several columns","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"By selecting several columns a new JuliaDB databse is returned:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"select(gas.data, (:rho, :level)) #JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 849332 rows, 2 columns:\nrho           level\u001b\n──────────────────\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n1.0e-5       6\n⋮\n0.000108804  8\n0.000109156  8\n0.000109171  8\n0.000124654  8\n0.000119345  8\n0.000112947  8\n0.000111101  8\n0.000109013  8\n0.000108494  8\n0.000109006  8\n0.000109102  8","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"The getvar function returns a dictionary containing the extracted arrays:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"getvar(gas, [:rho, :level]) # MERA","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Dict{Any,Any} with 2 entries:\n  :level => [6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0  …  8.0, 8.0, 8.0…\n  :rho   => [1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.…","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Select one or more columns and get a tuple of vectors:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"vtuple = columns(gas.data, (:rho, :level)) # JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"(rho = [1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5, 1.0e-5  …  0.00010915603617815434, 0.00010917096551347797, 0.00012465438542871006, 0.00011934527871880502, 0.00011294656300014925, 0.00011110068692986109, 0.00010901341218606515, 0.00010849404903183988, 0.00010900588395976569, 0.00010910219163333514], level = [6, 6, 6, 6, 6, 6, 6, 6, 6, 6  …  8, 8, 8, 8, 8, 8, 8, 8, 8, 8])","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"propertynames(vtuple)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"(:rho, :level)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"vtuple.rho","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332-element Array{Float64,1}:\n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n 1.0e-5                \n ⋮                     \n 0.00010967104288285959\n 0.0001088040126114162\n 0.00010915603617815434\n 0.00010917096551347797\n 0.00012465438542871006\n 0.00011934527871880502\n 0.00011294656300014925\n 0.00011110068692986109\n 0.00010901341218606515\n 0.00010849404903183988\n 0.00010900588395976569\n 0.00010910219163333514","category":"page"},{"location":"05_multi_Masking_Filtering/#Filter-by-Condition-1","page":"5-Mask/Filter/Meta","title":"Filter by Condition","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#With-JuliaDB-(example-A)-1","page":"5-Mask/Filter/Meta","title":"With JuliaDB (example A)","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Get all the data corresponding to cells/rows with level=6. Here, the variable p is used as placeholder for rows. A new JuliaDB data table is returend:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"filtered_db = filter(p->p.level==6, gas.data ) # JuliaDB\n# see the reduced row number","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 240956 rows, 11 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#With-Macro-Expression-(example-A)-1","page":"5-Mask/Filter/Meta","title":"With Macro Expression (example A)","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"(see the documentation at: https://piever.github.io/JuliaDBMeta.jl/stable/ )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"using JuliaDBMeta","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"┌ Info: Precompiling JuliaDBMeta [2c06ca41-a429-545c-b8f0-5ca7dd64ba19]\n└ @ Base loading.jl:1273","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"filtered_db = @filter gas.data :level==6 # JuliaDBMeta","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 240956 rows, 11 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#With-JuliaDB-(example-B)-1","page":"5-Mask/Filter/Meta","title":"With JuliaDB (example B)","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Get all cells/rows with densities >= 3 Msol/pc^3. Since the data is given in code units, we need to convert from the given physical units:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"density = 3. / gas.scale.Msol_pc3\nfiltered_db = filter(p->p.rho>= density, gas.data ) # JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 210 rows, 11 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#With-Macro-Expression-(example-B)-1","page":"5-Mask/Filter/Meta","title":"With Macro Expression (example B)","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"density = 3. /gas.scale.Msol_pc3\nfiltered_db = @filter gas.data :rho>= density # JuliaDBMeta","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 210 rows, 11 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#Get-a-Quantity/Variable-from-The-Filtered-Data-Table-1","page":"5-Mask/Filter/Meta","title":"Get a Quantity/Variable from The Filtered Data Table","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Calculate the mass for each cell and the sum:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mass_tot = getvar(gas, :mass, :Msol) # the full data table\nsum(mass_tot)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"3.0968754148332745e10","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"The same calculation is possible for the filtered data base which has to be passed together with the original object, here: gas","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mass_filtered_tot = getvar(gas, :mass, :Msol, filtered_db=filtered_db) # the filtered data table\nsum(mass_filtered_tot)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"1.4862767967535206e10","category":"page"},{"location":"05_multi_Masking_Filtering/#Create-a-New-DataSetType-from-a-Filtered-Data-Table-1","page":"5-Mask/Filter/Meta","title":"Create a New DataSetType from a Filtered Data Table","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"A new DataSetType can be constructed for the filtered data table that can be passed to the functions.","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"density = 3. /gas.scale.Msol_pc3\nfiltered_db = @filter gas.data :rho >= density\ngas_new = construct_datatype(filtered_db, gas);","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"# Both are now of HydroDataType and include the same information about the simulation properties (besides the canged data table)\nprintln( typeof(gas) )\nprintln( typeof(gas_new) )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"HydroDataType\nHydroDataType","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mass_filtered_tot = getvar(gas_new, :mass, :Msol)\nsum(mass_filtered_tot)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"1.4862767967535206e10","category":"page"},{"location":"05_multi_Masking_Filtering/#Filter-by-Multiple-Conditions-1","page":"5-Mask/Filter/Meta","title":"Filter by Multiple Conditions","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#With-JuliaDB-1","page":"5-Mask/Filter/Meta","title":"With JuliaDB","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Get the mass of all cells/rows with densities >= 3 Msol/pc^3 that is within the disk radius of 3 kpc and 2 kpc from the plane:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"boxlen = info.boxlen\ncv = boxlen/2. # box-center\ndensity = 3. /gas.scale.Msol_pc3\nradius  = 3. /gas.scale.kpc\nheight  = 2. /gas.scale.kpc\n\n# filter cells/rows that contain rho greater equal density\nfiltered_db = filter(p->p.rho >= density, gas.data )\n\n# filter cells/rows lower equal the defined radius and height\n# (convert the cell number to a position according to its cellsize and relative to the box center)\nfiltered_db = filter(row-> sqrt( (row.cx * boxlen /2^row.level - cv)^2 + (row.cy * boxlen /2^row.level - cv)^2) <= radius &&\n                              abs(row.cz * boxlen /2^row.level - cv) <= height, filtered_db)\n\nvar_filtered = getvar(gas, :mass, filtered_db=filtered_db, unit=:Msol)\nsum(var_filtered) # [Msol]","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.750632450062189e9","category":"page"},{"location":"05_multi_Masking_Filtering/#Use-Pipeline-Macros-1","page":"5-Mask/Filter/Meta","title":"Use Pipeline Macros","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"boxlen = info.boxlen\ncv = boxlen/2.\ndensity = 3. /gas.scale.Msol_pc3\nradius  = 3. /gas.scale.kpc\nheight  = 2. /gas.scale.kpc\n\nfiltered_db = @apply gas.data begin\n     @where :rho >= density\n     @where sqrt( (:cx * boxlen/2^:level - cv)^2 + (:cy * boxlen/2^:level - cv)^2 ) <= radius\n     @where abs(:cz * boxlen/2^:level -cv) <= height\nend\n\nvar_filtered = getvar(gas, :mass, filtered_db=filtered_db, unit=:Msol)\nsum(var_filtered) # [Msol]","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.750632450062189e9","category":"page"},{"location":"05_multi_Masking_Filtering/#External-Functions-With-JuliaDB-1","page":"5-Mask/Filter/Meta","title":"External Functions With JuliaDB","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"boxlen = info.boxlen\nfunction r(x,y,level,boxlen)\n    return sqrt((x * boxlen /2^level - boxlen/2.)^2 + (y * boxlen /2^level - boxlen/2.)^2)\nend\n\nfunction h(z,level,boxlen)\n    return abs(z  * boxlen /2^level - boxlen/2.)\nend\n\n\ndensity = 3. /gas.scale.Msol_pc3\nradius  = 3. /gas.scale.kpc\nheight  = 2. /gas.scale.kpc\n\n\nfiltered_db = filter(row->  row.rho >= density &&\n                            r(row.cx,row.cy, row.level, boxlen) <= radius &&\n                            h(row.cz,row.level, boxlen) <= height,  gas.data)\n\n\nvar_filtered = getvar(gas, :mass, filtered_db=filtered_db, unit=:Msol)\nsum(var_filtered) # [Msol]","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.750632450062189e9","category":"page"},{"location":"05_multi_Masking_Filtering/#External-Functions-With-Macro-Expression-1","page":"5-Mask/Filter/Meta","title":"External Functions With Macro Expression","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"boxlen = info.boxlen\ncv = boxlen/2.\ndensity = 3. /gas.scale.Msol_pc3\nradius  = 3. /gas.scale.kpc\nheight  = 2. /gas.scale.kpc\n\nfunction p(val, level, boxlen)\n    cv = boxlen/2\n    return val * boxlen /2^level - cv\nend\n\nfiltered_db = @apply gas.data begin\n     @where :rho >= density\n     @where sqrt( p(:cx, :level, boxlen)^2 + p(:cy, :level, boxlen)^2  ) <= radius\n     @where abs( p(:cz, :level, boxlen) ) <= height\nend\n\nvar_filtered = getvar(gas, :mass, filtered_db=filtered_db, unit=:Msol)\nsum(var_filtered) # [Msol]","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.750632450062189e9","category":"page"},{"location":"05_multi_Masking_Filtering/#Compare-With-Predefined-Functions-1","page":"5-Mask/Filter/Meta","title":"Compare With Predefined Functions","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Compare the previous calculations with the predefined subregion function: The subregion function takes the intersected cells of the range borders into account (default):","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"density = 3. /gas.scale.Msol_pc3 # in code units\n\nsub_region = subregion(gas, :cylinder, radius=3., height=2., center=[:boxcenter], range_unit=:kpc, verbose=false ) # default: cell=true\nfiltered_db = @filter sub_region.data :rho >= density\n\nvar_filtered = getvar(gas, :mass, :Msol, filtered_db=filtered_db)\nsum(var_filtered) # [Msol]","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.9388306102361355e9","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"By setting the keyword cell=false, only the cell-centres within the defined region are taken into account (as in the calculations in the previous section).","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"density = 3. /gas.scale.Msol_pc3 # in code units\n\nsub_region = subregion(gas, :cylinder, radius=3., height=2., center=[:boxcenter], range_unit=:kpc, cell=false, verbose=false )\nfiltered_db = @filter sub_region.data :rho >= density\n\nvar_filtered = getvar(gas, :mass, :Msol, filtered_db=filtered_db)\nsum(var_filtered)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"2.750632450062189e9","category":"page"},{"location":"05_multi_Masking_Filtering/#Extend-the-Data-Table-1","page":"5-Mask/Filter/Meta","title":"Extend the Data Table","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Add costum columns/variables to the data that can be automatically processed in some functions: (note: to take advantage of the Mera unit management, store new data in code-units)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"# calculate the Mach number in each cell\nmach = getvar(gas, :mach);","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"# add the extracted Mach number (1dim-array) to the data in the object \"gas\"\n# the array has the same length and order (rows/cells) as in the data table\n# push a column at the end of the table:\n# transform(data-table, key => new-data)\ngas.data = transform(gas.data, :mach => mach) # JuliaDB","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 849332 rows, 12 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64\n12  mach     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"proj_z = projection(gas, :mach, xrange=[-8.,8.], yrange=[-8.,8.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc);","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"\u001b [Mera]: 2020-02-08T20:59:42.246\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.3333333 :: 0.6666667  \t==> 16.0 [kpc] :: 32.0 [kpc]\nymin::ymax: 0.3333333 :: 0.6666667  \t==> 16.0 [kpc] :: 32.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:mach, :sd)\n\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:07\u001b","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"using PyPlot\nimshow( ( permutedims(proj_z.maps[:mach]) ), origin=\"lower\", extent=proj_z.cextent)\ncolorbar();","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"(Image: png)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Remove the column :mach from the table:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"gas.data = select(gas.data, Not(:mach)) # select all columns, not :mach","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Table with 849332 rows, 11 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b \n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"05_multi_Masking_Filtering/#Masking-1","page":"5-Mask/Filter/Meta","title":"Masking","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Many functions in MERA provide the opportunity to use a mask on selected data without changing the content in the data table. Here we present several methods to prepare a mask and apply it to some functions. A created mask is an array of type: MaskType, which can be Array{Bool,1} or BitArray{1}. A masked cell/row corresponds to a false.","category":"page"},{"location":"05_multi_Masking_Filtering/#Version-1:-External-Function-1","page":"5-Mask/Filter/Meta","title":"Version 1: External Function","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Create an array which represents the cells with the selected condition by true. The function checks if the following requirement is true or false for each row/cell in the data table:","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"function ftest(value)\n    density = (4. / gas.scale.Msol_pc3)\n    if value < density\n        return true\n     else\n        return false\n    end\nend\n\nmask_v1 = map(row->ftest(row.rho), gas.data);\n\nprintln( length(mask_v1) )\nprintln( typeof(mask_v1) )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332\nArray{Bool,1}","category":"page"},{"location":"05_multi_Masking_Filtering/#Version-2:-Short-Syntax-1","page":"5-Mask/Filter/Meta","title":"Version 2: Short Syntax","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#Example-1-1","page":"5-Mask/Filter/Meta","title":"Example 1","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask_v2 = map(row->row.rho < 4. / gas.scale.Msol_pc3, gas.data);\n\nprintln( length(mask_v2) )\nprintln( typeof(mask_v2) )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332\nArray{Bool,1}","category":"page"},{"location":"05_multi_Masking_Filtering/#Example-2-1","page":"5-Mask/Filter/Meta","title":"Example 2","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask_v2b = getvar(gas, :rho, :Msol_pc3) .> 1. ;\n\nprintln( length(mask_v2b) )\nprintln( typeof(mask_v2b) )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332\nBitArray{1}","category":"page"},{"location":"05_multi_Masking_Filtering/#Version-3:-Longer-Syntax-1","page":"5-Mask/Filter/Meta","title":"Version 3: Longer Syntax","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"rho_array = select(gas.data, :rho);\nmask_v3 = rho_array .< 1. / gas.scale.Msol_pc3;\n\nprintln( length(mask_v3) )\nprintln( typeof(mask_v3) )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"849332\nBitArray{1}","category":"page"},{"location":"05_multi_Masking_Filtering/#Some-Functions-With-Masking-Functionality-1","page":"5-Mask/Filter/Meta","title":"Some Functions With Masking Functionality","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"The masked rows are not considered in the calculations (mask-element = false ).","category":"page"},{"location":"05_multi_Masking_Filtering/#Examples-1","page":"5-Mask/Filter/Meta","title":"Examples","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#Total-Mass-1","page":"5-Mask/Filter/Meta","title":"Total Mass","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.rho < 1. / gas.scale.Msol_pc3, gas.data);\nmtot_masked = msum(gas, :Msol, mask=mask)\nmtot        = msum(gas, :Msol)\nprintln()\nprintln( \"Gas Mtot masked: \", mtot_masked  , \" Msol\" )\nprintln( \"Gas Mtot:        \", mtot         , \" Msol\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Gas Mtot masked: 1.336918953133308e10 Msol\nGas Mtot:        3.0968754148332745e10 Msol","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.birth < 100. / particles.scale.Myr, particles.data);\nmtot_masked = msum(particles, :Msol, mask=mask)\nmtot        = msum(particles, :Msol)\nprintln()\nprintln( \"Particles Mtot masked: \", mtot_masked , \" Msol\" )\nprintln( \"Particles Mtot:        \", mtot        , \" Msol\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Particles Mtot masked: 1.4537556611888414e7 Msol\nParticles Mtot:        5.804426008528437e9 Msol","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.mass_cl < 1e6 / clumps.scale.Msol, clumps.data);\nmtot_masked = msum(clumps, :Msol, mask=mask)\nmtot        = msum(clumps, :Msol)\nprintln()\nprintln( \"Clumps Mtot masked:    \", mtot_masked , \" Msol\" )\nprintln( \"Clumps Mtot:           \", mtot        , \" Msol\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Clumps Mtot masked:    2.926390055686605e7 Msol\nClumps Mtot:           1.3743280681841677e10 Msol","category":"page"},{"location":"05_multi_Masking_Filtering/#Center-Of-Mass-1","page":"5-Mask/Filter/Meta","title":"Center-Of-Mass","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.rho < 100. / gas.scale.nH, gas.data);\ncom_gas_masked = center_of_mass(gas, :kpc, mask=mask)\ncom_gas        = center_of_mass(gas, :kpc)\nprintln()\nprintln( \"Gas COM masked: \", com_gas_masked , \" kpc\" )\nprintln( \"Gas COM:        \", com_gas        , \" kpc\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Gas COM masked: (23.632781376611646, 24.017935187730938, 24.078280687627124) kpc\nGas COM:        (23.47221401632259, 23.93931869865653, 24.08483637116779) kpc","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.birth < 100. / particles.scale.Myr, particles.data);\ncom_particles_masked = center_of_mass(particles, :kpc, mask=mask)\ncom_particles        = center_of_mass(particles, :kpc)\nprintln()\nprintln( \"Particles COM masked: \", com_particles_masked , \" kpc\" )\nprintln( \"Particles COM:        \", com_particles        , \" kpc\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Particles COM masked: (22.766374936557934, 24.817294529838456, 24.020065595650212) kpc\nParticles COM:        (22.891354761211332, 24.174147282680273, 24.003205056545575) kpc","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"# calculate joint center-of-mass from gas and particles\nmask1 = map(row->row.rho < 100. / gas.scale.nH, gas.data); # mask for the hydro data\nmask2 = map(row->row.birth < 100.  / particles.scale.Myr, particles.data); # mask for the particle data\n\nprintln( \"Joint COM (Gas + Particles) masked: \", center_of_mass([gas,particles], :kpc, mask=[mask1, mask2]) , \" kpc\" )\nprintln( \"Joint COM (Gas + Particles):        \", center_of_mass([gas,particles], :kpc) , \" kpc\" )","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Joint COM (Gas + Particles) masked: (23.632014753139174, 24.01864248583754, 24.078229177095928) kpc\nJoint COM (Gas + Particles):        (23.380528865533876, 23.976384982693947, 24.07195135758772) kpc","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.mass_cl < 1e6 / clumps.scale.Msol, clumps.data);\ncom_clumps_masked = center_of_mass(clumps, mask=mask)\ncom_clumps        = center_of_mass(clumps)\nprintln()\nprintln( \"Clumps COM masked:\", com_clumps_masked .* clumps.scale.kpc, \" kpc\" )\nprintln( \"Clumps COM:       \", com_clumps        .* clumps.scale.kpc, \" kpc\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Clumps COM masked:(22.979676622296815, 23.22447986984898, 24.11056806473746) kpc\nClumps COM:       (23.135765457064576, 23.741712325649264, 24.0050127185862) kpc","category":"page"},{"location":"05_multi_Masking_Filtering/#Bulk-Velocity-1","page":"5-Mask/Filter/Meta","title":"Bulk-Velocity","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.rho < 100. / gas.scale.nH, gas.data);\nbv_gas_masked = bulk_velocity(gas, :km_s, mask=mask)\nbv_gas        = bulk_velocity(gas, :km_s)  \nprintln()\nprintln( \"Gas bulk velocity masked: \", bv_gas_masked , \" km/s\" )\nprintln( \"Gas bulk velocity:        \", bv_gas        , \" km/s\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Gas bulk velocity masked: (-0.046336703401138456, -6.60993479840688, -1.000280146674773) km/s\nGas bulk velocity:        (-1.1999253584798182, -10.678485153330122, -0.44038538452508785) km/s","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"mask = map(row->row.birth < 100. / particles.scale.Myr, particles.data);\nbv_particles_masked = bulk_velocity(particles, :km_s, mask=mask)\nbv_particles        = bulk_velocity(particles, :km_s)\nprintln()\nprintln( \"Particles bulk velocity masked: \", bv_particles_masked , \" km/s\" )\nprintln( \"Particles bulk velocity:        \", bv_particles        , \" km/s\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Particles bulk velocity masked: (-27.702254113836513, -7.532075727552787, -1.3273993940211153) km/s\nParticles bulk velocity:        (-11.623422700314535, -18.440572802490234, -0.3291927731417528) km/s","category":"page"},{"location":"05_multi_Masking_Filtering/#Weighted-Statistics-1","page":"5-Mask/Filter/Meta","title":"Weighted Statistics","text":"","category":"section"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"(It is also possible to use the mask within the getvar function)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"maskgas   = map(row->row.rho < 100. / gas.scale.nH, gas.data);\nmaskpart  = map(row->row.birth < 100.  / particles.scale.Myr, particles.data);\nmaskclump = map(row->row.mass_cl < 1e7 / clumps.scale.Msol, clumps.data);\n\nstats_gas_masked       = wstat( getvar(gas,       :vx,     :km_s), weight=getvar(gas,       :mass  ),  mask=maskgas);\nstats_particles_masked = wstat( getvar(particles, :vx,     :km_s), weight=getvar(particles, :mass   ), mask=maskpart);\nstats_clumps_masked    = wstat( getvar(clumps,    :peak_x, :kpc ), weight=getvar(clumps,    :mass_cl), mask=maskclump)  ;\n\nprintln( \"Gas        <vx>_cells masked      : \",  stats_gas_masked.mean,       \" km/s (mass weighted)\" )\nprintln( \"Particles  <vx>_particles masked  : \",  stats_particles_masked.mean, \" km/s (mass weighted)\" )\nprintln( \"Clumps <peak_x>_clumps masked     : \",  stats_clumps_masked.mean,    \" kpc  (mass weighted)\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Gas        <vx>_cells masked      : -0.04633670340114798 km/s (mass weighted)\nParticles  <vx>_particles masked  : -27.702254113836517 km/s (mass weighted)\nClumps <peak_x>_clumps masked     : 22.907689025275953 kpc  (mass weighted)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"stats_gas       = wstat( getvar(gas,       :vx,     :km_s), weight=getvar(gas,       :mass  ));\nstats_particles = wstat( getvar(particles, :vx,     :km_s), weight=getvar(particles, :mass   ));\nstats_clumps    = wstat( getvar(clumps,    :peak_x, :kpc ), weight=getvar(clumps,    :mass_cl))  ;\n\nprintln( \"Gas        <vx>_allcells     : \",  stats_gas.mean,       \" km/s (mass weighted)\" )\nprintln( \"Particles  <vx>_allparticles : \",  stats_particles.mean, \" km/s (mass weighted)\" )\nprintln( \"Clumps <peak_x>_allclumps    : \",  stats_clumps.mean,    \" kpc  (mass weighted)\" )\nprintln()","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"Gas        <vx>_allcells     : -1.199925358479736 km/s (mass weighted)\nParticles  <vx>_allparticles : -11.623422700314544 km/s (mass weighted)\nClumps <peak_x>_allclumps    : 23.13576545706458 kpc  (mass weighted)","category":"page"},{"location":"05_multi_Masking_Filtering/#","page":"5-Mask/Filter/Meta","title":"5-Mask/Filter/Meta","text":"","category":"page"},{"location":"01_clumps_First_Inspection/#.-Clumps:-First-Data-Inspection-1","page":"Clumps","title":"1. Clumps: First Data Inspection","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#Simulation-Overview-1","page":"Clumps","title":"Simulation Overview","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-12T20:41:16.814\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"A short overview of the loaded clumps properties is printed:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"existence of clumps files\nthe variable names from the header of the clump files","category":"page"},{"location":"01_clumps_First_Inspection/#Load-Clump-Data-1","page":"Clumps","title":"Load Clump Data","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Read the Clumps data from all files of the full box with all existing variables. MERA checks the first line of a clump file to find the column names. The identified names give the number of existing columns.","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info);","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-12T20:41:23.656\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"The memory consumption of the data table is printed at the end. We provide a function which gives the possibility to print the used memory of any object:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"usedmemory(clumps);","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Memory used: 331.672 KB","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"The assigned object is now of type: ClumpsDataType:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"typeof(clumps)","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"ClumpDataType","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"It is a sub-type of ContainMassDataSetType","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"supertype( ContainMassDataSetType )","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"DataSetType","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"ContainMassDataSetType is a sub-type of to the super-type DataSetType","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"supertype( ClumpDataType )","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"ContainMassDataSetType","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"The data is stored as a JuliaDB table and the selected clump variables and parameters are assigned to fields:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"viewfields(clumps)","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"\u001b data ==> JuliaDB table: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\u001b\n\n\u001b info ==> subfields: (:output, :path, :fnames, :simcode, :mtime, :ctime, :ncpu, :ndim, :levelmin, :levelmax, :boxlen, :time, :aexp, :H0, :omega_m, :omega_l, :omega_k, :omega_b, :unit_l, :unit_d, :unit_m, :unit_v, :unit_t, :gamma, :hydro, :nvarh, :nvarp, :variable_list, :gravity_variable_list, :particles_variable_list, :clumps_variable_list, :sinks_variable_list, :descriptor, :amr, :gravity, :particles, :clumps, :sinks, :rt, :namelist, :namelist_content, :headerfile, :makefile, :files_content, :timerfile, :compilationfile, :patchfile, :Narraysize, :scale, :grid_info, :part_info, :compilation, :constants)\u001b\n\nboxlen\t= 48.0\nranges\t= [0.0, 1.0, 0.0, 1.0, 0.0, 1.0]\nselected_clumpvars\t= Symbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\n\n\u001b scale ==> subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)\u001b","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"For convenience, all the fields from the info-object above (InfoType) are now also accessible from the object with \"clumps.info\" and the scaling relations from code to cgs units in \"clumps.scale\". The box length, the selected ranges and number of the clump variables are also retained.","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Print the fields of an object (composite type) in a simple list:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"propertynames(clumps)","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"(:data, :info, :boxlen, :ranges, :selected_clumpvars, :used_descriptors, :scale)","category":"page"},{"location":"01_clumps_First_Inspection/#Overview-of-Clump-Data-1","page":"Clumps","title":"Overview of Clump Data","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Get some overview of the data associated with the object clumps. The calculated information can be accessed from the object data_overview (here) in code units for further calculations:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"data_overview = dataoverview(clumps)","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Table with 2 rows, 13 columns:\nColumns:\n #   \u001b  colname    \u001b  type\u001b\n───────────────────\n1   extrema    Any\n2   index      Any\n3   lev        Any\n4   parent     Any\n5   ncell      Any\n6   peak_x     Any\n7   peak_y     Any\n8   peak_z     Any\n9   rho-       Any\n10  rho+       Any\n11  rho_av     Any\n12  mass_cl    Any\n13  relevance  Any","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"If the number of columns is relatively long, the table is typically represented by an overview. To access certain columns, use the select function. The representation \":mass_cl\" is called a quoted Symbol (see in Julia documentation):","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"using JuliaDB","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"select(data_overview, (:extrema, :index, :peak_x, :peak_y, :peak_z, :mass_cl) )","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Table with 2 rows, 6 columns:\nextrema  index   peak_x   peak_y   peak_z   mass_cl\n──────────────────────────────────────────────────────\n\"min\"    4.0     10.292   9.93604  22.1294  0.00031216\n\"max\"    2147.0  38.1738  35.7056  25.4634  0.860755","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Get an array from the column \":masscl\" in `dataoverviewand scale it to the unitsMsol`. The order of the calculated data is consistent with the table above:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"select(data_overview, :mass_cl) * info.scale.Msol","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"2-element Array{Float64,1}:\n 312073.3187055649       \n      8.605166312657958e8","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Or simply convert the :mass_cl data in the table to Msol units by manipulating the column:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"data_overview = transform(data_overview, :mass_cl => :mass_cl => value->value * info.scale.Msol);","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"select(data_overview, (:extrema, :index, :peak_x, :peak_y, :peak_z, :mass_cl) )","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Table with 2 rows, 6 columns:\nextrema  index   peak_x   peak_y   peak_z   mass_cl\n─────────────────────────────────────────────────────\n\"min\"    4.0     10.292   9.93604  22.1294  3.12073e5\n\"max\"    2147.0  38.1738  35.7056  25.4634  8.60517e8","category":"page"},{"location":"01_clumps_First_Inspection/#Data-Inspection-1","page":"Clumps","title":"Data Inspection","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"The data is associated with the field clumps.data as a JuliaDB table (code units). Each row corresponds to a clump and each column to a property which makes it easy to find, filter, map, aggregate, group the data, etc. More information can be found in the MERA tutorials or in: JuliaDB API Reference","category":"page"},{"location":"01_clumps_First_Inspection/#Table-View-1","page":"Clumps","title":"Table View","text":"","category":"section"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"The positions peakx, peaky,peak_z are the positions and should not be modified.","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"clumps.data","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Table with 644 rows, 12 columns:\nColumns:\n #   \u001b  colname    \u001b  type\u001b \n──────────────────────\n1   index      Float64\n2   lev        Float64\n3   parent     Float64\n4   ncell      Float64\n5   peak_x     Float64\n6   peak_y     Float64\n7   peak_z     Float64\n8   rho-       Float64\n9   rho+       Float64\n10  rho_av     Float64\n11  mass_cl    Float64\n12  relevance  Float64","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"A more detailed view into the data:","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"select(clumps.data, (:index, :peak_x, :peak_y, :peak_z, :mass_cl) )","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"Table with 644 rows, 5 columns:\nindex   peak_x   peak_y   peak_z   mass_cl\n─────────────────────────────────────────────\n4.0     20.1094  11.5005  23.9604  0.0213767\n5.0     20.1592  11.5122  23.9253  0.0131504\n9.0     21.7852  17.855   23.814   0.00358253\n12.0    21.8232  17.8608  23.855   0.00509792\n13.0    21.8906  17.2837  23.5415  0.0319414\n18.0    21.7822  16.8823  23.7817  0.00848828\n19.0    21.75    16.8589  23.7993  0.00587003\n20.0    21.6006  17.5679  23.7935  0.0324672\n25.0    21.5801  17.6177  23.9341  0.0245806\n26.0    21.5859  17.5796  23.9165  0.0183601\n29.0    21.5625  17.5854  23.8726  0.0303356\n46.0    21.5215  17.6235  23.9458  0.343594\n⋮\n2115.0  27.7705  13.2788  23.8081  0.0340939\n2116.0  27.7617  13.3081  23.8081  0.0145199\n2117.0  27.7793  13.2993  23.6851  0.00855992\n2120.0  27.7559  13.1792  23.8638  0.00508007\n2125.0  27.7939  13.0298  23.9194  0.00128829\n2128.0  27.791   13.0649  23.9019  0.00183979\n2131.0  28.3037  12.8188  23.9487  0.00128627\n2132.0  28.626   12.8188  23.8755  0.00434\n2137.0  29.9736  15.0571  23.7202  0.00195464\n2140.0  27.1436  15.6401  23.9048  0.0160477\n2147.0  25.1953  9.93604  23.9897  0.0294943","category":"page"},{"location":"01_clumps_First_Inspection/#","page":"Clumps","title":"Clumps","text":"","category":"page"},{"location":"examples/ExportImportData/#Export/Import-Data-(ASCII/Binary)-1","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"This notebook presents several ways to export your data.","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Used libraries in this tutorial:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"DelimitedFiles, Serialization (comes with Julia)\nJuliaDB, FileIO, CSVFiles, JLD, CodecZlib, HDF5, Numpy, FITS, Matlap, GZip (needs to be installed)","category":"page"},{"location":"examples/ExportImportData/#Load-The-Data-1","page":"Export/Import Data (ASCII/Binary)","title":"Load The Data","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using Mera","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"info = getinfo(400, \"../../../testing/simulations/manu_sim_sf_L14\", verbose=false)\nhydro = gethydro(info, :rho, smallr=1e-5, lmax=10)\nparticles = getparticles(info, :mass);","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"\u001b[0m\u001b [Mera]: Get hydro data: 2020-02-29T17:54:15.397\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1,) = (:rho,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:02:55\u001b\n\n\nMemory used for data table :186.1558656692505 MB\n-------------------------------------------------------\n\n\u001b[0m\u001b [Mera]: Get particle data: 2020-02-29T17:57:14.49\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(4,) = (:mass,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\n\n\n\u001b Reading data...100%|████████████████████████████████████| Time: 0:00:03\u001b\n\n\nFound 5.089390e+05 particles\nMemory used for data table :19.4152889251709 MB\n-------------------------------------------------------","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"println(\"Cells: \", length(hydro.data))\nprintln(\"Particles: \", length(particles.data))","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Cells: 4879946\nParticles: 508939","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Define a function to preview the first lines of the created ASCII files:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"function viewheader(filename, lines)\n    open(filename) do f\n        line = 1\n        while line<=lines\n            x = readline(f)\n            println(x)\n            line += 1\n        end\n    end\nend","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader (generic function with 1 method)","category":"page"},{"location":"examples/ExportImportData/#Collect-The-Data-For-Export-1","page":"Export/Import Data (ASCII/Binary)","title":"Collect The Data For Export","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"# Get the cell and particle positions relative to the box-center\n# Choose the relevant units\n# The function getvar returns a dictionary containing a 1d-array for each quantity\nhvals = getvar(hydro, [:x,:y,:z,:cellsize,:rho], [:kpc,:kpc,:kpc,:kpc,:g_cm3], center=[:boxcenter]);\npvals = getvar(hydro, [:x,:y,:z,:mass], [:kpc,:kpc,:kpc,:Msol], center=[:boxcenter]);","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hvals","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Dict{Any,Any} with 5 entries:\n  :cellsize => [0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75  …  …\n  :y        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…\n  :rho      => [6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28…\n  :z        => [-23.25, -22.5, -21.75, -21.0, -20.25, -19.5, -18.75, -18.0, -17…\n  :x        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"pvals","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Dict{Any,Any} with 4 entries:\n  :y    => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23…\n  :z    => [-23.25, -22.5, -21.75, -21.0, -20.25, -19.5, -18.75, -18.0, -17.25,…\n  :mass => [4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217…\n  :x    => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23…","category":"page"},{"location":"examples/ExportImportData/#ASCII:-DelimitedFiles-Library-1","page":"Export/Import Data (ASCII/Binary)","title":"ASCII: DelimitedFiles Library","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using DelimitedFiles","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Save into an ASCII file with no header, comma separated:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"open(\"simulation_hydro.csv\", \"w\") do io\n    writedlm(io, [hvals[:x] hvals[:y] hvals[:z] hvals[:cellsize] hvals[:rho]], \",\")\nend","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Check the first lines in the file:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader(\"simulation_hydro.csv\", 5)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"-23.25000000001507,-23.25000000001507,-23.25000000001507,0.7500000000004861,6.768382184513761e-28\n-23.25000000001507,-23.25000000001507,-22.500000000014584,0.7500000000004861,6.768382184513761e-28\n-23.25000000001507,-23.25000000001507,-21.750000000014097,0.7500000000004861,6.768382184513761e-28\n-23.25000000001507,-23.25000000001507,-21.00000000001361,0.7500000000004861,6.768382184513761e-28\n-23.25000000001507,-23.25000000001507,-20.250000000013124,0.7500000000004861,6.768382184513761e-28","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Use a different syntax; save into file with header and tab-separated values:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"header = [\"x/kpc\" \"y/kpc\" \"z/kpc\" \"cellsize/kpc\" \"rho/g_cm3\"]\nvalsrray = [hvals[:x] hvals[:y] hvals[:z] hvals[:cellsize] hvals[:rho]] # Array with the columns\nwritedlm(\"simulation_hydro.dat\", [header ; valsrray], \"\\t\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader(\"simulation_hydro.dat\", 5)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"x/kpc\ty/kpc\tz/kpc\tcellsize/kpc\trho/g_cm3\n-23.25000000001507\t-23.25000000001507\t-23.25000000001507\t0.7500000000004861\t6.768382184513761e-28\n-23.25000000001507\t-23.25000000001507\t-22.500000000014584\t0.7500000000004861\t6.768382184513761e-28\n-23.25000000001507\t-23.25000000001507\t-21.750000000014097\t0.7500000000004861\t6.768382184513761e-28\n-23.25000000001507\t-23.25000000001507\t-21.00000000001361\t0.7500000000004861\t6.768382184513761e-28","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Write the particles data into an ASCII file with header:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"header = [\"x/kpc\" \"y/kpc\" \"z/kpc\" \"mass/Msol\"]\nvalsrray = [pvals[:x] pvals[:y] pvals[:z] pvals[:mass]]\nwritedlm(\"simulation_particles.dat\", [header ; valsrray], \"\\t\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader(\"simulation_particles.dat\", 5)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"x/kpc\ty/kpc\tz/kpc\tmass/Msol\n-23.25000000001507\t-23.25000000001507\t-23.25000000001507\t4217.583427040147\n-23.25000000001507\t-23.25000000001507\t-22.500000000014584\t4217.583427040147\n-23.25000000001507\t-23.25000000001507\t-21.750000000014097\t4217.583427040147\n-23.25000000001507\t-23.25000000001507\t-21.00000000001361\t4217.583427040147","category":"page"},{"location":"examples/ExportImportData/#ASCII:-Save-JuliaDB-Database-into-a-CSV-File-with-FileIO-1","page":"Export/Import Data (ASCII/Binary)","title":"ASCII: Save JuliaDB Database into a CSV-File with FileIO","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using FileIO","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"See for documentation https://github.com/JuliaIO/FileIO.jl/tree/master/docs","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"The simulation data is stored in a JuliadB database:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"particles.data","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Table with 508939 rows, 6 columns:\n\u001b level  \u001b  x           \u001b  y        \u001b  z        \u001b  id      \u001b mass\n───────────────────────────────────────────────────────\n6      0.00462947  22.3885  24.571   327957  1.13606e-5\n6      0.109066    22.3782  21.5844  116193  1.13606e-5\n6      0.238211    28.7537  24.8191  194252  1.13606e-5\n6      0.271366    22.7512  31.5681  130805  1.13606e-5\n6      0.312574    16.2385  23.7591  162174  1.13606e-5\n6      0.314957    28.2084  30.966   320052  1.13606e-5\n6      0.328337    4.59858  23.5001  292889  1.13606e-5\n6      0.420712    27.6688  26.5735  102940  1.13606e-5\n6      0.509144    33.1737  23.9789  183902  1.13606e-5\n6      0.565516    25.9409  26.0579  342278  1.13606e-5\n6      0.587289    9.60231  23.8477  280020  1.13606e-5\n6      0.592878    25.5519  21.3079  64182   1.13606e-5\n⋮\n14     37.6271     25.857   23.8833  437164  1.13606e-5\n14     37.6299     25.8403  23.9383  421177  1.13606e-5\n14     37.6301     25.8502  23.9361  478941  1.13606e-5\n14     37.6326     25.8544  23.9383  428429  1.13606e-5\n14     37.6528     25.8898  23.9928  467148  1.13606e-5\n14     37.6643     25.9061  23.9945  496129  1.13606e-5\n14     37.6813     25.8743  23.9789  435636  1.13606e-5\n14     37.7207     25.8623  23.8775  476398  1.13606e-5\n14     38.173      25.8862  23.7978  347919  1.13606e-5\n14     38.1738     25.8914  23.7979  403094  1.13606e-5\n14     38.1739     25.8905  23.7992  381503  1.13606e-5","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"FileIO.save(\"database_partilces.csv\", particles.data)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"┌ Info: Precompiling CSVFiles [5d742f6a-9f54-50ce-8119-2520741973ca]\n└ @ Base loading.jl:1273","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader(\"database_partilces.csv\", 5)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"\"level\",\"x\",\"y\",\"z\",\"id\",\"mass\"\n6,0.004629472789625229,22.388543919075275,24.571021484979347,327957,1.1360607549574087e-5\n6,0.1090659052277639,22.3782196217294,21.58442789512976,116193,1.1360607549574087e-5\n6,0.2382109772356709,28.753723953405462,24.81911909925676,194252,1.1360607549574087e-5\n6,0.271365638325332,22.751224267806695,31.568145104287826,130805,1.1360607549574087e-5","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Export selected variables from the datatable:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using JuliaDB","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"See for documentation https://juliacomputing.github.io/JuliaDB.jl/latest/","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"FileIO.save(\"database_partilces.csv\", select(particles.data, (:x,:y,:mass)) )","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"viewheader(\"database_partilces.csv\", 5)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"\"x\",\"y\",\"mass\"\n0.004629472789625229,22.388543919075275,1.1360607549574087e-5\n0.1090659052277639,22.3782196217294,1.1360607549574087e-5\n0.2382109772356709,28.753723953405462,1.1360607549574087e-5\n0.271365638325332,22.751224267806695,1.1360607549574087e-5","category":"page"},{"location":"examples/ExportImportData/#Binary:-Save-JuliaDB-Database-into-a-Binary-Format-1","page":"Export/Import Data (ASCII/Binary)","title":"Binary: Save JuliaDB Database into a Binary Format","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"JuliaDB.save(hydro.data, \"database_hydro.jdb\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Table with 4879946 rows, 5 columns:\n\u001b level  \u001b  cx   \u001b  cy   \u001b  cz   \u001b rho\n─────────────────────────────────\n6      1    1    1    1.0e-5\n6      1    1    2    1.0e-5\n6      1    1    3    1.0e-5\n6      1    1    4    1.0e-5\n6      1    1    5    1.0e-5\n6      1    1    6    1.0e-5\n6      1    1    7    1.0e-5\n6      1    1    8    1.0e-5\n6      1    1    9    1.0e-5\n6      1    1    10   1.0e-5\n6      1    1    11   1.0e-5\n6      1    1    12   1.0e-5\n⋮\n10     826  554  512  0.000561671\n10     826  554  513  0.000634561\n10     826  554  514  0.000585903\n10     826  555  509  0.000368259\n10     826  555  510  0.000381535\n10     826  555  511  0.000401867\n10     826  555  512  0.000413433\n10     826  556  509  0.000353701\n10     826  556  510  0.000360669\n10     826  556  511  0.000380094\n10     826  556  512  0.000386327","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hdata = JuliaDB.load(\"database_hydro.jdb\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Table with 4879946 rows, 5 columns:\n\u001b level  \u001b  cx   \u001b  cy   \u001b  cz   \u001b rho\n─────────────────────────────────\n6      1    1    1    1.0e-5\n6      1    1    2    1.0e-5\n6      1    1    3    1.0e-5\n6      1    1    4    1.0e-5\n6      1    1    5    1.0e-5\n6      1    1    6    1.0e-5\n6      1    1    7    1.0e-5\n6      1    1    8    1.0e-5\n6      1    1    9    1.0e-5\n6      1    1    10   1.0e-5\n6      1    1    11   1.0e-5\n6      1    1    12   1.0e-5\n⋮\n10     826  554  512  0.000561671\n10     826  554  513  0.000634561\n10     826  554  514  0.000585903\n10     826  555  509  0.000368259\n10     826  555  510  0.000381535\n10     826  555  511  0.000401867\n10     826  555  512  0.000413433\n10     826  556  509  0.000353701\n10     826  556  510  0.000360669\n10     826  556  511  0.000380094\n10     826  556  512  0.000386327","category":"page"},{"location":"examples/ExportImportData/#Binary:-Save-Multiple-Data-into-a-JLD-File-1","page":"Export/Import Data (ASCII/Binary)","title":"Binary: Save Multiple Data into a JLD File","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"See for documentation: https://github.com/JuliaIO/JLD.jl","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using JLD","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"jldopen(\"mydata.jld\", \"w\") do file\n    write(file, \"hydro\", hvals )\n    write(file, \"particles\", pvals )\nend","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Open file for read and get an overview of the stored dataset:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"file = jldopen(\"mydata.jld\",\"r\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Julia data file version 0.1.3: mydata.jld","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"names(file)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"2-element Array{String,1}:\n \"hydro\"    \n \"particles\"","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata = read(file, \"hydro\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Dict{Any,Any} with 5 entries:\n  :x        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…\n  :y        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…\n  :rho      => [6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28…\n  :z        => [-23.25, -22.5, -21.75, -21.0, -20.25, -19.5, -18.75, -18.0, -17…\n  :cellsize => [0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75  …  …","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"particledata = read(file, \"particles\")","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Dict{Any,Any} with 4 entries:\n  :y    => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23…\n  :z    => [-23.25, -22.5, -21.75, -21.0, -20.25, -19.5, -18.75, -18.0, -17.25,…\n  :mass => [4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217.58, 4217…\n  :x    => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23…","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Compare stored with original data:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata == hvals","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"true","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"particledata == pvals","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"true","category":"page"},{"location":"examples/ExportImportData/#Binary:-Compress-Data-into-a-gz-File-1","page":"Export/Import Data (ASCII/Binary)","title":"Binary: Compress Data into a gz-File","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"using CodecZlib, Serialization","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"See for documentation: https://github.com/JuliaIO/CodecZlib.jl","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"fo= GzipCompressorStream( open(\"sample-data.jls.gz\", \"w\") ); serialize(fo, hvals); close(fo)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata1 = deserialize( GzipDecompressorStream( open(\"sample-data.jls.gz\", \"r\") ) )","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Dict{Any,Any} with 5 entries:\n  :x        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…\n  :y        => [-23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25, -23.25,…\n  :rho      => [6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28, 6.76838e-28…\n  :z        => [-23.25, -22.5, -21.75, -21.0, -20.25, -19.5, -18.75, -18.0, -17…\n  :cellsize => [0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75, 0.75  …  …","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata1 == hvals","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"true","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Prepare variable-array:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"varsarray = [hvals[:x] hvals[:y] hvals[:z] hvals[:cellsize] hvals[:rho]]","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"4879946×5 Array{Float64,2}:\n -23.25    -23.25     -23.25      0.75      6.76838e-28\n -23.25    -23.25     -22.5       0.75      6.76838e-28\n -23.25    -23.25     -21.75      0.75      6.76838e-28\n -23.25    -23.25     -21.0       0.75      6.76838e-28\n -23.25    -23.25     -20.25      0.75      6.76838e-28\n -23.25    -23.25     -19.5       0.75      6.76838e-28\n -23.25    -23.25     -18.75      0.75      6.76838e-28\n -23.25    -23.25     -18.0       0.75      6.76838e-28\n -23.25    -23.25     -17.25      0.75      6.76838e-28\n -23.25    -23.25     -16.5       0.75      6.76838e-28\n -23.25    -23.25     -15.75      0.75      6.76838e-28\n -23.25    -23.25     -15.0       0.75      6.76838e-28\n -23.25    -23.25     -14.25      0.75      6.76838e-28\n   ⋮                                                   \n  14.7188    1.96875   -0.046875  0.046875  3.59298e-26\n  14.7188    1.96875    0.0       0.046875  3.80161e-26\n  14.7188    1.96875    0.046875  0.046875  4.29495e-26\n  14.7188    1.96875    0.09375   0.046875  3.96562e-26\n  14.7188    2.01563   -0.140625  0.046875  2.49252e-26\n  14.7188    2.01563   -0.09375   0.046875  2.58237e-26\n  14.7188    2.01563   -0.046875  0.046875  2.71999e-26\n  14.7188    2.01563    0.0       0.046875  2.79827e-26\n  14.7188    2.0625    -0.140625  0.046875  2.39398e-26\n  14.7188    2.0625    -0.09375   0.046875  2.44115e-26\n  14.7188    2.0625    -0.046875  0.046875  2.57262e-26\n  14.7188    2.0625     0.0       0.046875  2.61481e-26","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"fo= GzipCompressorStream( open(\"sample-data2.jls.gz\", \"w\") ); serialize(fo, varsarray); close(fo)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Read the data again:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata2 = deserialize( GzipDecompressorStream( open(\"sample-data2.jls.gz\", \"r\") ) )","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"4879946×5 Array{Float64,2}:\n -23.25    -23.25     -23.25      0.75      6.76838e-28\n -23.25    -23.25     -22.5       0.75      6.76838e-28\n -23.25    -23.25     -21.75      0.75      6.76838e-28\n -23.25    -23.25     -21.0       0.75      6.76838e-28\n -23.25    -23.25     -20.25      0.75      6.76838e-28\n -23.25    -23.25     -19.5       0.75      6.76838e-28\n -23.25    -23.25     -18.75      0.75      6.76838e-28\n -23.25    -23.25     -18.0       0.75      6.76838e-28\n -23.25    -23.25     -17.25      0.75      6.76838e-28\n -23.25    -23.25     -16.5       0.75      6.76838e-28\n -23.25    -23.25     -15.75      0.75      6.76838e-28\n -23.25    -23.25     -15.0       0.75      6.76838e-28\n -23.25    -23.25     -14.25      0.75      6.76838e-28\n   ⋮                                                   \n  14.7188    1.96875   -0.046875  0.046875  3.59298e-26\n  14.7188    1.96875    0.0       0.046875  3.80161e-26\n  14.7188    1.96875    0.046875  0.046875  4.29495e-26\n  14.7188    1.96875    0.09375   0.046875  3.96562e-26\n  14.7188    2.01563   -0.140625  0.046875  2.49252e-26\n  14.7188    2.01563   -0.09375   0.046875  2.58237e-26\n  14.7188    2.01563   -0.046875  0.046875  2.71999e-26\n  14.7188    2.01563    0.0       0.046875  2.79827e-26\n  14.7188    2.0625    -0.140625  0.046875  2.39398e-26\n  14.7188    2.0625    -0.09375   0.046875  2.44115e-26\n  14.7188    2.0625    -0.046875  0.046875  2.57262e-26\n  14.7188    2.0625     0.0       0.046875  2.61481e-26","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Compare original with loaded data:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata2 == varsarray","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"true","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"Store array with header:","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"header = [\"x/kpc\" \"y/kpc\" \"z/kpc\" \"cellsize/kpc\" \"rho/g_cm3\"]\nfo= GzipCompressorStream( open(\"sample-data3.jls.gz\", \"w\") ); serialize(fo, [header ; varsarray]); close(fo)","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"hydrodata3 = deserialize( GzipDecompressorStream( open(\"sample-data3.jls.gz\", \"r\") ) )","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"4879947×5 Array{Any,2}:\n    \"x/kpc\"     \"y/kpc\"     \"z/kpc\"   \"cellsize/kpc\"   \"rho/g_cm3\"\n -23.25      -23.25      -23.25      0.75             6.76838e-28\n -23.25      -23.25      -22.5       0.75             6.76838e-28\n -23.25      -23.25      -21.75      0.75             6.76838e-28\n -23.25      -23.25      -21.0       0.75             6.76838e-28\n -23.25      -23.25      -20.25      0.75             6.76838e-28\n -23.25      -23.25      -19.5       0.75             6.76838e-28\n -23.25      -23.25      -18.75      0.75             6.76838e-28\n -23.25      -23.25      -18.0       0.75             6.76838e-28\n -23.25      -23.25      -17.25      0.75             6.76838e-28\n -23.25      -23.25      -16.5       0.75             6.76838e-28\n -23.25      -23.25      -15.75      0.75             6.76838e-28\n -23.25      -23.25      -15.0       0.75             6.76838e-28\n   ⋮                                                              \n  14.7188      1.96875    -0.046875  0.046875         3.59298e-26\n  14.7188      1.96875     0.0       0.046875         3.80161e-26\n  14.7188      1.96875     0.046875  0.046875         4.29495e-26\n  14.7188      1.96875     0.09375   0.046875         3.96562e-26\n  14.7188      2.01563    -0.140625  0.046875         2.49252e-26\n  14.7188      2.01563    -0.09375   0.046875         2.58237e-26\n  14.7188      2.01563    -0.046875  0.046875         2.71999e-26\n  14.7188      2.01563     0.0       0.046875         2.79827e-26\n  14.7188      2.0625     -0.140625  0.046875         2.39398e-26\n  14.7188      2.0625     -0.09375   0.046875         2.44115e-26\n  14.7188      2.0625     -0.046875  0.046875         2.57262e-26\n  14.7188      2.0625      0.0       0.046875         2.61481e-26","category":"page"},{"location":"examples/ExportImportData/#Other-File-Formats-1","page":"Export/Import Data (ASCII/Binary)","title":"Other File Formats","text":"","category":"section"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"HDF5 https://github.com/JuliaIO/HDF5.jl\nNumpy https://github.com/fhs/NPZ.jl\nFITS https://github.com/JuliaAstro/FITSIO.jl\nFITS https://github.com/emmt/EasyFITS.jl\nMatlab https://github.com/JuliaIO/MAT.jl\nGZip https://github.com/JuliaIO/GZip.jl","category":"page"},{"location":"examples/ExportImportData/#","page":"Export/Import Data (ASCII/Binary)","title":"Export/Import Data (ASCII/Binary)","text":"","category":"page"},{"location":"06_hydro_Projection/#.-Hydro:-Projections-1","page":"Hydro","title":"6. Hydro: Projections","text":"","category":"section"},{"location":"06_hydro_Projection/#Load-The-Data-1","page":"Hydro","title":"Load The Data","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");\ngas  = gethydro(info, lmax=10, smallr=1e-5);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"┌ Info: Precompiling Mera [02f895e8-fdb1-4346-8fe6-c721699f5126]\n└ @ Base loading.jl:1273\n\n\n\n*__   __ _______ ______   _______\n|  |_|  |       |    _ | |   _   |\n|       |    ___|   | || |  |_|  |\n|       |   |___|   |_||_|       |\n|       |    ___|    __  |       |\n| ||_|| |   |___|   |  | |   _   |\n|_|   |_|_______|___|  |_|__| |__|\n\n\u001b [Mera]: 2020-02-18T22:27:12.257\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get hydro data: 2020-02-18T22:27:49.16\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6, 7) = (:rho, :vx, :vy, :vz, :p, :var6, :var7)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:03:04\u001b\n\n\nMemory used for data table :409.5426664352417 MB\n-------------------------------------------------------","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"gas.data","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Table with 4879946 rows, 11 columns:\nColumns:\n\u001b #   \u001b \u001b colname  \u001b \u001b type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64\n11  var7     Float64","category":"page"},{"location":"06_hydro_Projection/#Projection-of-Predefined-Quantities-1","page":"Hydro","title":"Projection of Predefined Quantities","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"See the possible variables:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"projection()","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Predefined vars for projections:\n------------------------------------------------\n=====================[gas]:=====================\n       -all the non derived hydro vars-\n:cpu, :level, :rho, :cx, :cy, :cz, :vx, :vy, :vz, :p, var6,...\nfurther possibilities: :rho, :density, :ρ\n              -derived hydro vars-\n:x, :y, :z\n:sd or :Σ or :surfacedensity\n:mass, :cellsize, :freefall_time\n:cs, :mach, :jeanslength, :jeansnumber\n\n==================[particles]:==================\n        all the non derived  vars:\n:cpu, :level, :id, :family, :tag\n:x, :y, :z, :vx, :vy, :vz, :mass, :birth, :metal....\n\n              -derived particle vars-\n:age\n\n==============[gas or particles]:===============\n:v, :ekin\nsquared => :vx2, :vy2, :vz2\nvelocity dispersion => σx, σy, σz, σ\n\nrelated to a given center:\n---------------------------\n:vr_cylinder, vr_sphere (radial components)\n:vϕ_cylinder, :vθ\nsquared => :vr_cylinder2, :vϕ_cylinder2\nvelocity dispersion => σr_cylinder, σϕ_cylinder\n\n2d maps (not projected):\n:r_cylinder\n:ϕ\n------------------------------------------------","category":"page"},{"location":"06_hydro_Projection/#Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)-1","page":"Hydro","title":"Projection of a Single Quantity in Different Directions (z,y,x)","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Here we project the surface density in the z-direction of the data within a particular vertical range (domain=[0:1]) onto a grid corresponding to the maximum loaded level. Pass any object of HydroDataType (here: \"gas\") to the projection-function and select a variable by a Symbol (here: :sd = :surfacedensity = :Σ in Msol/pc^3)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, unit=:Msol_pc2, zrange=[0.45,0.55])\nproj_z = projection(gas, :Σ,  unit=:Msol_pc2, zrange=[0.45,0.55], verbose=false)\nproj_z = projection(gas, :surfacedensity, unit=:Msol_pc2, zrange=[0.45,0.55], verbose=false)\nproj_z = projection(gas, :sd, :Msol_pc2, zrange=[0.45,0.55], verbose=false) # The keyword \"unit\" (singular) can be omit if the following order is preserved: data-object, quantity, unit.\nproj_x = projection(gas, :sd, :Msol_pc2, direction = :x, zrange=[0.45,0.55], verbose=false); # Project the surface density in x-direction","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:18:14.842\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:07\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:02\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:57\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:57\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:56\u001b","category":"page"},{"location":"06_hydro_Projection/#Select-a-Range-Related-to-a-Center-1","page":"Hydro","title":"Select a Range Related to a Center","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"See also in the documentation for: load data by selection","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"cv = (gas.boxlen / 2.) * gas.scale.kpc # provide the box-center in kpc\nproj_z = projection(gas, :sd, :Msol_pc2,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[cv,cv,cv], range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:23:18.582\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:55\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z):","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,  \n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:boxcenter], range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:24:15.893\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:53\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,  \n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:bc], range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:25:09.001\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:52\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Use the box center notation for individual dimensions, here x,z:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,  \n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:bc, 24., :bc], range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:26:03.671\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:53\u001b","category":"page"},{"location":"06_hydro_Projection/#Get-Multiple-Quantities-1","page":"Hydro","title":"Get Multiple Quantities","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Get several quantities with one function call by passing an array containing the selected variables (at least one entry). The keyword name for the units is now in plural.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_x = projection(gas, [:sd], units=[:Msol_pc2],\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:26:57.186\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd,)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:53\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Pass an array containing several quantities to process and their corresponding units:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z = projection(gas, [:sd, :vx], units=[:Msol_pc2, :km_s],\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:27:50.658\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd, :vx)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:59\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The function can be called without any keywords by preserving the following order: dataobject, variables, units","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z = projection(gas, [:sd , :vx], [:Msol_pc2, :km_s],\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:28:49.928\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:sd, :vx)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:56\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"If all selected variables should be of the same unit use the following arguments: dataobject, array of quantities, unit (no array needed)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"projvel_z = projection(gas, [:vx, :vy, :vz], :km_s,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T12:29:46.23\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:vx, :vy, :vz, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:55\u001b","category":"page"},{"location":"06_hydro_Projection/#Function-Output-1","page":"Hydro","title":"Function Output","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"List the fields of the assigned object:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"propertynames(proj1_z)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(:maps, :maps_unit, :maps_lmax, :maps_mode, :lmax_projected, :lmin, :lmax, :ranges, :extent, :cextent, :ratio, :boxlen, :smallr, :smallc, :scale, :info)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The projected 2D maps are stored in a dictionary:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.maps","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:\n  :sd => [2.42108 2.42108 … 3.06809 3.06809; 2.42108 2.42108 … 3.06809 3.06809;…\n  :vx => [48.3311 48.3311 … 35.0161 35.0161; 48.3311 48.3311 … 35.0161 35.0161;…","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The maps can be accessed by giving the name of the dictionary:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.maps[:sd]","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"428×86 Array{Float64,2}:\n 2.42108  2.42108  2.42108  2.76423  …  3.80613  3.06809  3.06809  3.06809\n 2.42108  2.42108  2.42108  2.76423     3.80613  3.06809  3.06809  3.06809\n 2.43323  2.43323  2.43323  2.83905     3.77978  3.04769  3.04769  3.04769\n 2.43323  2.43323  2.43323  2.83905     3.77978  3.04769  3.04769  3.04769\n 2.43323  2.43323  2.43323  2.83612     3.77978  3.04769  3.04769  3.04769\n 2.43323  2.43323  2.43323  2.83612  …  3.77978  3.04769  3.04769  3.04769\n 2.61724  2.61724  2.61724  2.78421     3.38093  2.59978  2.59978  2.59978\n 2.61724  2.61724  2.61724  2.78421     3.38093  2.59978  2.59978  2.59978\n 2.61724  2.61724  2.61724  2.78048     3.38093  2.59978  2.59978  2.59978\n 2.61724  2.61724  2.61724  2.78048     3.38093  2.59978  2.59978  2.59978\n 2.65948  2.65948  2.65948  2.92033  …  3.26695  2.56391  2.56391  2.56391\n 2.65948  2.65948  2.65948  2.92033     3.26695  2.56391  2.56391  2.56391\n 2.65948  2.65948  2.65948  2.9154      3.26695  2.56391  2.56391  2.56391\n ⋮                                   ⋱                             ⋮      \n 3.64783  3.62431  3.62431  3.69296     2.64986  2.58555  2.58555  2.58555\n 3.64783  3.62431  3.62431  3.69296     2.64986  2.58555  2.58555  2.58555\n 4.06584  4.06584  4.06584  4.25253     2.5403   2.54319  2.54319  2.54319\n 4.06584  4.06584  4.06584  4.25253     2.5403   2.54319  2.54319  2.54319\n 4.06584  4.06584  4.06584  4.36169  …  2.5403   2.54319  2.54319  2.54319\n 4.06584  4.06584  4.06584  4.36169     2.5403   2.54319  2.54319  2.54319\n 5.43946  5.43946  5.43946  5.56363     2.45995  2.45782  2.45782  2.45782\n 5.43946  5.43946  5.43946  5.56363     2.45995  2.45782  2.45782  2.45782\n 5.43946  5.43946  5.43946  5.39163     2.45995  2.45782  2.45782  2.45782\n 5.43946  5.43946  5.43946  5.39163  …  2.45995  2.45782  2.45782  2.45782\n 5.68876  5.68876  5.68876  5.8404      2.41942  2.43411  2.43411  2.43411\n 5.68876  5.68876  5.68876  2.62535     2.41942  2.43411  2.43411  2.43411","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The units of the maps are stored in:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.maps_unit","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:\n  :sd => :Msol_pc2\n  :vx => :km_s","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Projections on a different grid size (see subject below):","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.maps_lmax","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 0 entries","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The following fields are helpful for further calculations or plots.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.ranges # normalized to the domain=[0:1]","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"6-element Array{Float64,1}:\n 0.29166666666647767\n 0.7083333333328743\n 0.29166666666647767\n 0.7083333333328743\n 0.4583333333330363\n 0.5416666666663156","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.extent # ranges in code units","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"4-element Array{Float64,1}:\n 13.96875\n 34.03125\n 21.984375\n 26.015625","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.cextent # ranges in code units relative to a given center (by default: box center)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"4-element Array{Float64,1}:\n -10.03125\n  10.03125\n  -2.015625\n   2.015625","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj1_z.ratio # the ratio between the two ranges","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"4.976744186046512","category":"page"},{"location":"06_hydro_Projection/#Plot-Maps-with-Python-1","page":"Hydro","title":"Plot Maps with Python","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,\n                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false)\nproj_x = projection(gas, :sd, :Msol_pc2,\n                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    direction = :x);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:02\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:00\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Python functions can be directly called in Julia, which gives the opportunity, e.g. to use the Matplotlib library.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"using PyPlot\nusing ColorSchemes\ncmap = ColorMap(ColorSchemes.lajolla.colors) # See http://www.fabiocrameri.ch/colourmaps.php\ncmap2 = ColorMap(ColorSchemes.roma.colors)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: svg)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Project a specific spatial range and plot the axes of the map relative to the box-center (given by keyword: data_center):","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[24.,24.,24.], data_center_unit=:kpc)\nproj_x = projection(gas, :sd, :Msol_pc2,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[24.,24.,24.], data_center_unit=:kpc,\n                    direction = :x);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:54\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:51\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Plot the axes of the map relative to the map-center (given by keyword: data_center):","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[19.,19.,24.], data_center_unit=:kpc)\nproj_x = projection(gas, :sd, :Msol_pc2,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[19.,19.,24.], data_center_unit=:kpc,\n                    direction = :x);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:10\u001b\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:00\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#Projections-of-Derived-Kinematic-Data-1","page":"Hydro","title":"Projections of Derived Kinematic Data","text":"","category":"section"},{"location":"06_hydro_Projection/#Use-quantities-in-cartesian-coordinates:-1","page":"Hydro","title":"Use quantities in cartesian coordinates:","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Project the following derived data (mass weighted by default): The absolute value of the velocity :v, the velocity dispersion :σ in different directions. The Julia language supports Unicode characters and can be inserted by e.g. \"\\sigma + tab-key\" leading to: σ.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, [:v, :σ, :σx, :σy, :σz], :km_s,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[24.,24.,24.], range_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T22:49:54.49\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:v, :σ, :σx, :σy, :σz, :vx, :vx2, :vy, :vy2, :vz, :vz2, :v2, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:03\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"For the velocity dispersion additional maps are created to created the mass-weighted quantity: E. g.: σx = sqrt( <vx^2> - < vx >^2 )","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 13 entries:\n  :sd  => [0.000525384 0.000525384 … 0.000463458 0.000334485; 0.000525384 0.000…\n  :v   => [10.9033 10.9033 … 9.28165 8.34605; 10.9033 10.9033 … 9.28165 8.34605…\n  :v2  => [0.245404 0.245404 … 0.193833 0.163449; 0.245404 0.245404 … 0.193833 …\n  :vx  => [0.11951 0.11951 … -0.0700017 -0.0384127; 0.11951 0.11951 … -0.070001…\n  :vx2 => [0.122347 0.122347 … 0.111339 0.0775909; 0.122347 0.122347 … 0.111339…\n  :vy  => [0.0445661 0.0445661 … -0.00514768 -0.00554146; 0.0445661 0.0445661 ……\n  :vy2 => [0.0331066 0.0331066 … 0.019046 0.018845; 0.0331066 0.0331066 … 0.019…\n  :vz  => [-0.0999134 -0.0999134 … -0.0370643 -0.024236; -0.0999134 -0.0999134 …\n  :vz2 => [0.0899502 0.0899502 … 0.0634475 0.0670127; 0.0899502 0.0899502 … 0.0…\n  :σ   => [30.6004 30.6004 … 27.3378 25.1633; 30.6004 30.6004 … 27.3378 25.1633…\n  :σx  => [21.5567 21.5567 … 21.3939 18.0916; 21.5567 21.5567 … 21.3939 18.0916…\n  :σy  => [11.5681 11.5681 … 9.04357 8.99465; 11.5681 11.5681 … 9.04357 8.99465…\n  :σz  => [18.5437 18.5437 … 16.3378 16.9008; 18.5437 18.5437 … 16.3378 16.9008…","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps_unit","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 13 entries:\n  :sd  => :standard\n  :v   => :km_s\n  :v2  => :standard\n  :vx  => :standard\n  :vx2 => :standard\n  :vy  => :standard\n  :vy2 => :standard\n  :vz  => :standard\n  :vz2 => :standard\n  :σ   => :km_s\n  :σx  => :km_s\n  :σy  => :km_s\n  :σz  => :km_s","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"usedmemory(proj_z);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Memory used: 18.436 MB","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 5.5))\n\nsubplot(2, 3, 1)\ntitle(\"v [km/s]\")\nimshow( (permutedims(proj_z.maps[:v])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 2)\ntitle(\"σ [km/s]\")\nimshow( (permutedims(proj_z.maps[:σ])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(2, 3, 4)\ntitle(\"σx [km/s]\")\nimshow( (permutedims(proj_z.maps[:σx])   ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 5)\ntitle(\"σy [km/s]\")\nimshow( permutedims(proj_z.maps[:σy]) , cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 6)\ntitle(\"σz [km/s]\")\nimshow( permutedims(proj_z.maps[:σz]) , cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();\n","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#Use-quantities-in-cylindrical-coordinates:-1","page":"Hydro","title":"Use quantities in cylindrical coordinates:","text":"","category":"section"},{"location":"06_hydro_Projection/#Face-on-disc-(z-direction)-1","page":"Hydro","title":"Face-on disc (z-direction)","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"For the cylindrical or spherical components of a quantity, the center of the coordinate system is used (keywords: datacenter = center default) and can be given with the keyword \"datacenter\" and its units with \"datacenterunit\". Additionally, the quantities that are based on cartesian coordinates can be given.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, [:v, :σ, :σx, :σy, :ϕ, :r_cylinder, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder],                    \n                    units=[:km_s,:km_s,:km_s, :km_s, :standard, :kpc, :km_s, :km_s, :km_s, :km_s],\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[:boxcenter], range_unit=:kpc,\n                    data_center=[24.,24.,24.],\n                    data_center_unit=:kpc);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:17:14.519\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:v, :σ, :σx, :σy, :ϕ, :r_cylinder, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder, :vx, :vx2, :vy, :vy2, :v2, :vr_cylinder2, :vϕ_cylinder2, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:08\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:\n  :r_cylinder   => [14.0758 14.0427 … 14.1201 14.1534; 14.0427 14.0096 … 14.087…\n  :sd           => [0.000525384 0.000525384 … 0.000463458 0.000334485; 0.000525…\n  :v            => [8.72263 8.72263 … 7.42532 6.67684; 8.72263 8.72263 … 7.4253…\n  :v2           => [0.196323 0.196323 … 0.155066 0.130759; 0.196323 0.196323 … …\n  :vr_cylinder  => [-6.0864 -6.0864 … 2.38666 1.2034; -6.0864 -6.0864 … 2.38666…\n  :vr_cylinder2 => [0.105049 0.105049 … 0.0620751 0.0537682; 0.105049 0.105049 …\n  :vx           => [0.0956079 0.0956079 … -0.0560013 -0.0307302; 0.0956079 0.09…\n  :vx2          => [0.097878 0.097878 … 0.0890713 0.0620727; 0.097878 0.097878 …\n  :vy           => [0.0356529 0.0356529 … -0.00411814 -0.00443317; 0.0356529 0.…\n  :vy2          => [0.0264853 0.0264853 … 0.0152368 0.015076; 0.0264853 0.02648…\n  :vϕ_cylinder  => [2.78004 2.78004 … 3.22947 2.23274; 2.78004 2.78004 … 3.2294…\n  :vϕ_cylinder2 => [0.0193141 0.0193141 … 0.042233 0.0233806; 0.0193141 0.01931…\n  :σ            => [27.7151 27.7151 … 24.7319 22.753; 27.7151 27.7151 … 24.7319…\n  :σr_cylinder  => [20.3637 20.3637 … 16.1627 15.1579; 20.3637 20.3637 … 16.162…\n  :σx           => [19.5341 19.5341 … 19.2232 16.2129; 19.5341 19.5341 … 19.223…\n  :σy           => [10.4127 10.4127 … 8.08995 8.04638; 10.4127 10.4127 … 8.0899…\n  :σϕ_cylinder  => [8.67895 8.67895 … 13.0835 9.77518; 8.67895 8.67895 … 13.083…\n  :ϕ            => [3.92699 3.92463 … 2.35306 2.35073; 3.92935 3.92699 … 2.3507…","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps_unit","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:\n  :r_cylinder   => :kpc\n  :sd           => :standard\n  :v            => :km_s\n  :v2           => :standard\n  :vr_cylinder  => :km_s\n  :vr_cylinder2 => :standard\n  :vx           => :standard\n  :vx2          => :standard\n  :vy           => :standard\n  :vy2          => :standard\n  :vϕ_cylinder  => :km_s\n  :vϕ_cylinder2 => :standard\n  :σ            => :km_s\n  :σr_cylinder  => :km_s\n  :σx           => :km_s\n  :σy           => :km_s\n  :σϕ_cylinder  => :km_s\n  :ϕ            => :radian","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"Radius [kpc]\")\nimshow( permutedims(proj_z.maps[:r_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_z.maps[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmin=-20.,vmax=20.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_z.maps[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"ϕ-angle \")\nimshow( permutedims(proj_z.maps[:ϕ]) , cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"σr [km/s]\")\nimshow( permutedims(proj_z.maps[:σr_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"σϕ [km/s]\")\nimshow( permutedims(proj_z.maps[:σϕ_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"σ [km/s]\")\nimshow( permutedims(proj_z.maps[:σ]) , cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"σx [km/s]\")\nimshow( permutedims(proj_z.maps[:σx] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"σy [km/s]\")\nimshow( permutedims(proj_z.maps[:σy] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#Project-on-a-Coarser-Grid-1","page":"Hydro","title":"Project on a Coarser Grid","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The default is the projection on the maximum loaded grid level (always provided in the output). Choose a smaller level with the keyword lmax to project on a coarser grid in addition. Higher-resolution data is averaged within each coarser grid-cell (default: mass-weighted). By default, the data is assumed to be in the center of the simulation box.","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, [:v, :σ, :σx, :σy, :σz, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder],\n                    :km_s,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[:boxcenter], range_unit=:kpc,\n                    lmax=8);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:18:44.018\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nSelected var(s)=(:v, :σ, :σx, :σy, :σz, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder, :vx, :vx2, :vy, :vy2, :vz, :vz2, :v2, :vr_cylinder2, :vϕ_cylinder2, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:08\u001b\n\n\n\nremap from:\nlevel 10 => 8\ncellsize 46.88 [pc] => 187.5 [pc]\npixels (428, 428) => (107, 107)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The projection onto the maximum loaded grid is always provided:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps_lmax","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => [0.000525384 0.000545269 … 0.000475553 0.000334485; 0.000532…\n  :v            => [7.26886 7.32994 … 7.73366 5.56403; 7.30578 7.37137 … 8.9885…\n  :v2           => [0.163603 0.166415 … 0.210983 0.108966; 0.166587 0.168972 … …\n  :vr_cylinder  => [-5.072 -4.65663 … 2.60367 1.00283; -5.02593 -4.4874 … 2.140…\n  :vr_cylinder2 => [0.0875409 0.0826628 … 0.0646939 0.0448068; 0.0884293 0.0811…\n  :vx           => [0.0796732 0.0788819 … -0.0691436 -0.0256085; 0.0809557 0.07…\n  :vx2          => [0.081565 0.0804544 … 0.136752 0.0517273; 0.0845953 0.082583…\n  :vy           => [0.0297108 0.0211165 … -0.0132175 -0.0036943; 0.0278214 0.01…\n  :vy2          => [0.022071 0.0251372 … 0.0168816 0.0125634; 0.0229327 0.02711…\n  :vz           => [-0.0666089 -0.0671458 … -0.0188721 -0.0161574; -0.0657326 -…\n  :vz2          => [0.0599668 0.0608235 … 0.0573498 0.0446751; 0.0590593 0.0592…\n  :vϕ_cylinder  => [2.3167 2.65081 … 3.9351 1.86062; 2.49477 2.91954 … 5.93535 …\n  :vϕ_cylinder2 => [0.0160951 0.0229288 … 0.0889397 0.0194838; 0.0190986 0.0284…\n  :σ            => [25.5083 25.727 … 29.1109 20.9191; 25.7482 25.928 … 33.7281 …\n  :σr_cylinder  => [18.7273 18.2695 … 16.4746 13.8445; 18.8414 18.1389 … 13.727…\n  :σx           => [17.9845 17.8664 … 23.8221 14.8194; 18.319 18.1022 … 25.8056…\n  :σy           => [9.54527 10.3042 … 8.47594 7.3461; 9.7614 10.7401 … 15.0491 …\n  :σz           => [15.4527 15.5615 … 15.655 13.8198; 15.3422 15.3681 … 16.8782…\n  :σϕ_cylinder  => [7.99022 9.56921 … 19.1564 8.96219; 8.7122 10.678 … 26.5011 …","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps_unit","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => :standard\n  :v            => :km_s\n  :v2           => :standard\n  :vr_cylinder  => :km_s\n  :vr_cylinder2 => :standard\n  :vx           => :standard\n  :vx2          => :standard\n  :vy           => :standard\n  :vy2          => :standard\n  :vz           => :standard\n  :vz2          => :standard\n  :vϕ_cylinder  => :km_s\n  :vϕ_cylinder2 => :standard\n  :σ            => :km_s\n  :σr_cylinder  => :km_s\n  :σx           => :km_s\n  :σy           => :km_s\n  :σz           => :km_s\n  :σϕ_cylinder  => :km_s","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The projection onto a coarser grid (fieldname: maps_lmax) is stored in a dictionary into the field maps_lmax:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.lmax_projected","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"8","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z.maps_lmax","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => [0.000525384 0.000545269 … 0.000475553 0.000334485; 0.000532…\n  :v            => [7.26886 7.32994 … 7.73366 5.56403; 7.30578 7.37137 … 8.9885…\n  :v2           => [0.163603 0.166415 … 0.210983 0.108966; 0.166587 0.168972 … …\n  :vr_cylinder  => [-5.072 -4.65663 … 2.60367 1.00283; -5.02593 -4.4874 … 2.140…\n  :vr_cylinder2 => [0.0875409 0.0826628 … 0.0646939 0.0448068; 0.0884293 0.0811…\n  :vx           => [0.0796732 0.0788819 … -0.0691436 -0.0256085; 0.0809557 0.07…\n  :vx2          => [0.081565 0.0804544 … 0.136752 0.0517273; 0.0845953 0.082583…\n  :vy           => [0.0297108 0.0211165 … -0.0132175 -0.0036943; 0.0278214 0.01…\n  :vy2          => [0.022071 0.0251372 … 0.0168816 0.0125634; 0.0229327 0.02711…\n  :vz           => [-0.0666089 -0.0671458 … -0.0188721 -0.0161574; -0.0657326 -…\n  :vz2          => [0.0599668 0.0608235 … 0.0573498 0.0446751; 0.0590593 0.0592…\n  :vϕ_cylinder  => [2.3167 2.65081 … 3.9351 1.86062; 2.49477 2.91954 … 5.93535 …\n  :vϕ_cylinder2 => [0.0160951 0.0229288 … 0.0889397 0.0194838; 0.0190986 0.0284…\n  :σ            => [25.5083 25.727 … 29.1109 20.9191; 25.7482 25.928 … 33.7281 …\n  :σr_cylinder  => [18.7273 18.2695 … 16.4746 13.8445; 18.8414 18.1389 … 13.727…\n  :σx           => [17.9845 17.8664 … 23.8221 14.8194; 18.319 18.1022 … 25.8056…\n  :σy           => [9.54527 10.3042 … 8.47594 7.3461; 9.7614 10.7401 … 15.0491 …\n  :σz           => [15.4527 15.5615 … 15.655 13.8198; 15.3422 15.3681 … 16.8782…\n  :σϕ_cylinder  => [7.99022 9.56921 … 19.1564 8.96219; 8.7122 10.678 … 26.5011 …","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"v [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:v]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmin=-20.,vmax=20.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"σz [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σz] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"σr [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σr_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"σϕ [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σϕ_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"σ [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σ]) , cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"σx [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σx]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"σy [km/s]\")\nimshow( permutedims(proj_z.maps_lmax[:σy] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#Remap-a-Projected-Data-onto-a-Coarser-Grid-1","page":"Hydro","title":"Remap a Projected Data onto a Coarser Grid","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Pass the object with the projected data to the function remap and the level of the coarser grid:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_zlmax = remap(proj_z, 6, weighting=:mass);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"remap from:\nlevel 10 => 6\ncellsize 46.88 [pc] => 750.0 [pc]\npixels (428, 428) => (27, 27)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"v [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:v]  ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent, vmin=-20.,vmax=20.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"log10(σz) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σz]) ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"log10(σr) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σr_cylinder]  )), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"log10(σϕ) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σϕ_cylinder] )), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"log10(σ) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σ]) ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"log10(σx) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σx]  )), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"log10(σy) [km/s]\")\nimshow( log10.(permutedims(proj_zlmax.maps_lmax[:σy] )), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar();","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#Projection-of-Thermal-Data-1","page":"Hydro","title":"Projection of Thermal Data","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"The the sound speed is calculated from the loaded adiabatic index (from the hydro files):","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :cs, :km_s, zrange=[0.45,0.55], xrange=[0.3, 0.6], yrange=[0.3, 0.6])\nproj_x = projection(gas, :cs, :km_s, zrange=[0.45,0.55], xrange=[0.3, 0.6], yrange=[0.3, 0.6], direction=:x);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T22:54:00.33\u001b\n\ndomain:\nxmin::xmax: 0.3 :: 0.6  \t==> 14.4 [kpc] :: 28.8 [kpc]\nymin::ymax: 0.3 :: 0.6  \t==> 14.4 [kpc] :: 28.8 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nSelected var(s)=(:cs, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:58\u001b\n\n\n\u001b [Mera]: 2020-02-18T22:54:58.629\u001b\n\ndomain:\nxmin::xmax: 0.3 :: 0.6  \t==> 14.4 [kpc] :: 28.8 [kpc]\nymin::ymax: 0.3 :: 0.6  \t==> 14.4 [kpc] :: 28.8 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nSelected var(s)=(:cs, :sd)\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:55\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 3.5))\n\nsubplot(1, 2, 1)\nim = imshow( log10.(permutedims(proj_z.maps[:cs])   ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(c_s) \\ [km \\ s^{-1}]}\")\n\n\nsubplot(1, 2, 2)\nim = imshow( log10.(permutedims(proj_x.maps[:cs]) ), cmap=cmap2, origin=\"lower\", extent=proj_x.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(c_s) \\ [km \\ s^{-1}]}\",orientation=\"horizontal\", pad=0.2);\n","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Change the adiabatic index in the field gas.info.gamma to use a different value in the projection calculation.","category":"page"},{"location":"06_hydro_Projection/#Projection-of-Masked-Data-1","page":"Hydro","title":"Projection of Masked Data","text":"","category":"section"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Mask higher densities by creating a Bool-array where the lower density cells correspond to false entries:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"density = 4e-3 / gas.scale.Msol_pc3\nmask = map(row->row.rho < density, gas.data);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"Pass the mask to the projection function:","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"proj_z = projection(gas, :sd, :Msol_pc2, zrange=[0.45,0.55], mask=mask)\nproj_x = projection(gas, :sd, :Msol_pc2, zrange=[0.45,0.55], mask=mask, direction=:x);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-18T23:04:58.755\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nSelected var(s)=(:sd,)\n\n:mask provided by function\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:35\u001b\n\n\n\u001b [Mera]: 2020-02-18T23:06:34.69\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nSelected var(s)=(:sd,)\n\n:mask provided by function\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:01:34\u001b","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"(Image: png)","category":"page"},{"location":"06_hydro_Projection/#","page":"Hydro","title":"Hydro","text":"","category":"page"},{"location":"api/#Types-1","page":"API Documentation","title":"Types","text":"","category":"section"},{"location":"api/#Abstract-type-hierarchies-1","page":"API Documentation","title":"Abstract type hierarchies","text":"","category":"section"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"(Image: DataSetType hierarchy)","category":"page"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"HydroMapsType <: DataMapsType\nPartMapsType  <: DataMapsType","category":"page"},{"location":"api/#List-of-types-1","page":"API Documentation","title":"List of types","text":"","category":"section"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"Modules = [Mera]\nOrder = [:type]","category":"page"},{"location":"api/#Functions-1","page":"API Documentation","title":"Functions","text":"","category":"section"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"Modules = [Mera]\nPrivate = false\nOrder = [:function]","category":"page"},{"location":"api/#Documentation-Types-1","page":"API Documentation","title":"Documentation Types","text":"","category":"section"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"  Modules = [Mera]\n  Order = [:type]","category":"page"},{"location":"api/#Mera.ArgumentsType","page":"API Documentation","title":"Mera.ArgumentsType","text":"Mutable Struct: Contains fields to use as arguments in functions\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.ClumpDataType","page":"API Documentation","title":"Mera.ClumpDataType","text":"Mutable Struct: Contains clump data and information about the selected simulation\n\nClumpDataType <: ContainMassDataSetType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.CompilationInfoType","page":"API Documentation","title":"Mera.CompilationInfoType","text":"Mutable Struct: Contains the collected information about the compilation of RAMSES\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.ContainMassDataSetType","page":"API Documentation","title":"Mera.ContainMassDataSetType","text":"Abstract Supertype of all datasets that contain mass variables\n\nHydroPartType <: ContainMassDataSetType <: DataSetType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.DataMapsType","page":"API Documentation","title":"Mera.DataMapsType","text":"Abstract Supertype of all the different dataset type maps HydroMapsType <: DataMapsType PartMapsType <: DataMapsType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.DataSetType","page":"API Documentation","title":"Mera.DataSetType","text":"Abstract Supertype of all the different dataset types\n\nHydroPartType <: ContainMassDataSetType <: DataSetType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.DescriptorType","page":"API Documentation","title":"Mera.DescriptorType","text":"Mutable Struct: Contains the collected information about the descriptors\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.GridInfoType","page":"API Documentation","title":"Mera.GridInfoType","text":"Mutable Struct: Contains the collected information about grid\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.Histogram2DMapType","page":"API Documentation","title":"Mera.Histogram2DMapType","text":"Mutable Struct: Contains the 2D histogram returned by the function: histogram2 and information about the selected simulation\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.HydroDataType","page":"API Documentation","title":"Mera.HydroDataType","text":"Mutable Struct: Contains hydro data and information about the selected simulation\n\nHydroDataType <: HydroPartType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.HydroMapsType","page":"API Documentation","title":"Mera.HydroMapsType","text":"Mutable Struct: Contains the maps/units returned by the hydro-projection information about the selected simulation\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.HydroPartType","page":"API Documentation","title":"Mera.HydroPartType","text":"Abstract Supertype of data-sets that contain hydro and particle data\n\nHydroPartType <: ContainMassDataSetType <: DataSetType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.InfoType","page":"API Documentation","title":"Mera.InfoType","text":"Mutable Struct: Collected information about the selected simulation output\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.PartDataType","page":"API Documentation","title":"Mera.PartDataType","text":"Mutable Struct: Contains particle data and information about the selected simulation\n\nPartDataType <: HydroPartType\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.PartInfoType","page":"API Documentation","title":"Mera.PartInfoType","text":"Mutable Struct: Contains the collected information about particles\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.PartMapsType","page":"API Documentation","title":"Mera.PartMapsType","text":"Mutable Struct: Contains the maps/units returned by the particles-projection information about the selected simulation\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.PhysicalUnitsType","page":"API Documentation","title":"Mera.PhysicalUnitsType","text":"Mutable Struct: Contains the physical constants in cgs units\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.ScalesType","page":"API Documentation","title":"Mera.ScalesType","text":"Mutable Struct: Contains the created scale factors from code to physical units\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.CheckOutputNumberType","page":"API Documentation","title":"Mera.CheckOutputNumberType","text":"Mutable Struct: Contains the existing simulation snapshots in a folder and a list of the empty output-folders\n\n\n\n\n\n","category":"type"},{"location":"api/#Mera.WStatType","page":"API Documentation","title":"Mera.WStatType","text":"Mutable Struct: Contains the output statistics returned by wstat\n\n\n\n\n\n","category":"type"},{"location":"api/#Documentation-Functions-1","page":"API Documentation","title":"Documentation Functions","text":"","category":"section"},{"location":"api/#","page":"API Documentation","title":"API Documentation","text":"  Modules = [Mera]\n  Order = [:function]","category":"page"},{"location":"api/#Mera.amroverview-Tuple{GravDataType, Bool}","page":"API Documentation","title":"Mera.amroverview","text":"Get the number of cells and/or the CPUs per level\n\nfunction overview_amr(dataobject::GravDataType, verbose::Bool=true)\nfunction overview_amr(dataobject::GravDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.amroverview-Tuple{HydroDataType, Bool}","page":"API Documentation","title":"Mera.amroverview","text":"Get the number of cells and/or the CPUs per level\n\nfunction overview_amr(dataobject::HydroDataType, verbose::Bool=true)\nfunction overview_amr(dataobject::HydroDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.amroverview-Tuple{PartDataType, Bool}","page":"API Documentation","title":"Mera.amroverview","text":"Get the number of particles and/or the CPUs per level\n\nfunction overview_amr(dataobject::PartDataType, verbose::Bool=true)\nfunction overview_amr(dataobject::PartDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.average_velocity-Tuple{ContainMassDataSetType, Symbol}","page":"API Documentation","title":"Mera.average_velocity","text":"Calculate the average velocity (w/o mass-weight) of any ContainMassDataSetType:\n\naverage_velocity(dataobject::ContainMassDataSetType; unit::Symbol=:standard, weighting::Symbol=:mass, mask::MaskType=[false])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"ContainMassDataSetType\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units)  :kms, :ms, :cm_s (of typye Symbol) ..etc. ; see for defined velocity-scales viewfields(info.scale)\nweighting: use different weightings: :mass (default), :volume (hydro), :no\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.bulk_velocity-Tuple{ContainMassDataSetType, Symbol}","page":"API Documentation","title":"Mera.bulk_velocity","text":"Calculate the average velocity (w/o mass-weight) of any ContainMassDataSetType:\n\nbulk_velocity(dataobject::ContainMassDataSetType; unit::Symbol=:standard, weighting::Symbol=:mass, mask::MaskType=[false])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"ContainMassDataSetType\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units)  :kms, :ms, :cm_s (of typye Symbol) ..etc. ; see for defined velocity-scales viewfields(info.scale)\nweighting: use different weightings: :mass (default), :volume (hydro), :no\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.center_of_mass-Tuple{ContainMassDataSetType, Symbol}","page":"API Documentation","title":"Mera.center_of_mass","text":"Calculate the center-of-mass of any ContainMassDataSetType:\n\ncenter_of_mass(dataobject::ContainMassDataSetType; unit::Symbol=:standard, mask::MaskType=[false])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"ContainMassDataSetType\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.center_of_mass-Tuple{Vector{HydroPartType}, Symbol}","page":"API Documentation","title":"Mera.center_of_mass","text":"Calculate the joint center-of-mass of any HydroPartType:\n\ncenter_of_mass(dataobject::Array{HydroPartType,1}, unit::Symbol; mask::MaskArrayAbstractType=[[false],[false]])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"Array{HydroPartType,1}\"\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\nmask: needs to be of type MaskArrayAbstractType which contains two entries with supertype of Array{Bool,1} or BitArray{1} and the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.checkoutputs","page":"API Documentation","title":"Mera.checkoutputs","text":"Get the existing simulation snapshots in a given folder\n\nreturns field outputs with Array{Int,1} containing the output-numbers of the existing simulations\nreturns field miss with Array{Int,1} containing the output-numbers of empty simulation folders\nreturns field path as String\n\ncheckoutputs(path::String=\"./\"; verbose::Bool=true)\nreturn CheckOutputNumberType\n\nExamples\n\n# Example 1:\n# look in current folder\njulia> N = checkoutputs();\njulia> N.outputs\njulia> N.miss\njulia> N.path\n\n# Example 2:\n# look in given path\n# without any keyword\njulia>N = checkoutputs(\"simulation001\");\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.checksimulations","page":"API Documentation","title":"Mera.checksimulations","text":"List the existing simulation snapshots in a given folder\n\nreturns a Dictonary with existing simulations and their folder names with:\nfield outputs with Array{Int,1} containing the output-numbers of the existing simulations\nfield miss with Array{Int,1} containing the output-numbers of empty simulation folders\nfield path as String\n\nchecksimulations(path::String=\"./\"; verbose::Bool=true, filternames=String[])\nreturn Dict with named Tuple: simulation name and N=CheckOutputNumberType\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.com-Tuple{ContainMassDataSetType, Symbol}","page":"API Documentation","title":"Mera.com","text":"Calculate the center-of-mass of any ContainMassDataSetType:\n\ncom(dataobject::ContainMassDataSetType; unit::Symbol=:standard, mask::MaskType=[false])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"ContainMassDataSetType\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.com-Tuple{Vector{HydroPartType}, Symbol}","page":"API Documentation","title":"Mera.com","text":"Calculate the joint center-of-mass of any HydroPartType:\n\ncom(dataobject::Array{HydroPartType,1}, unit::Symbol; mask::MaskArrayAbstractType=[[false],[false]])\n\nreturn Tuple{Float64, Float64, Float64,}\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"Array{HydroPartType,1}\"\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\nmask: needs to be of type MaskArrayAbstractType which contains two entries with supertype of Array{Bool,1} or BitArray{1} and the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.construct_datatype-Tuple{IndexedTables.AbstractIndexedTable, HydroDataType}","page":"API Documentation","title":"Mera.construct_datatype","text":"Create a New DataSetType from a Filtered Data Table\n\nfunction construct_datatype(data::JuliaDB.AbstractIndexedTable, dataobject::HydroDataType)\nreturn HydroDataType\n\nfunction construct_datatype(data::JuliaDB.AbstractIndexedTable, dataobject::PartDataType)\nreturn PartDataType\n\nfunction construct_datatype(data::JuliaDB.AbstractIndexedTable, dataobject::ClumpDataType)\nreturn ClumpDataType\n\nfunction construct_datatype(data::JuliaDB.AbstractIndexedTable, dataobject::GravDataType)\nreturn GravDataType\n\nExample\n\n# read simulation information\njulia> info = getinfo(420)\njulia> gas = gethydro(info)\n\n# filter and create a new` data table\njulia> density = 3. /gas.scale.Msol_pc3\njulia> filtered_db = @filter gas.data :rho >= density\n\n# construct a new HydroDataType\n# (comparable to the object \"gas\" but only with filtered data)\njulia> gas_new = construct_datatype(filtered_db, gas)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.createpath-Tuple{Real, String}","page":"API Documentation","title":"Mera.createpath","text":"```julia  createpath(output::Real, path::String; namelist::String=\"\")\n\nreturn  FileNamesType  ```\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.dataoverview-Tuple{ClumpDataType}","page":"API Documentation","title":"Mera.dataoverview","text":"Get the extrema of each variable in the database\n\nfunction dataoverview(dataobject::ClumpDataType)\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.dataoverview-Tuple{GravDataType, Bool}","page":"API Documentation","title":"Mera.dataoverview","text":"todo: needs to be tested\n\nGet the total epot and min/max value of each variable in the database per level\n\nfunction dataoverview(dataobject::GravDataType, verbose::Bool=true)\nfunction dataoverview(dataobject::GravDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.dataoverview-Tuple{HydroDataType, Bool}","page":"API Documentation","title":"Mera.dataoverview","text":"Get the mass and min/max value of each variable in the database per level\n\nfunction dataoverview(dataobject::HydroDataType, verbose::Bool=true)\nfunction dataoverview(dataobject::HydroDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.dataoverview-Tuple{PartDataType, Bool}","page":"API Documentation","title":"Mera.dataoverview","text":"Get the min/max value of each variable in the database per level\n\nfunction dataoverview(dataobject::PartDataType, verbose::Bool=true)\nfunction dataoverview(dataobject::PartDataType; verbose::Bool=true)\n\nreturn a JuliaDB table\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getclumps-Tuple{InfoType, Vector{Symbol}}","page":"API Documentation","title":"Mera.getclumps","text":"Read the clump-data:\n\nselected variables\nlimited to a spatial range\nprint the name of each data-file before reading it\ntoggle verbose mode\npass a struct with arguments (myargs)\n\ngetclumps(  dataobject::InfoType;\n            vars::Array{Symbol,1}=[:all],\n            xrange::Array{<:Any,1}=[missing, missing],\n            yrange::Array{<:Any,1}=[missing, missing],\n            zrange::Array{<:Any,1}=[missing, missing],\n            center::Array{<:Any,1}=[0., 0., 0.],\n            range_unit::Symbol=:standard,\n            print_filenames::Bool=false,\n            verbose::Bool=verbose_mode,\n            myargs::ArgumentsType=ArgumentsType() )\n\nReturns an object of type ClumpDataType, containing the clump-data table, the selected options and the simulation ScaleType and summary of the InfoType\n\nreturn ClumpDataType()\n\n# get an overview of the returned fields:\n# e.g.:\njulia> info = getinfo(100)\njulia> clumps  = getclumps(info)\njulia> viewfields(clumps)\n#or:\njulia> fieldnames(clumps)\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"InfoType\", created by the function getinfo\n\nPredefined/Optional Keywords:\n\nvars: Currently, the length of the loaded variable list can be modified *(see examples below).\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\nprint_filenames: print on screen the current processed particle file of each CPU\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of xrange, yrange, zrange, center, range_unit, verbose\n\nDefined Methods - function defined for different arguments\n\ngetclumps(dataobject::InfoType; ...) # no given variables -> all variables loaded\ngetclumps(dataobject::InfoType, vars::Array{Symbol,1}; ...)  # one or several given variables -> array needed\n\nExamples\n\n# read simulation information\njulia> info = getinfo(420)\n\n# Example 1:\n# read clump data of all variables, full-box\njulia> clumps = getclumps(info)\n\n# Example 2:\n# read clump data of all variables\n# data range 20x20x4 kpc; ranges are given in kpc relative to the box (here: 48 kpc) center at 24 kpc\njulia> clumps = getclumps(    info,\n                              xrange=[-10.,10.],\n                              yrange=[-10.,10.],\n                              zrange=[-2.,2.],\n                              center=[24., 24., 24.],\n                              range_unit=:kpc )\n\n# Example 3:\n# give the center of the box by simply passing: center = [:bc] or center = [:boxcenter]\n# this is equivalent to center=[24.,24.,24.] in Example 2\n# the following combination is also possible: e.g. center=[:bc, 12., 34.], etc.\njulia> clumps = getclumps(  info,\n                            xrange=[-10.,10.],\n                            yrange=[-10.,10.],\n                            zrange=[-2.,2.],\n                            center=[33., bc:, 10.],\n                            range_unit=:kpc )\n\n# Example 4:\n# Load less than the found 12 columns from the header of the clump files;\n# Pass an array with the variables to the keyword argument *vars*.\n# The order of the variables has to be consistent with the header in the clump files:\njulia> lumps = getclumps(info, [ :index, :lev, :parent, :ncell,\n                                 :peak_x, :peak_y, :peak_z ])\n\n# Example 5:\n# Load more than the found 12 columns from the header of the clump files.\n# E.g. the list can be extended with more names if there are more columns\n# in the data than given by the header in the files.\n# The order of the variables has to be consistent with the header in the clump files:\njulia> clumps = getclumps(info, [   :index, :lev, :parent, :ncell,\n                                    :peak_x, :peak_y, :peak_z,\n                                    Symbol(\"rho-\"), Symbol(\"rho+\"),\n                                    :rho_av, :mass_cl, :relevance,\n                                    :vx, :vy, :vz ])\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getextent-Tuple{DataSetType, Symbol}","page":"API Documentation","title":"Mera.getextent","text":"Get the extent of the dataset-domain:\n\nfunction getextent( dataobject::DataSetType;\n                     unit::Symbol=:standard,\n                     center::Array{<:Any,1}=[0., 0., 0.],\n                     center_unit::Symbol=:standard,\n                     direction::Symbol=:z)\n\nreturn (xmin, xmax), (ymin ,ymax ), (zmin ,zmax )\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\n\nPredefined/Optional Keywords:\n\ncenter: in unit given by argument center_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\ncenter_unit: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ndirection: todo\nunit: return the variables in given unit\n\nDefined Methods - function defined for different arguments\n\ngetextent( dataobject::DataSetType; # one given variable\ngetextent( dataobject::DataSetType, unit::Symbol; ...) # one given variable with its unit\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getgravity-Tuple{InfoType, Symbol}","page":"API Documentation","title":"Mera.getgravity","text":"Read the leaf-cells of the gravity-data:\n\nselect variables\nlimit to a maximum level\nlimit to a spatial range\nprint the name of each data-file before reading it\ntoggle verbose mode\ntoggle progress bar\npass a struct with arguments (myargs)\n\ngetgravity(   dataobject::InfoType;\n            lmax::Real=dataobject.levelmax,\n            vars::Array{Symbol,1}=[:all],\n            xrange::Array{<:Any,1}=[missing, missing],\n            yrange::Array{<:Any,1}=[missing, missing],\n            zrange::Array{<:Any,1}=[missing, missing],\n            center::Array{<:Any,1}=[0., 0., 0.],\n            range_unit::Symbol=:standard,\n            print_filenames::Bool=false,\n            verbose::Bool=verbose_mode,\n            show_progress::Bool=true,\n            myargs::ArgumentsType=ArgumentsType()  )\n\nReturns an object of type GravDataType, containing the gravity-data table, the selected options and the simulation ScaleType and summary of the InfoType\n\nreturn GravDataType()\n\n# get an overview of the returned fields:\n# e.g.:\njulia> info = getinfo(100)\njulia> grav  = getgravity(info)\njulia> viewfields(grav)\n#or:\njulia> fieldnames(grav)\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"InfoType\", created by the function getinfo\n\nPredefined/Optional Keywords:\n\nlmax: the maximum level to be read from the data\nvar(s): the selected gravity variables in arbitrary order: :all (default), :cpu, :epot, :ax, :ay, :az\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\nprint_filenames: print on screen the current processed gravity file of each CPU\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nshow_progress: print progress bar on screen\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of lmax, xrange, yrange, zrange, center, rangeunit, verbose, showprogress\n\nDefined Methods - function defined for different arguments\n\ngetgravity( dataobject::InfoType; ...) # no given variables -> all variables loaded\ngetgravity( dataobject::InfoType, var::Symbol; ...) # one given variable -> no array needed\ngetgravity( dataobject::InfoType, vars::Array{Symbol,1}; ...)  # several given variables -> array needed\n\nExamples\n\n# read simulation information\njulia> info = getinfo(420)\n\n# Example 1:\n# read gravity data of all variables, full-box, all levels\njulia> grav = getgravity(info)\n\n# Example 2:\n# read gravity data of all variables up to level 8\n# data range 20x20x4 kpc; ranges are given in kpc relative to the box (here: 48 kpc) center at 24 kpc\njulia> grav = getgravity(    info,\n                          lmax=8,\n                          xrange=[-10.,10.],\n                          yrange=[-10.,10.],\n                          zrange=[-2.,2.],\n                          center=[24., 24., 24.],\n                          range_unit=:kpc )\n\n# Example 3:\n# give the center of the box by simply passing: center = [:bc] or center = [:boxcenter]\n# this is equivalent to center=[24.,24.,24.] in Example 2\n# the following combination is also possible: e.g. center=[:bc, 12., 34.], etc.\njulia> grav = getgravity(    info,\n                          lmax=8,\n                          xrange=[-10.,10.],\n                          yrange=[-10.,10.],\n                          zrange=[-2.,2.],\n                          center=[33., bc:, 10.],\n                          range_unit=:kpc )\n\n# Example 4:\n# read gravity data of the variables epot and the x-acceleration, full-box, all levels\njulia> grav = getgravity( info, [:epot, :ax] ) # use array for the variables\n\n# Example 5:\n# read gravity data of the single variable epot, full-box, all levels\njulia> grav = getgravity( info, :epot ) # no array for a single variable needed\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.gethydro-Tuple{InfoType, Symbol}","page":"API Documentation","title":"Mera.gethydro","text":"Read the leaf-cells of the hydro-data:\n\nselect variables\nlimit to a maximum level\nlimit to a spatial range\nset a minimum density or sound speed\ncheck for negative values in density and thermal pressure\nprint the name of each data-file before reading it\ntoggle verbose mode\ntoggle progress bar\npass a struct with arguments (myargs)\n\ngethydro(   dataobject::InfoType;\n            lmax::Real=dataobject.levelmax,\n            vars::Array{Symbol,1}=[:all],\n            xrange::Array{<:Any,1}=[missing, missing],\n            yrange::Array{<:Any,1}=[missing, missing],\n            zrange::Array{<:Any,1}=[missing, missing],\n            center::Array{<:Any,1}=[0., 0., 0.],\n            range_unit::Symbol=:standard,\n            smallr::Real=0.,\n            smallc::Real=0.,\n            check_negvalues::Bool=false,\n            print_filenames::Bool=false,\n            verbose::Bool=verbose_mode,\n            show_progress::Bool=true,\n            myargs::ArgumentsType=ArgumentsType()  )\n\nReturns an object of type HydroDataType, containing the hydro-data table, the selected options and the simulation ScaleType and summary of the InfoType\n\nreturn HydroDataType()\n\n# get an overview of the returned fields:\n# e.g.:\njulia> info = getinfo(100)\njulia> gas  = gethydro(info)\njulia> viewfields(gas)\n#or:\njulia> fieldnames(gas)\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"InfoType\", created by the function getinfo\n\nPredefined/Optional Keywords:\n\nlmax: the maximum level to be read from the data\nvar(s): the selected hydro variables in arbitrary order: :all (default), :cpu, :rho, :vx, :vy, :vz, :p, :var6, :var7...\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\nsmallr: set lower limit for density; zero means inactive\nsmallc: set lower limit for thermal pressure; zero means inactive\ncheck_negvalues: check loaded data of \"rho\" and \"p\" on negative values; false by default\nprint_filenames: print on screen the current processed hydro file of each CPU\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nshow_progress: print progress bar on screen\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of lmax, xrange, yrange, zrange, center, rangeunit, verbose, showprogress\n\nDefined Methods - function defined for different arguments\n\ngethydro( dataobject::InfoType; ...) # no given variables -> all variables loaded\ngethydro( dataobject::InfoType, var::Symbol; ...) # one given variable -> no array needed\ngethydro( dataobject::InfoType, vars::Array{Symbol,1}; ...)  # several given variables -> array needed\n\nExamples\n\n# read simulation information\njulia> info = getinfo(420)\n\n# Example 1:\n# read hydro data of all variables, full-box, all levels\njulia> gas = gethydro(info)\n\n# Example 2:\n# read hydro data of all variables up to level 8\n# data range 20x20x4 kpc; ranges are given in kpc relative to the box (here: 48 kpc) center at 24 kpc\njulia> gas = gethydro(    info,\n                          lmax=8,\n                          xrange=[-10.,10.],\n                          yrange=[-10.,10.],\n                          zrange=[-2.,2.],\n                          center=[24., 24., 24.],\n                          range_unit=:kpc )\n\n# Example 3:\n# give the center of the box by simply passing: center = [:bc] or center = [:boxcenter]\n# this is equivalent to center=[24.,24.,24.] in Example 2\n# the following combination is also possible: e.g. center=[:bc, 12., 34.], etc.\njulia> gas = gethydro(    info,\n                          lmax=8,\n                          xrange=[-10.,10.],\n                          yrange=[-10.,10.],\n                          zrange=[-2.,2.],\n                          center=[33., bc:, 10.],\n                          range_unit=:kpc )\n\n# Example 4:\n# read hydro data of the variables density and the thermal pressure, full-box, all levels\njulia> gas = gethydro( info, [:rho, :p] ) # use array for the variables\n\n# Example 5:\n# read hydro data of the single variable density, full-box, all levels\njulia> gas = gethydro( info, :rho ) # no array for a single variable needed\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getinfo-Tuple{Real}","page":"API Documentation","title":"Mera.getinfo","text":"Get the simulation overview from RAMSES info, descriptor and output header files\n\ngetinfo(; output::Real=1, path::String=\"\", namelist::String=\"\", verbose::Bool=verbose_mode)\nreturn InfoType\n\nKeyword Arguments\n\noutput: timestep number (default=1)\npath: the path to the output folder relative to the current folder or absolute path\nnamelist: give the path to a namelist file (by default the namelist.txt-file in the output-folder is read)\nverbose:: informations are printed on the screen by default: gloval variable verbose_mode=true\n\nExamples\n\n# read simulation information from output `1` in current folder\njulia> info = getinfo()\n\n# read simulation information from output `420` in given folder (relative path to the current working folder)\njulia> info = getinfo(output=420, path=\"../MySimFolder/\")\n\n# or simply use\njulia> info = getinfo(420, \"../MySimFolder/\")\n\n\n\n# get an overview of the returned field-names\njulia> propertynames(info)\n\n# a more detailed overview\njulia> viewfields(info)\njulia> viewallfields(info)\njulia> namelist(info)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getmass-Tuple{HydroDataType}","page":"API Documentation","title":"Mera.getmass","text":"Get mass-array from the dataset (cells/particles/clumps/...):\n\ngetmass(dataobject::HydroDataType)\ngetmass(dataobject::PartDataType)\ngetmass(dataobject::ClumpDataType)\n\nreturn Array{Float64,1}\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getparticles-Tuple{InfoType, Symbol}","page":"API Documentation","title":"Mera.getparticles","text":"Read the particle-data\n\nselect variables\nlimit to a maximum range\nprint the name of each data-file before reading it\ntoggle verbose mode\ntoggle progress bar\npass a struct with arguments (myargs)\n\ngetparticles(       dataobject::InfoType;\n                    lmax::Real=dataobject.levelmax,\n                    vars::Array{Symbol,1}=[:all],\n                    stars::Bool=true,\n                    xrange::Array{<:Any,1}=[missing, missing],\n                    yrange::Array{<:Any,1}=[missing, missing],\n                    zrange::Array{<:Any,1}=[missing, missing],\n                    center::Array{<:Any,1}=[0., 0., 0.],\n                    range_unit::Symbol=:standard,\n                    presorted::Bool=true,\n                    print_filenames::Bool=false,\n                    verbose::Bool=verbose_mode,\n                    show_progress::Bool=true,\n                    myargs::ArgumentsType=ArgumentsType() )\n\nReturns an object of type PartDataType, containing the particle-data table, the selected and the simulation ScaleType and summary of the InfoType\n\nreturn PartDataType()\n\n# get an overview of the returned fields:\n# e.g.:\njulia> info = getinfo(100)\njulia> particles  = getparticles(info)\njulia> viewfields(particles)\n#or:\njulia> fieldnames(particles)\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"InfoType\", created by the function getinfo\n\nPredefined/Optional Keywords:\n\nlmax: not defined\nstars: not defined\nvar(s): the selected particle variables in arbitrary order: :all (default), :cpu, :mass, :vx, :vy, :vz, :birth :metals, ...\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\npresorted: presort data according to the key vars (by default)\nprint_filenames: print on screen the current processed particle file of each CPU\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nshow_progress: print progress bar on screen\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of lmax not!, xrange, yrange, zrange, center, rangeunit, verbose, showprogress\n\nDefined Methods - function defined for different arguments\n\ngetparticles( dataobject::InfoType; ...) # no given variables -> all variables loaded\ngetparticles( dataobject::InfoType, var::Symbol; ...) # one given variable -> no array needed\ngetparticles( dataobject::InfoType, vars::Array{Symbol,1}; ...)  # several given variables -> array needed\n\nExamples\n\n# read simulation information\njulia> info = getinfo(420)\n\n# Example 1:\n# read particle data of all variables, full-box, all levels\njulia> particles = getparticles(info)\n\n# Example 2:\n# read particle data of all variables\n# data range 20x20x4 kpc; ranges are given in kpc relative to the box (here: 48 kpc) center at 24 kpc\njulia> particles = getparticles( info,\n                                  xrange=[-10., 10.],\n                                  yrange=[-10., 10.],\n                                  zrange=[-2., 2.],\n                                  center=[24., 24., 24.],\n                                  range_unit=:kpc )\n\n# Example 3:\n# give the center of the box by simply passing: center = [:bc] or center = [:boxcenter]\n# this is equivalent to center=[24.,24.,24.] in Example 2\n# the following combination is also possible: e.g. center=[:bc, 12., 34.], etc.\njulia> particles = getparticles(    info,\n                                    xrange=[-10.,10.],\n                                    yrange=[-10.,10.],\n                                    zrange=[-2.,2.],\n                                    center=[33., bc:, 10.],\n                                    range_unit=:kpc )\n\n# Example 4:\n# read particle data of the variables mass and the birth-time, full-box, all levels\njulia> particles = getparticles( info, [:mass, :birth] ) # use array for the variables\n\n# Example 5:\n# read particle data of the single variable mass, full-box, all levels\njulia> particles = getparticles( info, :mass ) # no array for a single variable needed\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getpositions-Tuple{DataSetType, Symbol}","page":"API Documentation","title":"Mera.getpositions","text":"Get the x,y,z positions from the dataset (cells/particles/clumps/...):\n\ngetpositions( dataobject::DataSetType;\n                    unit::Symbol=:standard,\n                    direction::Symbol=:z,\n                    center::Array{<:Any,1}=[0., 0., 0.],\n                    center_unit::Symbol=:standard)\n\nreturn x, y, z\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\n\nPredefined/Optional Keywords:\n\ncenter: in unit given by argument center_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\ncenter_unit: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ndirection: todo\nunit: return the variables in given unit\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\nDefined Methods - function defined for different arguments\n\ngetpositions( dataobject::DataSetType; ...) # one given variable\ngetpositions( dataobject::DataSetType, unit::Symbol; ...) # one given variable with its unit\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.gettime-Tuple{Real, String, Symbol}","page":"API Documentation","title":"Mera.gettime","text":"Get physical time in selected units\n\nreturns Float\n\ngettime(output::Real; path::String=\"./\", unit::Symbol=:standard)\ngettime(dataobject::DataSetType; unit::Symbol=:standard)\ngettime(dataobject::InfoType, unit::Symbol=:standard)\n\nreturn time\n\nArguments Function 1\n\nRequired:\n\noutput: give the output-number of the simulation\n\nPredefined/Optional Keywords:\n\npath: the path to the output folder relative to the current folder or absolute path\nunit: return the variable in given unit\n\nArguments Function 2\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\n\nPredefined/Optional Keywords:\n\nunit: return the variable in given unit\n\nArguments Function 3\n\nRequired:\n\ndataobject: needs to be of type: \"InfoType\"\n\nPredefined/Optional Keywords:\n\nunit: return the variable in given unit\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.getvar-Tuple{DataSetType, Symbol}","page":"API Documentation","title":"Mera.getvar","text":"Get variables or derived quantities from the dataset:\n\noverview the list of predefined quantities with: getinfo()\nselect variable(s) and their unit(s)\ngive the spatial center (with units) of the data within the box (relevant e.g. for radius dependency)\nrelate the coordinates to a direction (x,y,z)\npass a modified database\npass a mask to exclude elements (cells/particles/...) from the calculation\n\ngetvar(   dataobject::DataSetType, var::Symbol;\n        filtered_db::JuliaDB.AbstractIndexedTable=JuliaDB.table([1]),\n        center::Array{<:Any,1}=[0.,0.,0.],\n        center_unit::Symbol=:standard,\n        direction::Symbol=:z,\n        unit::Symbol=:standard,\n        mask::MaskType=[false],\n        ref_time::Real=dataobject.info.time)\n\nreturn Array{Float64,1}\n\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\nvar(s): select a variable from the database or a predefined quantity (see field: info, function getvar(), dataobject.data)\n\nPredefined/Optional Keywords:\n\nfiltered_db: pass a filtered or manipulated database together with the corresponding DataSetType object (required argument)\ncenter: in units given by argument center_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\ncenter_unit: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ndirection: todo\nunit(s): return the variable in given units\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\nref_time: reference zero-time for particle age calculation\n\nDefined Methods - function defined for different arguments\n\ngetvar(   dataobject::DataSetType, var::Symbol; ...) # one given variable -> returns 1d array\ngetvar(   dataobject::DataSetType, var::Symbol, unit::Symbol; ...) # one given variable with its unit -> returns 1d array\ngetvar(   dataobject::DataSetType, vars::Array{Symbol,1}; ...) # several given variables -> array needed -> returns dictionary with 1d arrays\ngetvar(   dataobject::DataSetType, vars::Array{Symbol,1}, units::Array{Symbol,1}; ...) # several given variables and their corresponding units -> both arrays -> returns dictionary with 1d arrays\ngetvar(   dataobject::DataSetType, vars::Array{Symbol,1}, unit::Symbol; ...) # several given variables that have the same unit -> array for the variables and a single Symbol for the unit -> returns dictionary with 1d arrays\n\nExamples\n\n```julia\n\nread simulation information\n\njulia> info = getinfo(420) julia> gas = gethydro(info)\n\nExample 1: get the mass for each cell of the hydro data (1dim array)\n\nmass1 = getvar(gas, :mass)  # in [code units] mass = getvar(gas, :mass) * gas.scale.Msol # scale the result from code units to solar masses mass = getvar(gas, :mass, unit=:Msol) # unit calculation, provided by a keyword argument mass = getvar(gas, :mass, :Msol) # unit calculation provided by an argument\n\nExample 2: get the mass and |v| (several variables) for each cell of the hydro data\n\nquantities = getvar(gas, [:mass, :v]) # in [code units] returns: Dict{Any,Any} with 2 entries:   :mass => [8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8…   :v => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  2.28274e-7, 2.…\n\nquantities = getvar(gas, [:mass, :v], units=[:Msol, :kms]) # unit calculation, provided by a keyword argument quantities = getvar(gas, [:mass, :v], [:Msol, :kms]) # unit calculation provided by an argument\n\nExample 3: get several variables in the same units by providing a single argument\n\nquantities = getvar(gas, [:vx, :vy, :vz], :km_s) ...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.histogram2d-Tuple{DataSetType, Vector{Vector{Float64}}}","page":"API Documentation","title":"Mera.histogram2d","text":"2d histogram of 2 given arrays or derived quantities (calculations based on StatsBase.jl)\n\npass two 1d data arrays\nor give the quantity with units\ncostum/automatic data ranges (left-/right-closed)\nbinsizes\ngive quantity for weighting with units\npass a mask to exclude elements (cells/particles/...) from the calculation\ntoggle verbose mode\n\nhistogram2d(dataobject::DataSetType, data::Array{Array{Float64,1},1};\n                        xrange::Array{<:Any,1}=[missing, missing],\n                        yrange::Array{<:Any,1}=[missing, missing],\n                        nbins::Array{Int,1}=[100,100],\n                        weight::Tuple{Symbol,Symbol}=(:mass,:Msol),\n                        closed::Symbol=:left,\n                        mask=[false],\n                        mode::Symbol=:none,\n                        verbose::Bool=verbose_mode)\n\nreturn Histogram2DMapType\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\ndata: provide two 1d data arrays for axis [x,y]\n\nPredefined/Optional Keywords:\n\nxrange: the considered interval [xmin, xmax] in units of the given x-axis data\nyrange: the considered interval [ymin, ymax] in units of the given y-axis data\nclosed: bin intervals :left [a,b)  or :right (a,b] closed\nnbins: number of bins for x- and y-axis\nweight: give a tuple with the quantity und unit that is used for weighting (see getvar() for possible derived quantities)\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\nmode: see Histogram from StatsBase.jl:\n\n:pdf: Normalize by sum of weights and bin sizes. Resulting histogram  has norm 1 and represents a PDF.\n:density: Normalize by bin sizes only. Resulting histogram represents  count density of input and does not have norm 1. Will not modify the  histogram if it already represents a density.\n:probability: Normalize by sum of weights only. Resulting histogram  represents the fraction of probability mass for each bin and does not have  norm 1.\n:none: Leaves histogram unchanged. Useful to simplify code that has to  conditionally apply different modes of normalization.\n\n\n\nDefined Methods - function defined for different arguments\n\nhistogram2d(dataobject::DataSetType, data::Array{Array{Float64,1},1}; ...) # enclose two 1d arrays in an array -> [xdata, ydata], ...\nhistogram2d(dataobject::DataSetType, data1::Array{<:Number,1}, data2::Array{<:Number,1}; ...) # give two 1d arrays separately without keywords -> xdata, ydata,...\nhistogram2d(dataobject::DataSetType, data1::Array{<:Number,1}, data2::Array{<:Number,1}, xrange::Array{<:Any,1}, yrange::Array{<:Any,1}; ...) # give two 1d arrays separately and the intervals without keywords -> xdata, ydata, [xmin,xmax], [ymin,ymax],...\nhistogram2d(dataobject::DataSetType, data::Array{Tuple{Symbol,Symbol},1}; ...) # give the quantity names with units for the 2 data components in a tuple (default: assumes linear scale) -> ((:rho, :Msolpc3), (:cs, :kms)), ....\nhistogram2d(dataobject::DataSetType, data::Array{Tuple{Symbol,Symbol,Symbol},1}; ...) # give the quantity names with units and scaling (:linear or :log10) for the 2 data components in a tuple -> ((:rho, :Msolpc3, :log10), (:cs, :kms, :log10)), ....\n\nShort summary how to give the data and ranges (keep order):\n\nhistogram2d( dataobject, [xdata, ydata], ...)\nhistogram2d( dataobject,  xdata, ydata,  ...)\nhistogram2d( dataobject,  xdata, ydata, [xmin,xmax], [ymin,ymax], ...)\nhistogram2d( dataobject, ((:rho, :nH), (:cs, :km_s)), ....)\nhistogram2d( dataobject, ((:rho, :nH, :log10), (:cs, :km_s, :log10)), ....)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.humanize-Tuple{Float64, ScalesType, Int64, String}","page":"API Documentation","title":"Mera.humanize","text":"Convert a value to human-readable astrophysical units and round to ndigits\n\n(pass the value in code units and the quantity specification (length, time) )\n\nfunction humanize(value::Float64, scale::ScalesType, ndigits::Int, quantity::String)\n\nreturn value, value_unit\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.makefile-Tuple{InfoType}","page":"API Documentation","title":"Mera.makefile","text":"Get a printout of the makefile:\n\nmakefile(object::InfoType)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.msum-Tuple{ContainMassDataSetType, Symbol}","page":"API Documentation","title":"Mera.msum","text":"Calculate the total mass of any ContainMassDataSetType:\n\nmsum(dataobject::ContainMassDataSetType; unit::Symbol=:standard, mask::MaskType=[false])\n\nreturn Float64\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"ContainMassDataSetType\"\n\nOptional Keywords:\n\nunit: the unit of the result (can be used w/o keyword): :standard (code units)  :Msol, :Mearth, :Mjupiter, :g, :kg  (of typye Symbol) ..etc. ; see for defined mass-scales viewfields(info.scale)\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.patchfile-Tuple{InfoType}","page":"API Documentation","title":"Mera.patchfile","text":"Get a printout of the patchfile:\n\npatchfile(object::InfoType)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.printtime","page":"API Documentation","title":"Mera.printtime","text":"print a Mera timestamp on the screen if the global variable: verbose_mode == true\n\nfunction printtime(text::String=\"\", verbose::Bool=verbose_mode)\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.projection-Tuple{HydroDataType, Symbol}","page":"API Documentation","title":"Mera.projection","text":"Project variables or derived quantities from the hydro-dataset:\n\nprojection to a grid related to the maximum level of the loaded data\noverview the list of predefined quantities with: projection()\nselect variable(s) and their unit(s)\nlimit to a maximum range\nselect a coarser grid than the maximum resolution of the loaded data (maps with both resolutions are created)\ngive the spatial center (with units) of the data within the box (relevant e.g. for radius dependency)\nrelate the coordinates to a direction (x,y,z)\nselect between mass (default) and volume weighting\npass a mask to exclude elements (cells/particles/...) from the calculation\ntoggle verbose mode\ntoggle progress bar\npass a struct with arguments (myargs)\n\nprojection(   dataobject::HydroDataType, vars::Array{Symbol,1};\n                        units::Array{Symbol,1}=[:standard],\n                        lmax::Real=dataobject.lmax,\n                        mask=[false],\n                        direction::Symbol=:z,\n                        weighting::Symbol=:mass,\n                        xrange::Array{<:Any,1}=[missing, missing],\n                        yrange::Array{<:Any,1}=[missing, missing],\n                        zrange::Array{<:Any,1}=[missing, missing],\n                        center::Array{<:Any,1}=[0., 0., 0.],\n                        range_unit::Symbol=:standard,\n                        data_center::Array{<:Any,1}=[missing, missing, missing],\n                        data_center_unit::Symbol=:standard,\n                        verbose::Bool=verbose_mode,\n                        show_progress::Bool=true,\n                        myargs::ArgumentsType=ArgumentsType() )\n\nreturn HydroMapsType\n\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"HydroDataType\"\nvar(s): select a variable from the database or a predefined quantity (see field: info, function projection(), dataobject.data)\n\nPredefined/Optional Keywords:\n\nunit(s): return the variable in given units\nlmax: create maps with coarser grid than provided by the maximum level of the loaded data\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\nweighting: select between :mass weighting (default) and :volume weighting\ndata_center: to calculate the data relative to the datacenter; in units given by argument `datacenterunit`; by default the argument datacenter = center ;\ndata_center_unit: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ndirection: select between: :x, :y, :z\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\nshow_progress: print progress bar on screen\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of lmax, xrange, yrange, zrange, center, rangeunit, verbose, showprogress\n\nDefined Methods - function defined for different arguments\n\nprojection( dataobject::HydroDataType, var::Symbol; ...) # one given variable\nprojection( dataobject::HydroDataType, var::Symbol, unit::Symbol; ...) # one given variable with its unit\nprojection( dataobject::HydroDataType, vars::Array{Symbol,1}; ...) # several given variables -> array needed\nprojection( dataobject::HydroDataType, vars::Array{Symbol,1}, units::Array{Symbol,1}; ...) # several given variables and their corresponding units -> both arrays\nprojection( dataobject::HydroDataType, vars::Array{Symbol,1}, unit::Symbol; ...)  # several given variables that have the same unit -> array for the variables and a single Symbol for the unit\n\nExamples\n\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.projection-Tuple{PartDataType, Vector{Symbol}}","page":"API Documentation","title":"Mera.projection","text":"Project variables or derived quantities from the particle-dataset:\n\nprojection to a grid related to a given level\noverview the list of predefined quantities with: projection()\nselect variable(s) and their unit(s)\nlimit to a maximum range\ngive the spatial center (with units) of the data within the box (relevant e.g. for radius dependency)\nrelate the coordinates to a direction (x,y,z)\nselect between mass (default) and volume weighting\npass a mask to exclude elements (cells/particles/...) from the calculation\ntoggle verbose mode\ntoggle progress bar\npass a struct with arguments (myargs)\n\nprojection(   dataobject::PartDataType, vars::Array{Symbol,1};\n                units::Array{Symbol,1}=[:standard],\n                lmax::Int=9,\n                mask=[false],\n                direction::Symbol=:z,\n                weighting::Symbol=:mass,\n                xrange::Array{<:Any,1}=[missing, missing],\n                yrange::Array{<:Any,1}=[missing, missing],\n                zrange::Array{<:Any,1}=[missing, missing],\n                center::Array{<:Any,1}=[0., 0., 0.],\n                range_unit::Symbol=:standard,\n                data_center::Array{<:Any,1}=[missing, missing, missing],\n                data_center_unit::Symbol=:standard,\n                ref_time::Real=dataobject.info.time,\n                verbose::Bool=verbose_mode,\n                show_progress::Bool=true,\n                myargs::ArgumentsType=ArgumentsType()  )\n\nreturn HydroMapsType\n\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"PartDataType\"\nvar(s): select a variable from the database or a predefined quantity (see field: info, function projection(), dataobject.data)\n\nPredefined/Optional Keywords:\n\nunit(s): return the variable in given units\nlmax: create maps with coarser grid than provided by the maximum level of the loaded data\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\nweighting: select between :mass weighting (default) and :volume weighting\ndata_center: to calculate the data relative to the datacenter; in units given by argument `datacenterunit`; by default the argument datacenter = center ;\ndata_center_unit: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ndirection: select between: :x, :y, :z\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the database (rows)\nref_time: the age quantity relative to a given time (code_units); default relative to the loaded snapshot time\nshow_progress: print progress bar on screen\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of lmax, xrange, yrange, zrange, center, rangeunit, verbose, showprogress\n\nDefined Methods - function defined for different arguments\n\nprojection( dataobject::PartDataType, var::Symbol; ...) # one given variable\nprojection( dataobject::PartDataType, var::Symbol, unit::Symbol; ...) # one given variable with its unit\nprojection( dataobject::PartDataType, vars::Array{Symbol,1}; ...) # several given variables -> array needed\nprojection( dataobject::PartDataType, vars::Array{Symbol,1}, units::Array{Symbol,1}; ...) # several given variables and their corresponding units -> both arrays\nprojection( dataobject::PartDataType, vars::Array{Symbol,1}, unit::Symbol; ...)  # several given variables that have the same unit -> array for the variables and a single Symbol for the unit\n\nExamples\n\n...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.remap-Tuple{DataMapsType, Real}","page":"API Documentation","title":"Mera.remap","text":"Remap projected data of DataMapsType onto a coarser grid:\n\nselect the level of the coarser grid\nselect the weighting\ntoggle verbose mode\ntoggle progress bar\n\nremap(dataobject::DataMapsType, lmax::Real; weighting::Symbol=:volume, verbose::Bool=verbose_mode)\n\nreturn DataMapsType\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataMapsType\", e.g. created by the function projection\nlmax: the level of the coarser grid to be created\n\nPredefined/Optional Keywords:\n\nweighting: choose between: :volume, :mass\nverbose: print the dimensions/pixel size of the provided and created maps on screen; default: set by the variable verbose_mode\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.shellregion","page":"API Documentation","title":"Mera.shellregion","text":"Cutout sub-regions of the data base of DataSetType\n\nselect shape of a shell-region\nselect size of a region (with or w/o intersecting cells)\ngive the spatial center (with units) of the data relative to the full box\nrelate the coordinates to a direction (x,y,z)\ninverse the selected region\npass a struct with arguments (myargs)\n\nshellregion(dataobject::DataSetType, shape::Symbol=:cylinder;\n            radius::Array{<:Real,1}=[0.,0.],  # cylinder, sphere;\n            height::Real=0.,                  # cylinder\n            direction::Symbol=:z,             # cylinder\n\n            center::Array{<:Any,1}=[0., 0., 0.],   # all\n            range_unit::Symbol=:standard,  # all\n            cell::Bool=true,                        # hydro and gravity\n            inverse::Bool=false,                    # all\n            verbose::Bool=verbose_mode,             # all\n            myargs::ArgumentsType=ArgumentsType() ) # all\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\nshape: select between region shapes: :cylinder/:disc, :sphere\n\nPredefined/Optional Keywords:\n\nFor cylindrical shell-region, related to a given center:\n\nradius: the inner and outer radius of the shell in units given by argument range_unit and relative to the given center\nheight: the hight above and below a plane [-height, height] in units given by argument range_unit and relative to the given center\ndirection: todo\n\nFor spherical shell-region, related to a given center:\n\nradius: the inner and outer radius of the shell in units given by argument range_unit and relative to the given center\n\nKeywords related to all region shapes\n\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\ninverse: inverse the region selection = get the data outside of the region\ncell: take intersecting cells of the region boarder into account (true) or only the cells-centers within the selected region (false)\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of radius, height, direction, center, range_unit, verbose\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.storageoverview-Tuple{InfoType, Bool}","page":"API Documentation","title":"Mera.storageoverview","text":"Print overview of the used storage per file type for a given timestep\n\nfunction storageoverview(dataobject::InfoType, verbose::Bool=true)\nfunction storageoverview(dataobject::InfoType; verbose::Bool=true)\n\nreturn dictionary in bytes\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.subregion","page":"API Documentation","title":"Mera.subregion","text":"Cutout sub-regions of the data base of DataSetType\n\nselect shape of a region\nselect size of a region (with or w/o intersecting cells)\ngive the spatial center (with units) of the data relative to the full box\nrelate the coordinates to a direction (x,y,z)\ninverse the selected region\npass a struct with arguments (myargs)\n\nsubregion(dataobject::DataSetType, shape::Symbol=:cuboid;\n            xrange::Array{<:Any,1}=[missing, missing],  # cuboid\n            yrange::Array{<:Any,1}=[missing, missing],  # cuboid\n            zrange::Array{<:Any,1}=[missing, missing],  # cuboid\n\n            radius::Real=0.,              # cylinder, sphere\n            height::Real=0.,              # cylinder\n            direction::Symbol=:z,         # cylinder\n\n            center::Array{<:Any,1}=[0.,0.,0.],     # all\n            range_unit::Symbol=:standard,           # all\n            cell::Bool=true,                        # hydro and gravity\n            inverse::Bool=false,                    # all\n            verbose::Bool=verbose_mode,             # all\n            myargs::ArgumentsType=ArgumentsType() ) # all\n\nArguments\n\nRequired:\n\ndataobject: needs to be of type: \"DataSetType\"\nshape: select between region shapes: :cuboid, :cylinder/:disc, :sphere\n\nPredefined/Optional Keywords:\n\nFor cuboid region, related to a given center:\n\nxrange: the range between [xmin, xmax] in units given by argument range_unit and relative to the given center; zero length for xmin=xmax=0. is converted to maximum possible length\nyrange: the range between [ymin, ymax] in units given by argument range_unit and relative to the given center; zero length for ymin=ymax=0. is converted to maximum possible length\nzrange: the range between [zmin, zmax] in units given by argument range_unit and relative to the given center; zero length for zmin=zmax=0. is converted to maximum possible length\n\nFor cylindrical region, related to a given center:\n\nradius: the radius between [0., radius] in units given by argument range_unit and relative to the given center\nheight: the hight above and below a plane [-height, height] in units given by argument range_unit and relative to the given center\ndirection: todo\n\nFor spherical region, related to a given center:\n\nradius: the radius between [0., radius] in units given by argument range_unit and relative to the given center\n\nKeywords related to all region shapes\n\nrange_unit: the units of the given ranges: :standard (code units), :Mpc, :kpc, :pc, :mpc, :ly, :au , :km, :cm (of typye Symbol) ..etc. ; see for defined length-scales viewfields(info.scale)\ncenter: in units given by argument range_unit; by default [0., 0., 0.]; the box-center can be selected by e.g. [:bc], [:boxcenter], [value, :bc, :bc], etc..\ninverse: inverse the region selection = get the data outside of the region\ncell: take intersecting cells of the region boarder into account (true) or only the cells-centers within the selected region (false)\nverbose: print timestamp, selected vars and ranges on screen; default: set by the variable verbose_mode\nmyargs: pass a struct of ArgumentsType to pass several arguments at once and to overwrite default values of xrange, yrange, zrange, radius, height, direction, center, range_unit, verbose\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.timerfile-Tuple{InfoType}","page":"API Documentation","title":"Mera.timerfile","text":"Get a printout of the timerfile:\n\ntimerfile(object::InfoType)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.usedmemory","page":"API Documentation","title":"Mera.usedmemory","text":"Get the memory that is used for an object in human-readable units\n\nfunction usedmemory(object, verbose::Bool=true)\nreturn value, unit\n\n\n\n\n\n","category":"function"},{"location":"api/#Mera.viewallfields-Tuple{InfoType}","page":"API Documentation","title":"Mera.viewallfields","text":"Get a detailed overview of many fields from the MERA InfoType:\n\nviewallfields(dataobject::InfoType)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.viewfields-Tuple{InfoType}","page":"API Documentation","title":"Mera.viewfields","text":"Get an overview of the fields from MERA composite types:\n\nviewfields(object)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.viewmodule-Tuple{Module}","page":"API Documentation","title":"Mera.viewmodule","text":"Get a list of all exported Mera types and functions:\n\nfunction viewmodule(modulename::Module)\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.wstat-Tuple{Vector{var\"#s56\"} where var\"#s56\"<:Real, Vector{var\"#s55\"} where var\"#s55\"<:Real}","page":"API Documentation","title":"Mera.wstat","text":"Calculate statistical values w/o weighting of any Array:\n\nwstat(array::Array{<:Real,1}; weight::Array{<:Real,1}=[1.], mask::MaskType=[false])\n\nWStatType(mean, median, std, skewness, kurtosis, min, max)\n\nArguments\n\nRequired:\n\narray: Array needs to be of type: \"<:Real\"\n\nOptional Keywords:\n\nweight: Array needs to be of type: \"<:Real\" (can be used w/o keyword)\nmask: needs to be of type MaskType which is a supertype of Array{Bool,1} or BitArray{1} with the length of the Array\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.createscales!-Tuple{InfoType}","page":"API Documentation","title":"Mera.createscales!","text":"Create an object with predefined scale factors from code to pysical units\n\nfunction createscales!(dataobject::InfoType)\n\nreturn ScalesType\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.prep_cylindrical_shellranges-Tuple{InfoType, Vector{var\"#s49\"} where var\"#s49\", Real, Real, Real, Symbol, Bool}","page":"API Documentation","title":"Mera.prep_cylindrical_shellranges","text":"cylindrical shell ranges convert given ranges + radius and print overview on screen used for shellregions...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.prep_spherical_shellranges-Tuple{InfoType, Vector{var\"#s50\"} where var\"#s50\", Real, Real, Symbol, Bool}","page":"API Documentation","title":"Mera.prep_spherical_shellranges","text":"spherical shell ranges convert given ranges + radius and print overview on screen used for shellregions...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.prepranges-Tuple{InfoType, Symbol, Bool, Vector{var\"#s37\"} where var\"#s37\", Vector{var\"#s36\"} where var\"#s36\", Vector{var\"#s35\"} where var\"#s35\", Vector{var\"#s34\"} where var\"#s34\"}","page":"API Documentation","title":"Mera.prepranges","text":"cuboid ranges convert given ranges and print overview on screen used for gethydro, getparticles, getgravity, getclumps..., subregions...\n\n\n\n\n\n","category":"method"},{"location":"api/#Mera.prepranges-Tuple{InfoType, Vector{var\"#s51\"} where var\"#s51\", Real, Real, Symbol, Bool}","page":"API Documentation","title":"Mera.prepranges","text":"cylinder ranges (height != 0.), sphere ranges (height==0.) convert given ranges + radius and print overview on screen used for subregions...\n\n\n\n\n\n","category":"method"},{"location":"02_particles_Load_Selections/#.-Particles:-Load-Selected-Variables-and-Data-Ranges-1","page":"Particles","title":"2. Particles: Load Selected Variables and Data Ranges","text":"","category":"section"},{"location":"02_particles_Load_Selections/#Simulation-Overview-1","page":"Particles","title":"Simulation Overview","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"using Mera\ninfo = getinfo(1, \"../../testing/simulations/manu_stable_2019\");","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-08T13:43:41.281\u001b\n\nCode: RAMSES\noutput [1] summary:\nmtime: 2020-01-04T21:08:11.996\nctime: 2020-01-04T21:08:11.996\n\u001b =======================================================\u001b\nsimulation time: 0.0 [x]\nboxlen: 100.0 [kpc]\nncpu: 32\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 8 - 10 --> cellsize(s): 390.63 [pc] - 97.66 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :pressure, :metallicity, :scalar_01)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Nstars:   1.050000e+05\n- Ndm:      9.993500e+04\nparticle variables: (:vx, :vy, :vz, :mass, :family, :tag, :birth, :metals)\nparticle-descriptor: (:position_x, :position_y, :position_z, :velocity_x, :velocity_y, :velocity_z, :mass, :identity, :levelp, :family, :tag, :birth_time, :metallicity)\n-------------------------------------------------------\nclumps:        false\n-------------------------------------------------------\nnamelist-file: (\"&AMR_PARAMS\", \"&OUTPUT_PARAMS\", \"&BOUNDARY_PARAMS\", \"&POISSON_PARAMS\", \"&RUN_PARAMS\", \"&HYDRO_PARAMS\", \"&cooling_params\", \"&sf_params\", \"&feedback_params\", \"&DICE_PARAMS\", \"&units_params\", \"&INIT_PARAMS\", \"\", \"&REFINE_PARAMS\", \"!&PHYSICS_PARAMS\")\n-------------------------------------------------------\ntimer-file:       true\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"02_particles_Load_Selections/#Select-Variables-1","page":"Particles","title":"Select Variables","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Choose from the existing particle variables listed in the simulation-info. The functions in Mera \"know\" the predefined particle variable names:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"From >= ramses-version-2018: :vx, :vy, :vz, :mass, :family, :tag, :birth, :metals :var9,....\nFor  =< ramses-version-2017: :vx, :vy, :vz, :mass, :birth, :var6, :var7,....\nCurrently, the following variables are loaded by default (if exist): :level, :x, :y, :z, :id, :family, :tag.\nThe cpu number associated with the particles can be loaded with the variable names: :cpu or :varn1\nIn a future version the variable names from the particle descriptor can be used by setting the field info.descriptor.useparticles = true .","category":"page"},{"location":"02_particles_Load_Selections/#Read-all-variables-by-default-1","page":"Particles","title":"Read all variables by default","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(info);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:43:54.032\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\n\nFound 2.049350e+05 particles\nMemory used for data table :16.027705192565918 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles.data","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Table with 204935 rows, 13 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int32\n2   x        Float64\n3   y        Float64\n4   z        Float64\n5   id       Int8\n6   family   Int32\n7   tag      Int8\n8   vx       Float64\n9   vy       Float64\n10  vz       Float64\n11  mass     Float64\n12  birth    Float64\n13  metals   Float64","category":"page"},{"location":"02_particles_Load_Selections/#Select-several-variables-w/o-a-keyword-1","page":"Particles","title":"Select several variables w/o a keyword","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_a = getparticles(info, vars=[:mass, :birth]);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:01.662\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(4, 7) = (:mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\n\nFound 2.049350e+05 particles\nMemory used for data table :9.773184776306152 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"The same variables can be read by using the var-number:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_a = getparticles(info, vars=[:var4, :var7]);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:03.329\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(4, 7) = (:mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\n\nFound 2.049350e+05 particles\nMemory used for data table :9.773184776306152 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"A keyword argument for the variables is not needed if the following order is preserved: InfoType-object, variables:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_a = getparticles(info, [:mass, :birth]);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:03.984\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(4, 7) = (:mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\n\nFound 2.049350e+05 particles\nMemory used for data table :9.773184776306152 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_a.data","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Table with 204935 rows, 9 columns:\n level  \u001b  x         \u001b  y        \u001b  z        \u001b  id  \u001b  family    \u001b  tag  \u001b mass         birth\n────────────────────────────────────────────────────────────────────────\n8      0.162018  48.7716  38.9408  1   13076927  0    0.000359393  0.0\n8      0.241993  43.34    61.1182  1   13057738  0    0.000359393  0.0\n8      0.351147  47.5691  46.5596  1   13020347  0    0.000359393  0.0\n8      0.530987  55.3409  40.0985  1   13057752  0    0.000359393  0.0\n8      0.711498  41.6374  46.4307  1   13020736  0    0.000359393  0.0\n8      0.75967   58.6955  37.0071  1   13076417  0    0.000359393  0.0\n8      0.780296  35.406   50.9124  1   13065542  0    0.000359393  0.0\n8      0.882309  38.8843  54.2554  1   13008907  0    0.000359393  0.0\n8      0.89698   61.4106  60.336   1   13076479  0    0.000359393  0.0\n8      0.979073  44.4677  63.8858  1   13051722  0    0.000359393  0.0\n8      1.04498   40.9592  69.235   1   13003955  0    0.000359393  0.0\n8      1.18224   51.4781  50.0146  1   13089657  0    0.000359393  0.0\n⋮\n8      99.3534   53.6374  56.8546  1   13009482  0    0.000359393  0.0\n8      99.3742   42.8799  68.9125  1   13089718  0    0.000359393  0.0\n8      99.4208   33.6806  60.4349  1   13057697  0    0.000359393  0.0\n8      99.6151   54.8829  36.4236  1   13057437  0    0.000359393  0.0\n8      99.6609   47.92    50.0631  1   13089673  0    0.000359393  0.0\n8      99.6624   40.7391  56.939   1   13066194  0    0.000359393  0.0\n8      99.7309   58.3593  37.43    1   13050186  0    0.000359393  0.0\n8      99.8277   51.3123  55.7462  1   13081505  0    0.000359393  0.0\n8      99.8709   42.983   59.9095  1   13066188  0    0.000359393  0.0\n8      99.8864   49.9097  51.638   1   13008893  0    0.000359393  0.0\n8      99.9239   45.4416  37.0604  1   13057426  0    0.000359393  0.0","category":"page"},{"location":"02_particles_Load_Selections/#Select-one-variable-1","page":"Particles","title":"Select one variable","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"In this case, no array and keyword is necessary, but preserve the following order: InfoType-object, variable:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_c = getparticles(info, :vx );","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:05.126\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1,) = (:vx,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 100.0 [kpc]\n\nFound 2.049350e+05 particles\nMemory used for data table :8.209554672241211 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles_c.data","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Table with 204935 rows, 8 columns:\n level  \u001b  x         \u001b  y        \u001b  z        \u001b  id  \u001b  family    \u001b  tag  \u001b vx\n────────────────────────────────────────────────────────────────\n8      0.162018  48.7716  38.9408  1   13076927  0    0.127661\n8      0.241993  43.34    61.1182  1   13057738  0    -0.329024\n8      0.351147  47.5691  46.5596  1   13020347  0    -0.849745\n8      0.530987  55.3409  40.0985  1   13057752  0    -0.0592976\n8      0.711498  41.6374  46.4307  1   13020736  0    -0.471851\n8      0.75967   58.6955  37.0071  1   13076417  0    0.982907\n8      0.780296  35.406   50.9124  1   13065542  0    -0.356155\n8      0.882309  38.8843  54.2554  1   13008907  0    -1.44461\n8      0.89698   61.4106  60.336   1   13076479  0    -0.50173\n8      0.979073  44.4677  63.8858  1   13051722  0    -0.285347\n8      1.04498   40.9592  69.235   1   13003955  0    0.0818029\n8      1.18224   51.4781  50.0146  1   13089657  0    -0.984195\n⋮\n8      99.3534   53.6374  56.8546  1   13009482  0    -0.442525\n8      99.3742   42.8799  68.9125  1   13089718  0    0.187082\n8      99.4208   33.6806  60.4349  1   13057697  0    -0.801086\n8      99.6151   54.8829  36.4236  1   13057437  0    -0.0448441\n8      99.6609   47.92    50.0631  1   13089673  0    -1.80605\n8      99.6624   40.7391  56.939   1   13066194  0    -0.254425\n8      99.7309   58.3593  37.43    1   13050186  0    0.39214\n8      99.8277   51.3123  55.7462  1   13081505  0    0.422148\n8      99.8709   42.983   59.9095  1   13066188  0    -2.84491\n8      99.8864   49.9097  51.638   1   13008893  0    -1.36332\n8      99.9239   45.4416  37.0604  1   13057426  0    -0.108421","category":"page"},{"location":"02_particles_Load_Selections/#Selected-Spatial-Ranges-1","page":"Particles","title":"Selected Spatial Ranges","text":"","category":"section"},{"location":"02_particles_Load_Selections/#Use-RAMSES-Standard-Notation-1","page":"Particles","title":"Use RAMSES Standard Notation","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Ranges correspond to the domain [0:1]^3 and are related to the box corner at [0., 0., 0.] by default.","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[0.2,0.8],\n                            yrange=[0.2,0.8],\n                            zrange=[0.4,0.6]);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:07.416\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 20.0 [kpc] :: 80.0 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 20.0 [kpc] :: 80.0 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 40.0 [kpc] :: 60.0 [kpc]\n\nFound 1.753150e+05 particles\nMemory used for data table :13.711382865905762 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"The loaded data ranges are assigned to the field ranges as an array in  RAMSES standard notation (domain: [0:1]^3):","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles.ranges","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"6-element Array{Float64,1}:\n 0.2\n 0.8\n 0.2\n 0.8\n 0.4\n 0.6","category":"page"},{"location":"02_particles_Load_Selections/#Ranges-relative-to-a-given-center:-1","page":"Particles","title":"Ranges relative to a given center:","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[-0.3, 0.3],\n                            yrange=[-0.3, 0.3],\n                            zrange=[-0.1, 0.1],\n                            center=[0.5, 0.5, 0.5]);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:09.718\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ncenter: [0.5, 0.5, 0.5] ==> [50.0 [kpc] :: 50.0 [kpc] :: 50.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 20.0 [kpc] :: 80.0 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 20.0 [kpc] :: 80.0 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 40.0 [kpc] :: 60.0 [kpc]\n\nFound 1.753150e+05 particles\nMemory used for data table :13.711382865905762 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#Use-notation-in-physical-units-1","page":"Particles","title":"Use notation in physical units","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"In the following example the ranges are given in unit \"kpc\", relative to the box corner 0., 0., 0.:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[2.,22.],\n                            yrange=[2.,22.],\n                            zrange=[22.,26.],\n                            range_unit=:kpc);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:11.119\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ndomain:\nxmin::xmax: 0.02 :: 0.22  \t==> 2.0 [kpc] :: 22.0 [kpc]\nymin::ymax: 0.02 :: 0.22  \t==> 2.0 [kpc] :: 22.0 [kpc]\nzmin::zmax: 0.22 :: 0.26  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nFound 1.000000e+00 particles\nMemory used for data table :1.6396484375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"The possible physical length units for the keyword range_unit are defined in the field scale :","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"viewfields(info.scale)  # or e.g.: gas.info.scale","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMsol_pc3\t= 0.9999999999980551\ng_cm3\t= 6.77025430198932e-23\nMsol_pc2\t= 999.9999999987034\ng_cm2\t= 0.20890821919226463\nGyr\t= 0.014907037050462488\nMyr\t= 14.907037050462488\nyr\t= 1.4907037050462488e7\ns\t= 4.70430312423675e14\nms\t= 4.70430312423675e17\nMsol\t= 9.999999999999998e8\nMearth\t= 3.330598439436053e14\nMjupiter\t= 1.0479261167570186e12\ng\t= 1.9890999999999996e42\nkm_s\t= 65.59266058737735\nm_s\t= 65592.66058737735\ncm_s\t= 6.559266058737735e6\nnH\t= 30.996344997059538\nerg\t= 8.557898117221824e55\ng_cms2\t= 2.9128322630389308e-9\nT_mu\t= 517302.3151964531\nBa\t= 2.9128322630389304e-9","category":"page"},{"location":"02_particles_Load_Selections/#Ranges-relative-to-the-given-center-e.g.-in-unit-\"kpc\":-1","page":"Particles","title":"Ranges relative to the given center e.g. in unit \"kpc\":","text":"","category":"section"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[-16.,16.],\n                            yrange=[-16.,16.],\n                            zrange=[-2.,2.],\n                            center=[50.,50.,50.],\n                            range_unit=:kpc);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:11.576\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ncenter: [0.5, 0.5, 0.5] ==> [50.0 [kpc] :: 50.0 [kpc] :: 50.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nymin::ymax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nzmin::zmax: 0.48 :: 0.52  \t==> 48.0 [kpc] :: 52.0 [kpc]\n\nFound 1.295770e+05 particles\nMemory used for data table :10.134612083435059 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Use the short notation for the box center :bc or :boxcenter for all  dimensions (x,y,z):","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[-16.,16.],\n                            yrange=[-16.,16.],\n                            zrange=[-2.,2.],\n                            center=[:boxcenter],\n                            range_unit=:kpc);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:12.793\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ncenter: [0.5, 0.5, 0.5] ==> [50.0 [kpc] :: 50.0 [kpc] :: 50.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nymin::ymax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nzmin::zmax: 0.48 :: 0.52  \t==> 48.0 [kpc] :: 52.0 [kpc]\n\nFound 1.295770e+05 particles\nMemory used for data table :10.134612083435059 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[-16.,16.],\n                            yrange=[-16.,16.],\n                            zrange=[-2.,2.],\n                            center=[:bc],\n                            range_unit=:kpc);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:13.572\u001b\n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ncenter: [0.5, 0.5, 0.5] ==> [50.0 [kpc] :: 50.0 [kpc] :: 50.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nymin::ymax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nzmin::zmax: 0.48 :: 0.52  \t==> 48.0 [kpc] :: 52.0 [kpc]\n\nFound 1.295770e+05 particles\nMemory used for data table :10.134612083435059 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"Use the box center notation for individual dimensions, here x,z:","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"particles = getparticles(  info,\n                            xrange=[-16.,16.],\n                            yrange=[-16.,16.],\n                            zrange=[-2.,2.],\n                            center=[:bc, 50., :bc],\n                            range_unit=:kpc);","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: Get particle data: 2020-02-08T13:44:15.41\u001b \n\nKey vars=(:level, :x, :y, :z, :id, :family, :tag)\nUsing var(s)=(1, 2, 3, 4, 7, 8) = (:vx, :vy, :vz, :mass, :birth, :metallicity)\n\ncenter: [0.5, 0.5, 0.5] ==> [50.0 [kpc] :: 50.0 [kpc] :: 50.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nymin::ymax: 0.34 :: 0.66  \t==> 34.0 [kpc] :: 66.0 [kpc]\nzmin::zmax: 0.48 :: 0.52  \t==> 48.0 [kpc] :: 52.0 [kpc]\n\nFound 1.295770e+05 particles\nMemory used for data table :10.134612083435059 MB\n-------------------------------------------------------","category":"page"},{"location":"02_particles_Load_Selections/#","page":"Particles","title":"Particles","text":"","category":"page"},{"location":"06_particles_Projection/#.-Particles:-Projections-1","page":"Particles","title":"6. Particles: Projections","text":"","category":"section"},{"location":"06_particles_Projection/#Load-The-Data-1","page":"Particles","title":"Load The Data","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");\nparticles  = getparticles(info);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:09:51.793\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get particle data: 2020-02-18T23:10:01.886\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(1, 2, 3, 4, 5) = (:vx, :vy, :vz, :mass, :birth)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\n\n\n\u001b Reading data...100%|████████████████████████████████████| Time: 0:00:04\u001b\n\n\nFound 5.089390e+05 particles\nMemory used for data table :34.947275161743164 MB\n-------------------------------------------------------","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"particles.data","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Table with 508939 rows, 10 columns:\nColumns:\n\u001b #   \u001b \u001b colname  \u001b \u001b type\u001b\n────────────────────\n1   level    Int32\n2   x        Float64\n3   y        Float64\n4   z        Float64\n5   id       Int32\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   mass     Float64\n10  birth    Float64","category":"page"},{"location":"06_particles_Projection/#Projection-of-Predefined-Quantities-1","page":"Particles","title":"Projection of Predefined Quantities","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"See the possible variables:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"projection()","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Predefined vars for projections:\n------------------------------------------------\n=====================[gas]:=====================\n       -all the non derived hydro vars-\n:cpu, :level, :rho, :cx, :cy, :cz, :vx, :vy, :vz, :p, var6,...\nfurther possibilities: :rho, :density, :ρ\n              -derived hydro vars-\n:x, :y, :z\n:sd or :Σ or :surfacedensity\n:mass, :cellsize, :freefall_time\n:cs, :mach, :jeanslength, :jeansnumber\n\n==================[particles]:==================\n        all the non derived  vars:\n:cpu, :level, :id, :family, :tag\n:x, :y, :z, :vx, :vy, :vz, :mass, :birth, :metal....\n\n              -derived particle vars-\n:age\n\n==============[gas or particles]:===============\n:v, :ekin\nsquared => :vx2, :vy2, :vz2\nvelocity dispersion => σx, σy, σz, σ\n\nrelated to a given center:\n---------------------------\n:vr_cylinder, vr_sphere (radial components)\n:vϕ_cylinder, :vθ\nsquared => :vr_cylinder2, :vϕ_cylinder2\nvelocity dispersion => σr_cylinder, σϕ_cylinder\n\n2d maps (not projected):\n:r_cylinder\n:ϕ\n------------------------------------------------","category":"page"},{"location":"06_particles_Projection/#Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)-1","page":"Particles","title":"Projection of a Single Quantity in Different Directions (z,y,x)","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Here we project the surface density in the z-direction of the data within a particular vertical range (domain=[0:1]) on a grid corresponding to level=9. Pass any object of PartDataType (here: \"particles\") to the projection-function and select a variable by a Symbol (here: :sd = :surfacedensity = :Σ in Msol/pc^3)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, lmax=9, zrange=[0.45,0.55])\nproj_z = projection(particles, :Σ,  unit=:Msol_pc2, lmax=9, zrange=[0.45,0.55], verbose=false)\nproj_z = projection(particles, :surfacedensity, unit=:Msol_pc2, lmax=9,zrange=[0.45,0.55], verbose=false)\nproj_z = projection(particles, :sd, :Msol_pc2, lmax=9, zrange=[0.45,0.55], verbose=false) # The keyword \"unit\" (singular) can be omit if the following order is preserved: data-object, quantity, unit.\nproj_x = projection(particles, :sd, :Msol_pc2, lmax=9, direction = :x, zrange=[0.45,0.55], verbose=false); # Project the surface density in x-direction","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:42.33\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.95 :: 1.0  \t==> 45.6 [kpc] :: 48.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 1 513\nyrange: 1 513\nzrange: 487 513\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#Select-a-Range-Related-to-a-Center-1","page":"Particles","title":"Select a Range Related to a Center","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"See also in the documentation for: load data by selection","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"cv = (particles.boxlen / 2.) * particles.scale.kpc # provide the box-center in kpc\nproj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[cv,cv,cv], range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:45.187\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z):","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:boxcenter], range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:46.718\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:bc], range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:46.818\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Use the box center notation for individual dimensions, here x,z:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                        center=[:bc, 24., :bc], range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:48.695\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#Get-Multiple-Quantities-1","page":"Particles","title":"Get Multiple Quantities","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Get several quantities with one function call by passing an array containing the selected variables (at least one entry). The keyword name for the units is now in plural.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_x = projection(particles, [:sd], units=[:Msol_pc2], lmax=9,\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:49.018\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Pass an array containing several quantities to process and their corresponding units:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z = projection(particles, [:sd, :vx], units=[:Msol_pc2, :km_s], lmax=9,\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:49.132\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The function can be called without any keywords by preserving the following order: dataobject, variables, units","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z = projection(particles, [:sd , :vx], [:Msol_pc2, :km_s], lmax=9,\n                        direction = :x,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:50.02\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"If all selected variables should be of the same unit use the following arguments: dataobject, array of quantities, unit (no array needed)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"projvel_z = projection(particles, [:vx, :vy, :vz], :km_s, lmax=9,\n                        xrange=[-10.,10.],\n                        yrange=[-10.,10.],\n                        zrange=[-2.,2.],\n                        center=[24.,24.,24.],\n                        range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-12T20:07:50.259\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]","category":"page"},{"location":"06_particles_Projection/#Function-Output-1","page":"Particles","title":"Function Output","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"List the fields of the assigned object:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"propertynames(proj1_z)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(:maps, :maps_unit, :maps_lmax, :maps_mode, :lmax_projected, :lmin, :lmax, :ref_time, :ranges, :extent, :cextent, :ratio, :boxlen, :scale, :info)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The projected 2D maps are stored in a dictionary:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.maps","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:\n  :sd => [1.29223 1.29223 … 1.29223 0.0; 2.58445 1.29223 … 0.0 0.0; … ; 3.87668…\n  :vx => [178.738 143.611 … 131.468 NaN; 96.6932 154.086 … NaN NaN; … ; -189.97…","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The maps can be accessed by giving the name of the dictionary:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.maps[:sd]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"214×44 Array{Float64,2}:\n  1.29223  1.29223  1.29223   1.29223  …  0.0      1.29223  1.29223  0.0\n  2.58445  1.29223  2.58445   2.58445     1.29223  1.29223  0.0      0.0\n  0.0      1.29223  3.87668   2.58445     1.29223  0.0      0.0      0.0\n  1.29223  1.29223  2.58445   1.29223     0.0      1.29223  0.0      0.0\n  0.0      0.0      1.29223   2.58445     1.29223  0.0      1.29223  0.0\n  2.58445  2.58445  3.87668   1.29223  …  0.0      0.0      0.0      0.0\n  0.0      2.58445  0.0       2.58445     2.58445  0.0      0.0      0.0\n  1.29223  1.29223  6.46114   3.87668     3.87668  0.0      0.0      0.0\n  0.0      1.29223  1.29223   1.29223     0.0      2.58445  0.0      0.0\n  1.29223  2.58445  1.29223   3.87668     5.16891  2.58445  0.0      0.0\n  1.29223  0.0      1.29223   7.75336  …  0.0      2.58445  0.0      0.0\n  2.58445  2.58445  2.58445   3.87668     6.46114  0.0      1.29223  0.0\n  2.58445  2.58445  5.16891   0.0         0.0      2.58445  0.0      0.0\n  ⋮                                    ⋱  ⋮                             \n  3.87668  3.87668  5.16891   2.58445     5.16891  3.87668  0.0      0.0\n  1.29223  6.46114  2.58445   5.16891     3.87668  2.58445  2.58445  0.0\n  5.16891  7.75336  3.87668   6.46114     3.87668  2.58445  3.87668  0.0\n 11.63     7.75336  5.16891   5.16891  …  7.75336  5.16891  1.29223  0.0\n  1.29223  3.87668  3.87668   2.58445     2.58445  1.29223  0.0      0.0\n  5.16891  3.87668  3.87668  11.63        2.58445  3.87668  0.0      0.0\n  2.58445  6.46114  6.46114   6.46114     5.16891  2.58445  1.29223  0.0\n  2.58445  3.87668  3.87668  10.3378      9.04559  2.58445  0.0      0.0\n  5.16891  6.46114  7.75336   9.04559  …  3.87668  2.58445  0.0      0.0\n  3.87668  3.87668  0.0       6.46114     9.04559  6.46114  0.0      0.0\n  3.87668  5.16891  5.16891   1.29223     2.58445  3.87668  0.0      0.0\n  0.0      0.0      0.0       0.0         0.0      0.0      0.0      0.0","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The units of the maps are stored in:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.maps_unit","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:\n  :sd => :Msol_pc2\n  :vx => :km_s","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The following fields are helpful for further calculations or plots.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.ranges # normalized to the domain=[0:1]","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"6-element Array{Float64,1}:\n 0.29166666666647767\n 0.7083333333328743\n 0.29166666666647767\n 0.7083333333328743\n 0.4583333333330363\n 0.5416666666663156","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.extent # ranges in code units","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"4-element Array{Float64,1}:\n 13.96875\n 34.03125\n 21.9375\n 26.0625","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.cextent # ranges in code units relative to a given center (by default: box center)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"4-element Array{Float64,1}:\n -10.031250000015554\n  10.031249999984446\n  -2.062500000015554\n   2.062499999984446","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj1_z.ratio # the ratio between the two ranges","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"4.863636363636363","category":"page"},{"location":"06_particles_Projection/#Plot-Maps-with-Python-1","page":"Particles","title":"Plot Maps with Python","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false)\nproj_x = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    direction = :x);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Python functions can be directly called in Julia, which gives the opportunity, e.g. to use the Matplotlib library.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"using PyPlot\nusing ColorSchemes\ncmap = ColorMap(ColorSchemes.lajolla.colors) # See http://www.fabiocrameri.ch/colourmaps.php\ncmap2 = ColorMap(ColorSchemes.roma.colors)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: svg)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Project a specific spatial range and plot the axes of the map relative to the box-center (given by keyword: data_center):","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[24.,24.,24.], data_center_unit=:kpc)\nproj_x = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[24.,24.,24.], data_center_unit=:kpc,\n                    direction = :x);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Plot the axes of the map relative to the map-center (given by keyword: data_center):","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[19.,19.,24.], data_center_unit=:kpc)\nproj_x = projection(particles, :sd, :Msol_pc2, lmax=9,\n                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,\n                    verbose=false,\n                    data_center=[19.,19.,24.], data_center_unit=:kpc,\n                    direction = :x);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Projections-of-Derived-Kinematic-Data-1","page":"Particles","title":"Projections of Derived Kinematic Data","text":"","category":"section"},{"location":"06_particles_Projection/#Use-quantities-in-cartesian-coordinates:-1","page":"Particles","title":"Use quantities in cartesian coordinates:","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Project the following derived data (mass weighted by default): The absolute value of the velocity :v, the velocity dispersion :σ in different directions and the kinetic energy :ekin. The Julia language supports Unicode characters and can be inserted by e.g. \"\\sigma + tab-key\" leading to: σ.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, [:v, :σ, :σx, :σy, :σz, :ekin],\n                    units=[:km_s,:km_s,:km_s,:km_s,:km_s,:erg],\n                    lmax=9,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[24.,24.,24.], range_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:11:45.881\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:03\u001b","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"For the velocity dispersion additional maps are created to created the mass-weighted quantity: E. g.: σx = sqrt( <vx^2> - < vx >^2 )","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 14 entries:\n  :ekin => [2.4169e51 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; …\n  :sd   => [0.00129258 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … 0.0 0.0;…\n  :v    => [146.277 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; Na…\n  :v2   => [4.97588 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; Na…\n  :vx   => [1.22376 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; Na…\n  :vx2  => [1.49758 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; Na…\n  :vy   => [-1.84928 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; N…\n  :vy2  => [3.41984 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; Na…\n  :vz   => [-0.241781 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; …\n  :vz2  => [0.058458 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; N…\n  :σ    => [1.90735e-6 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN;…\n  :σx   => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; NaN Na…\n  :σy   => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN; NaN Na…\n  :σz   => [1.72737e-7 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN;…","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps_unit","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 14 entries:\n  :ekin => :erg\n  :sd   => :standard\n  :v    => :km_s\n  :v2   => :standard\n  :vx   => :standard\n  :vx2  => :standard\n  :vy   => :standard\n  :vy2  => :standard\n  :vz   => :standard\n  :vz2  => :standard\n  :σ    => :km_s\n  :σx   => :km_s\n  :σy   => :km_s\n  :σz   => :km_s","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"usedmemory(proj_z);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Memory used: 5.16 MB","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 5.5))\n\nsubplot(2, 3, 1)\ntitle(\"v [km/s]\")\nimshow( (permutedims(proj_z.maps[:v])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmax=300.)\ncolorbar()\n\n\nsubplot(2, 3, 2)\ntitle(\"σ [km/s]\")\nimshow( (permutedims(proj_z.maps[:σ])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 3)\ntitle(\"Ekin [erg]\")\nimshow( log10.(permutedims(proj_z.maps[:ekin]) ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 4)\ntitle(\"σx [km/s]\")\nimshow( (permutedims(proj_z.maps[:σx])   ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 5)\ntitle(\"σy [km/s]\")\nimshow( (permutedims(proj_z.maps[:σy])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(2, 3, 6)\ntitle(\"σz [km/s]\")\nimshow( (permutedims(proj_z.maps[:σz])  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();\n","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Use-quantities-in-cylindrical-coordinates:-1","page":"Particles","title":"Use quantities in cylindrical coordinates:","text":"","category":"section"},{"location":"06_particles_Projection/#Face-on-disc-(z-direction)-1","page":"Particles","title":"Face-on disc (z-direction)","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"For the cylindrical or spherical components of a quantity, the center of the coordinate system is used (keywords: datacenter = center default) and can be given with the keyword \"datacenter\" and its units with \"datacenterunit\". Additionally, the quantities that are based on cartesian coordinates can be given.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, [:v, :σ, :σx, :σy, :ϕ, :r_cylinder, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder],                    \n                    units=[:km_s,:km_s,:km_s, :km_s, :standard, :kpc, :km_s, :km_s, :km_s, :km_s],\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[:boxcenter], range_unit=:kpc,\n                    data_center=[24.,24.,24.], data_center_unit=:kpc);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:14:53.029\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 9\nxrange: 150 364\nyrange: 150 364\nzrange: 235 279\npixel-size: 93.75 [pc]\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:\n  :r_cylinder   => [14.0096 13.9434 … 14.1205 14.1874; 13.9434 13.877 … 14.0549…\n  :sd           => [0.00129258 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … …\n  :v            => [146.277 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :v2           => [4.97588 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :vr_cylinder  => [29.3132 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :vr_cylinder2 => [0.199823 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … Na…\n  :vx           => [1.22376 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :vx2          => [1.49758 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :vy           => [-1.84928 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … Na…\n  :vy2          => [3.41984 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN…\n  :vϕ_cylinder  => [142.43 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN …\n  :vϕ_cylinder2 => [4.7176 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN …\n  :σ            => [1.90735e-6 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … …\n  :σr_cylinder  => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN…\n  :σx           => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN…\n  :σy           => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN…\n  :σϕ_cylinder  => [0.0 NaN … NaN NaN; NaN NaN … NaN NaN; … ; NaN NaN … NaN NaN…\n  :ϕ            => [3.92699 3.92224 … 2.34837 2.34373; 3.93175 3.92699 … 2.3436…","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps_unit","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:\n  :r_cylinder   => :kpc\n  :sd           => :standard\n  :v            => :km_s\n  :v2           => :standard\n  :vr_cylinder  => :km_s\n  :vr_cylinder2 => :standard\n  :vx           => :standard\n  :vx2          => :standard\n  :vy           => :standard\n  :vy2          => :standard\n  :vϕ_cylinder  => :km_s\n  :vϕ_cylinder2 => :standard\n  :σ            => :km_s\n  :σr_cylinder  => :km_s\n  :σx           => :km_s\n  :σy           => :km_s\n  :σϕ_cylinder  => :km_s\n  :ϕ            => :radian","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"Radius [kpc]\")\nimshow( permutedims(proj_z.maps[:r_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_z.maps[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmin=-200.,vmax=200.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_z.maps[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"ϕ-angle\")\nimshow( (permutedims(proj_z.maps[:ϕ]) ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"σr [km/s]\")\nimshow( permutedims(proj_z.maps[:σr_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"σϕ [km/s]\")\nimshow( permutedims(proj_z.maps[:σϕ_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"σ [km/s]\")\nimshow( (permutedims(proj_z.maps[:σ]) ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"σx [km/s]\")\nimshow( permutedims(proj_z.maps[:σx]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"σy [km/s]\")\nimshow( permutedims(proj_z.maps[:σy] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Project-on-a-Coarser-Grid-1","page":"Particles","title":"Project on a Coarser Grid","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The default is the projection on the maximum loaded grid level (always provided in the output). Choose a smaller level with the keyword lmax to project on a coarser grid in addition. Higher-resolution data is averaged within each coarser grid-cell (default: mass-weighted). By default, the data is assumed to be in the center of the simulation box.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles,\n                    [:v, :σ, :σx, :σy, :σz, :vr_cylinder, :vϕ_cylinder, :σr_cylinder, :σϕ_cylinder],\n                    :km_s,\n                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],\n                    center=[:boxcenter], range_unit=:kpc,\n                    lmax=8);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:15:37.232\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMap data on given lmax: 8\nxrange: 75 183\nyrange: 75 183\nzrange: 118 140\npixel-size: 187.5 [pc]\n\n\n\n\u001b 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The projection onto the maximum loaded grid is always provided:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => [0.000323146 0.000323146 … 0.0 0.0; 0.000969439 0.000323146 …\n  :v            => [146.277 156.41 … NaN NaN; 168.992 166.428 … NaN NaN; … ; Na…\n  :v2           => [4.97588 5.6892 … NaN NaN; 6.6621 6.4413 … NaN NaN; … ; NaN …\n  :vr_cylinder  => [29.3132 76.3408 … NaN NaN; 26.5929 6.80341 … NaN NaN; … ; N…\n  :vr_cylinder2 => [0.199823 1.35529 … NaN NaN; 0.25831 0.010764 … NaN NaN; … ;…\n  :vx           => [1.22376 0.610176 … NaN NaN; 1.49846 1.69991 … NaN NaN; … ; …\n  :vx2          => [1.49758 0.372314 … NaN NaN; 2.33418 2.88971 … NaN NaN; … ; …\n  :vy           => [-1.84928 -2.29076 … NaN NaN; -2.04837 -1.86716 … NaN NaN; ……\n  :vy2          => [3.41984 5.24756 … NaN NaN; 4.22525 3.48629 … NaN NaN; … ; N…\n  :vz           => [-0.241781 -0.263284 … NaN NaN; -0.187282 0.25555 … NaN NaN;…\n  :vz2          => [0.058458 0.0693187 … NaN NaN; 0.102671 0.0653057 … NaN NaN;…\n  :vϕ_cylinder  => [142.43 135.419 … NaN NaN; 164.297 165.443 … NaN NaN; … ; Na…\n  :vϕ_cylinder2 => [4.7176 4.26459 … NaN NaN; 6.30112 6.36523 … NaN NaN; … ; Na…\n  :σ            => [1.90735e-6 0.0 … NaN NaN; 9.45804 1.90735e-6 … NaN NaN; … ;…\n  :σr_cylinder  => [0.0 0.0 … NaN NaN; 20.0894 8.42937e-8 … NaN NaN; … ; NaN Na…\n  :σx           => [0.0 0.0 … NaN NaN; 19.5408 0.0 … NaN NaN; … ; NaN NaN … NaN…\n  :σy           => [0.0 0.0 … NaN NaN; 11.246 1.9543e-6 … NaN NaN; … ; NaN NaN …\n  :σz           => [1.72737e-7 0.0 … NaN NaN; 17.0492 0.0 … NaN NaN; … ; NaN Na…\n  :σϕ_cylinder  => [0.0 0.0 … NaN NaN; 10.1009 0.0 … NaN NaN; … ; NaN NaN … NaN…","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.maps_unit","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => :standard\n  :v            => :km_s\n  :v2           => :standard\n  :vr_cylinder  => :km_s\n  :vr_cylinder2 => :standard\n  :vx           => :standard\n  :vx2          => :standard\n  :vy           => :standard\n  :vy2          => :standard\n  :vz           => :standard\n  :vz2          => :standard\n  :vϕ_cylinder  => :km_s\n  :vϕ_cylinder2 => :standard\n  :σ            => :km_s\n  :σr_cylinder  => :km_s\n  :σx           => :km_s\n  :σy           => :km_s\n  :σz           => :km_s\n  :σϕ_cylinder  => :km_s","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"|v| [km/s]\")\nimshow( permutedims(proj_z.maps[:v]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmax=300.)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_z.maps[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent, vmin=-200.,vmax=200.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_z.maps[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"σz [km/s]\")\nimshow( (permutedims(proj_z.maps[:σz]) ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"σr [km/s]\")\nimshow( (permutedims(proj_z.maps[:σr_cylinder]  )), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"σϕ [km/s]\")\nimshow( (permutedims(proj_z.maps[:σϕ_cylinder] )), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"σ [km/s]\")\nimshow( (permutedims(proj_z.maps[:σ]) ), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"σx [km/s]\")\nimshow( (permutedims(proj_z.maps[:σx]  )), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"σy [km/s]\")\nimshow( (permutedims(proj_z.maps[:σy] )), cmap=cmap2, origin=\"lower\", extent=proj_z.cextent)\ncolorbar();","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Remap-a-Projected-Data-onto-a-Coarser-Grid-1","page":"Particles","title":"Remap a Projected Data onto a Coarser Grid","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Pass the object with the projected data to the function remap and the level of the coarser grid:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_zlmax = remap(proj_z, 6, weighting=:mass);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"remap from:\nlevel 8 => 6\ncellsize 187.5 [pc] => 750.0 [pc]\npixels (108, 108) => (27, 27)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_zlmax.maps_lmax","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:\n  :sd           => [0.000323146 0.000646292 … 0.000969439 0.0; 0.000323146 0.00…\n  :v            => [146.277 168.298 … 156.122 NaN; 139.301 147.989 … 163.056 Na…\n  :v2           => [4.97588 6.59448 … 5.72437 NaN; 4.51262 5.41716 … 6.34405 Na…\n  :vr_cylinder  => [29.3132 84.1136 … 12.6568 NaN; -65.7457 1.40056 … -13.4105 …\n  :vr_cylinder2 => [0.199823 1.66491 … 1.15359 NaN; 1.0052 0.0947446 … 0.295219…\n  :vx           => [1.22376 0.492592 … -1.53257 NaN; 2.0553 1.52317 … -1.57894 …\n  :vx2          => [1.49758 0.249049 … 2.51795 NaN; 4.22424 2.55826 … 2.92281 N…\n  :vy           => [-1.84928 -2.42313 … -1.35159 NaN; -0.536675 -1.55209 … -1.8…\n  :vy2          => [3.41984 5.88813 … 3.07412 NaN; 0.28802 2.57923 … 3.41524 Na…\n  :vz           => [-0.241781 -0.672377 … -0.170057 NaN; -0.0189591 -0.412132 ……\n  :vz2          => [0.058458 0.457301 … 0.132298 NaN; 0.000359447 0.279663 … 0.…\n  :vϕ_cylinder  => [142.43 138.647 … 133.136 NaN; 122.804 142.63 … 158.394 NaN;…\n  :vϕ_cylinder2 => [4.7176 4.47227 … 4.43848 NaN; 3.50705 5.04275 … 6.04282 NaN…\n  :σ            => [1.90735e-6 5.72296 … 15.5331 0.0; 0.0 37.3334 … 26.3214 0.0…\n  :σr_cylinder  => [0.0 9.17629 … 69.2848 0.0; 0.0 20.1358 … 33.0096 0.0; … ; 0…\n  :σx           => [0.0 5.24676 … 26.9716 0.0; 0.0 32.0052 … 42.9889 0.0; … ; 0…\n  :σy           => [0.0 8.44153 … 73.2366 0.0; 0.0 27.0583 … 11.713 0.0; … ; 0.…\n  :σz           => [1.72737e-7 4.73321 … 21.0841 0.0; 0.0 21.7301 … 4.72985 0.0…\n  :σϕ_cylinder  => [0.0 2.88507 … 36.8894 0.0; 0.0 36.6195 … 29.9383 0.0; … ; 0…","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 8.5))\n\nsubplot(3, 3, 1)\ntitle(\"Radius [kpc]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:v]  ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 2)\ntitle(\"vr [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:vr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent, vmin=-150.,vmax=150.)\ncolorbar()\n\n\nsubplot(3, 3, 3)\ntitle(\"vϕ [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:vϕ_cylinder]  ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 4)\ntitle(\"σz [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σz]) , cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 5)\ntitle(\"σr [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σr_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 6)\ntitle(\"σϕ [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σϕ_cylinder] ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 7)\ntitle(\"σ [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σ]) , cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\n\nsubplot(3, 3, 8)\ntitle(\"σx [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σx]), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar()\n\n\nsubplot(3, 3, 9)\ntitle(\"σy [km/s]\")\nimshow( permutedims(proj_zlmax.maps_lmax[:σy] ), cmap=cmap2, origin=\"lower\", extent=proj_zlmax.cextent)\ncolorbar();","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Projection-of-the-Birth/Age-Time-1","page":"Particles","title":"Projection of the Birth/Age-Time","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Project the average birth-time of the particles to the grid:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :birth, :Myr,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);\nproj_x = projection(particles, :birth, :Myr,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x, verbose=false);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:birth])), cmap=cmap2, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Birth) \\ [Myr]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:birth])), cmap=cmap2, origin=\"lower\", extent=proj_x.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Birth) \\ [Myr]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Project the average age of the particles to the grid. The age is taken relative to the loaded snapshot time by default.","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :age, :Myr,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);\nproj_x = projection(particles, :age, :Myr,\n                    lmax=6,  zrange=[0.45,0.55], direction=:x,  center=[0.,0.,0.], verbose=false);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The reference time (code units) for the age calculation:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.ref_time","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"39.9019537349027","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=\"lower\", extent=proj_x.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Project the average age of the particles relative to a given reference time:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :age, :Myr, ref_time=0.,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);\nproj_x = projection(particles, :age, :Myr, ref_time = 0.,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x, verbose=false);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"The reference time (code units) for the age calculation:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z.ref_time","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"0.0","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( ( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\")\n\nsubplot(1,2,2)\nim = imshow( ( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=\"lower\", extent=proj_x.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#Projection-of-Masked-Data-1","page":"Particles","title":"Projection of Masked Data","text":"","category":"section"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"Mask particles with ages higher than 500 Myr by creating a Bool-array where the smaller ages correspond to false entries:","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"mask = getvar(particles, :age, :Myr) .> 500. ;","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :age, :Myr, mask=mask,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.]);\nproj_x = projection(particles, :age, :Myr, mask=mask,\n                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:14:17.09\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nMap data on given lmax: 6\nxrange: 1 65\nyrange: 1 65\nzrange: 29 37\npixel-size: 750.0 [pc]\n\n:mask provided by function\n\n\u001b [Mera]: 2020-02-18T23:14:24.262\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.45 :: 0.55  \t==> 21.6 [kpc] :: 26.4 [kpc]\n\nMap data on given lmax: 6\nxrange: 1 65\nyrange: 1 65\nzrange: 29 37\npixel-size: 750.0 [pc]\n\n:mask provided by function","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"figure(figsize=(10, 3.5))\nsubplot(1,2,1)\nim = imshow( log10.( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\")\n\nsubplot(1,2,2)\nim = imshow( log10.( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=\"lower\", extent=proj_x.cextent)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=L\"\\mathrm{log10(Age) \\ [Myr]}\",orientation=\"horizontal\", pad=0.2);","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"06_particles_Projection/#","page":"Particles","title":"Particles","text":"","category":"page"},{"location":"00_multi_FirstSteps/#First-Steps-1","page":"First Steps","title":"First Steps","text":"","category":"section"},{"location":"00_multi_FirstSteps/#Simulation-Overview-1","page":"First Steps","title":"Simulation Overview","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The first call of MERA will compile the package!","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"using Mera","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"┌ Info: Precompiling Mera [02f895e8-fdb1-4346-8fe6-c721699f5126]\n└ @ Base loading.jl:1273\n\n\n\n*__   __ _______ ______   _______\n|  |_|  |       |    _ | |   _   |\n|       |    ___|   | || |  |_|  |\n|       |   |___|   |_||_|       |\n|       |    ___|    __  |       |\n| ||_|| |   |___|   |  | |   _   |\n|_|   |_|_______|___|  |_|__| |__|","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Get information with the function getinfo about the simulation for a selected output and assign it to an object, here: \"info\"  (composite type). The RAMSES output folders are assumed to be in the current working directory, and the user can give a relative or absolute path. The information is read from several files: info-file, header-file, from the header of the Fortran binary files of the first CPU (hydro, grav, part, clump, sink, ... if they exist), etc. Many familiar names and acronyms known from RAMSES are maintained. The function getinfo prints a small summary and the given units are printed in human-readable representation.","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"info = getinfo(420, \"../../testing/simulations/manu_sim_sf_L10\"); # output=400 in given path","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"\u001b [Mera]: 2020-02-15T22:02:55.164\u001b\n\nCode: RAMSES\noutput [420] summary:\nmtime: 2017-07-27T01:22:09\nctime: 2019-12-24T09:57:04.822\n\u001b =======================================================\u001b\nsimulation time: 624.91 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 1024\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 10 --> cellsize(s): 750.0 [pc] - 46.88 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  6  --> (:rho, :vx, :vy, :vz, :p, :var6)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1)\nγ: 1.01\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The simulation output can be selected in several ways, which is realised by using multiple dispatch. See the different defined methods on the function getinfo:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"# info = getinfo(); # default: output=1 in current folder,\n# info = getinfo(\"../simulations/\"); # given path, default: output=1\n# info = getinfo(output=400, path=\"../simulations/\"); # pass path and output number by keywords\n\nmethods(getinfo)","category":"page"},{"location":"00_multi_FirstSteps/#Fields-1","page":"First Steps","title":"Fields","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The created object info is of type InfoType (composite type):","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"typeof(info)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"InfoType","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The previously printed information and even more simulation properties are assigned to the object and can be accessed from fields and sub-fields. Get an overview with:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"viewfields(info);","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"output\t= 420\npath\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10\n\u001b fnames ==> subfields: (:output, :info, :amr, :hydro, :hydro_descriptor, :gravity, :particles, :part_descriptor, :clumps, :timer, :header, :namelist, :compilation, :makefile, :patchfile)\u001b\n\nsimcode\t= RAMSES\nmtime\t= 2017-07-27T01:22:09\nctime\t= 2019-12-24T09:57:04.822\nncpu\t= 1024\nndim\t= 3\nlevelmin\t= 6\nlevelmax\t= 10\nboxlen\t= 48.0\ntime\t= 41.9092891721775\naexp\t= 1.0\nH0\t= 1.0\nomega_m\t= 1.0\nomega_l\t= 0.0\nomega_k\t= 0.0\nomega_b\t= 0.0\nunit_l\t= 3.085677581282e21\nunit_d\t= 6.76838218451376e-23\nunit_m\t= 1.9885499720830952e42\nunit_v\t= 6.557528732282063e6\nunit_t\t= 4.70554946422349e14\ngamma\t= 1.01\nhydro\t= true\nnvarh\t= 6\nnvarp\t= 5\nvariable_list\t= Symbol[:rho, :vx, :vy, :vz, :p, :var6]\ngravity_variable_list\t= Symbol[:epot, :ax, :ay, :az]\nparticles_variable_list\t= Symbol[:vx, :vy, :vz, :mass, :birth]\nclumps_variable_list\t= Symbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nsinks_variable_list\t= Symbol[]\n\u001b descriptor ==> subfields: (:hversion, :hydro, :htypes, :usehydro, :hydrofile, :pversion, :particles, :ptypes, :useparticles, :particlesfile, :gravity, :usegravity, :gravityfile, :clumps, :useclumps, :clumpsfile, :sinks, :usesinks, :sinksfile, :rt, :usert, :rtfile)\u001b\n\namr\t= true\ngravity\t= true\nparticles\t= true\nclumps\t= true\nsinks\t= false\nrt\t= false\nnamelist\t= false\n\u001b namelist_content ==> dictionary: ()\u001b\n\nheaderfile\t= true\nmakefile\t= true\n\u001b files_content ==> subfields: (:makefile, :timerfile, :patchfile)\u001b\n\ntimerfile\t= false\ncompilationfile\t= true\npatchfile\t= true\nNarraysize\t= 0\n\n\u001b scale ==> subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Mpc3, :kpc3, :pc3, :mpc3, :ly3, :Au3, :km3, :m3, :cm3, :mm3, :μm3, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)\u001b\n\n\u001b grid_info ==> subfields: (:ngridmax, :nstep_coarse, :nx, :ny, :nz, :nlevelmax, :nboundary, :ngrid_current, :bound_key, :cpu_read)\u001b\n\n\u001b part_info ==> subfields: (:eta_sn, :age_sn, :f_w, :Npart, :Ndm, :Nstars, :Nsinks, :Ncloud, :Ndebris, :Nother, :Nundefined, :other_tracer1, :debris_tracer, :cloud_tracer, :star_tracer, :other_tracer2, :gas_tracer)\u001b\n\n\u001b compilation ==> subfields: (:compile_date, :patch_dir, :remote_repo, :local_branch, :last_commit)\u001b\n\n\u001b constants ==> subfields: (:Au, :Mpc, :kpc, :pc, :mpc, :ly, :Msol, :Mearth, :Mjupiter, :Rsol, :me, :mp, :mn, :mH, :amu, :NA, :c, :G, :kB, :Gyr, :Myr, :yr)\u001b","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Get a simple list of the fields of any object:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"propertynames(info)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"(:output, :path, :fnames, :simcode, :mtime, :ctime, :ncpu, :ndim, :levelmin, :levelmax, :boxlen, :time, :aexp, :H0, :omega_m, :omega_l, :omega_k, :omega_b, :unit_l, :unit_d, :unit_m, :unit_v, :unit_t, :gamma, :hydro, :nvarh, :nvarp, :variable_list, :gravity_variable_list, :particles_variable_list, :clumps_variable_list, :sinks_variable_list, :descriptor, :amr, :gravity, :particles, :clumps, :sinks, :rt, :namelist, :namelist_content, :headerfile, :makefile, :files_content, :timerfile, :compilationfile, :patchfile, :Narraysize, :scale, :grid_info, :part_info, :compilation, :constants)","category":"page"},{"location":"00_multi_FirstSteps/#Physical-Units-1","page":"First Steps","title":"Physical Units","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"All calculations in MERA are processed in the code units of the loades simulation. The RAMSES scaling factors from code- to cgs-units are given for the length, density, mass, velocity and time, assigned to the fields: unitl, unitd, unitm, unitv, unit_t","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"To make life easier, we provide more predefined scaling factors, assigned to the sub-field scale:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"viewfields(info.scale)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMpc3\t= 1.0000000000019446e-9\nkpc3\t= 1.0000000000019444\npc3\t= 1.0000000000019448e9\nmpc3\t= 1.0000000000019446e18\nly3\t= 3.469585750743794e10\nAu3\t= 8.775571306099254e69\nkm3\t= 2.9379989454983075e49\nm3\t= 2.9379989454983063e58\ncm3\t= 2.9379989454983065e64\nmm3\t= 2.937998945498306e67\nμm3\t= 2.937998945498306e76\nMsol_pc3\t= 0.9997234790001649\ng_cm3\t= 6.76838218451376e-23\nMsol_pc2\t= 999.7234790008131\ng_cm2\t= 0.20885045168302602\nGyr\t= 0.014910986463557083\nMyr\t= 14.910986463557084\nyr\t= 1.4910986463557083e7\ns\t= 4.70554946422349e14\nms\t= 4.70554946422349e17\nMsol\t= 9.99723479002109e8\nMearth\t= 3.329677459032007e14\nMjupiter\t= 1.0476363431814971e12\ng\t= 1.9885499720830952e42\nkm_s\t= 65.57528732282063\nm_s\t= 65575.28732282063\ncm_s\t= 6.557528732282063e6\nnH\t= 30.987773856809987\nerg\t= 8.551000140274429e55\ng_cms2\t= 2.9104844143584656e-9\nT_mu\t= 517028.3199143136\nBa\t= 2.910484414358466e-9","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"list_field = propertynames( info.scale )","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"(:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Mpc3, :kpc3, :pc3, :mpc3, :ly3, :Au3, :km3, :m3, :cm3, :mm3, :μm3, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The underline in the unit representation corresponds to the fraction line, e.g.:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"field name corresponding unit\nMsol_pc3 Msol * pc^-3\ng_cm3 g * cm^-3\nMsol_pc2 Msol * pc^-2\ng_cm2 g * cm^-2\nkm_s km * s^-1\nm_s m * s^-1\ncm_s cm * s^-1\ng_cms2 g / (cm * s^2)\nnH cm^-3\nT_mu T / μ\nBa = Barye (pressure) [cm^-1 * g * s^-2]","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Access a scaling factor to use it in your calculations or plots by e.g.:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"info.scale.km_s  ","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"65.57528732282063","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"To reduce the hierarchy of sub-fields, assign a new object:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"scale = info.scale;","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"The scaling factor can now be accessed by:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"scale.km_s","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"65.57528732282063","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Furthermore, the scales can be assigned by applying the function createscales on an object of type InfoType (here: info):","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"typeof(info)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"InfoType","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"my_scales = createscales(info)\nmy_scales.km_s","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"65.57528732282063","category":"page"},{"location":"00_multi_FirstSteps/#Physical-Constants-1","page":"First Steps","title":"Physical Constants","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Some useful constants are assigned to the InfoType object:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"viewfields(info.constants)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"\u001b [Mera]: Constants given in cgs units\u001b\n\u001b =========================================\u001b\nAu\t= 0.01495978707\nMpc\t= 3.08567758128e24\nkpc\t= 3.08567758128e21\npc\t= 3.08567758128e18\nmpc\t= 3.08567758128e15\nly\t= 9.4607304725808e17\nMsol\t= 1.9891e33\nMearth\t= 5.9722e27\nMjupiter\t= 1.89813e30\nRsol\t= 6.96e10\nme\t= 9.1093897e-28\nmp\t= 1.6726231e-24\nmn\t= 1.6749286e-24\nmH\t= 1.66e-24\namu\t= 1.6605402e-24\nNA\t= 6.0221367e23\nc\t= 2.99792458e10\nG\t= 6.67259e-8\nkB\t= 1.38062e-16\nGyr\t= 3.15576e16\nMyr\t= 3.15576e13\nyr\t= 3.15576e7","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Reduce the hierarchy of sub-fields:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"con = info.constants;","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"viewfields(con)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"\u001b [Mera]: Constants given in cgs units\u001b\n\u001b =========================================\u001b\nAu\t= 0.01495978707\nMpc\t= 3.08567758128e24\nkpc\t= 3.08567758128e21\npc\t= 3.08567758128e18\nmpc\t= 3.08567758128e15\nly\t= 9.4607304725808e17\nMsol\t= 1.9891e33\nMearth\t= 5.9722e27\nMjupiter\t= 1.89813e30\nRsol\t= 6.96e10\nme\t= 9.1093897e-28\nmp\t= 1.6726231e-24\nmn\t= 1.6749286e-24\nmH\t= 1.66e-24\namu\t= 1.6605402e-24\nNA\t= 6.0221367e23\nc\t= 2.99792458e10\nG\t= 6.67259e-8\nkB\t= 1.38062e-16\nGyr\t= 3.15576e16\nMyr\t= 3.15576e13\nyr\t= 3.15576e7","category":"page"},{"location":"00_multi_FirstSteps/#InfoType-Fields-Overview-1","page":"First Steps","title":"InfoType Fields Overview","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"All fields and sub-fields that are assigned to the InfoType or from other objects can be viewed by the function viewfields, namelist, makefile, timerfile, patchfile. See the methods list:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"methods(viewfields)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"methods(namelist)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Get a detailed overview of all the fields from MERA composite types:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"viewallfields(info)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"output\t= 420\npath\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10\n\u001b fnames ==> subfields: (:output, :info, :amr, :hydro, :hydro_descriptor, :gravity, :particles, :part_descriptor, :clumps, :timer, :header, :namelist, :compilation, :makefile, :patchfile)\u001b\n\nsimcode\t= RAMSES\nmtime\t= 2017-07-27T01:22:09\nctime\t= 2019-12-24T09:57:04.822\nncpu\t= 1024\nndim\t= 3\nlevelmin\t= 6\nlevelmax\t= 10\nboxlen\t= 48.0\ntime\t= 41.9092891721775\naexp\t= 1.0\nH0\t= 1.0\nomega_m\t= 1.0\nomega_l\t= 0.0\nomega_k\t= 0.0\nomega_b\t= 0.0\nunit_l\t= 3.085677581282e21\nunit_d\t= 6.76838218451376e-23\nunit_m\t= 1.9885499720830952e42\nunit_v\t= 6.557528732282063e6\nunit_t\t= 4.70554946422349e14\ngamma\t= 1.01\nhydro\t= true\nnvarh\t= 6\nnvarp\t= 5\nvariable_list\t= Symbol[:rho, :vx, :vy, :vz, :p, :var6]\ngravity_variable_list\t= Symbol[:epot, :ax, :ay, :az]\nparticles_variable_list\t= Symbol[:vx, :vy, :vz, :mass, :birth]\nclumps_variable_list\t= Symbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nsinks_variable_list\t= Symbol[]\n\u001b descriptor ==> subfields: (:hversion, :hydro, :htypes, :usehydro, :hydrofile, :pversion, :particles, :ptypes, :useparticles, :particlesfile, :gravity, :usegravity, :gravityfile, :clumps, :useclumps, :clumpsfile, :sinks, :usesinks, :sinksfile, :rt, :usert, :rtfile)\u001b\n\namr\t= true\ngravity\t= true\nparticles\t= true\nclumps\t= true\nsinks\t= false\nrt\t= false\nnamelist\t= false\n\u001b namelist_content ==> dictionary: ()\u001b\n\nheaderfile\t= true\nmakefile\t= true\n\u001b files_content ==> subfields: (:makefile, :timerfile, :patchfile)\u001b\n\ntimerfile\t= false\ncompilationfile\t= true\npatchfile\t= true\nNarraysize\t= 0\n\n\u001b scale ==> subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Mpc3, :kpc3, :pc3, :mpc3, :ly3, :Au3, :km3, :m3, :cm3, :mm3, :μm3, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)\u001b\n\n\u001b grid_info ==> subfields: (:ngridmax, :nstep_coarse, :nx, :ny, :nz, :nlevelmax, :nboundary, :ngrid_current, :bound_key, :cpu_read)\u001b\n\n\u001b part_info ==> subfields: (:eta_sn, :age_sn, :f_w, :Npart, :Ndm, :Nstars, :Nsinks, :Ncloud, :Ndebris, :Nother, :Nundefined, :other_tracer1, :debris_tracer, :cloud_tracer, :star_tracer, :other_tracer2, :gas_tracer)\u001b\n\n\u001b compilation ==> subfields: (:compile_date, :patch_dir, :remote_repo, :local_branch, :last_commit)\u001b\n\n\u001b constants ==> subfields: (:Au, :Mpc, :kpc, :pc, :mpc, :ly, :Msol, :Mearth, :Mjupiter, :Rsol, :me, :mp, :mn, :mH, :amu, :NA, :c, :G, :kB, :Gyr, :Myr, :yr)\u001b\n\n\n\n\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMpc3\t= 1.0000000000019446e-9\nkpc3\t= 1.0000000000019444\npc3\t= 1.0000000000019448e9\nmpc3\t= 1.0000000000019446e18\nly3\t= 3.469585750743794e10\nAu3\t= 8.775571306099254e69\nkm3\t= 2.9379989454983075e49\nm3\t= 2.9379989454983063e58\ncm3\t= 2.9379989454983065e64\nmm3\t= 2.937998945498306e67\nμm3\t= 2.937998945498306e76\nMsol_pc3\t= 0.9997234790001649\ng_cm3\t= 6.76838218451376e-23\nMsol_pc2\t= 999.7234790008131\ng_cm2\t= 0.20885045168302602\nGyr\t= 0.014910986463557083\nMyr\t= 14.910986463557084\nyr\t= 1.4910986463557083e7\ns\t= 4.70554946422349e14\nms\t= 4.70554946422349e17\nMsol\t= 9.99723479002109e8\nMearth\t= 3.329677459032007e14\nMjupiter\t= 1.0476363431814971e12\ng\t= 1.9885499720830952e42\nkm_s\t= 65.57528732282063\nm_s\t= 65575.28732282063\ncm_s\t= 6.557528732282063e6\nnH\t= 30.987773856809987\nerg\t= 8.551000140274429e55\ng_cms2\t= 2.9104844143584656e-9\nT_mu\t= 517028.3199143136\nBa\t= 2.910484414358466e-9\n\n\n\u001b [Mera]: Constants given in cgs units\u001b\n\u001b =========================================\u001b\nAu\t= 0.01495978707\nMpc\t= 3.08567758128e24\nkpc\t= 3.08567758128e21\npc\t= 3.08567758128e18\nmpc\t= 3.08567758128e15\nly\t= 9.4607304725808e17\nMsol\t= 1.9891e33\nMearth\t= 5.9722e27\nMjupiter\t= 1.89813e30\nRsol\t= 6.96e10\nme\t= 9.1093897e-28\nmp\t= 1.6726231e-24\nmn\t= 1.6749286e-24\nmH\t= 1.66e-24\namu\t= 1.6605402e-24\nNA\t= 6.0221367e23\nc\t= 2.99792458e10\nG\t= 6.67259e-8\nkB\t= 1.38062e-16\nGyr\t= 3.15576e16\nMyr\t= 3.15576e13\nyr\t= 3.15576e7\n\n\n\u001b [Mera]: Paths and file-names\u001b\n\u001b =================================\u001b\noutput\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420\ninfo\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/info_00420.txt\namr\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/amr_00420.\nhydro\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/hydro_00420.\nhydro_descriptor\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/hydro_file_descriptor.txt\ngravity\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/grav_00420.\nparticles\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/part_00420.\npart_descriptor\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/part_file_descriptor.txt\nclumps\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/clump_00420.\ntimer\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/timer_00420.txt\nheader\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/header_00420.txt\nnamelist\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/namelist.txt\ncompilation\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/compilation.txt\nmakefile\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/makefile.txt\npatchfile\t= /Users/mabe/Documents/Projects/dev/Mera/tutorials/version_1/../../testing/simulations/manu_sim_sf_L10/output_00420/patches.txt\n\n\n\u001b [Mera]: Descriptor overview\u001b\n\u001b =================================\u001b\nhversion\t= 0\nhydro\t= Symbol[:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1]\nhtypes\t= String[]\nusehydro\t= false\nhydrofile\t= true\npversion\t= 0\nparticles\t= Symbol[:vx, :vy, :vz, :mass, :birth]\nptypes\t= String[]\nuseparticles\t= false\nparticlesfile\t= false\ngravity\t= Symbol[:epot, :ax, :ay, :az]\nusegravity\t= false\ngravityfile\t= false\nclumps\t= Symbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nuseclumps\t= false\nclumpsfile\t= false\nsinks\t= Symbol[]\nusesinks\t= false\nsinksfile\t= false\nrt\t= Symbol[]\nusert\t= false\nrtfile\t= false\n\n\n\u001b [Mera]: Namelist file content\u001b\n\u001b =================================\u001b\n\n\u001b [Mera]: Grid overview \u001b\n\u001b ============================\u001b\nngridmax\t= 850000\nnstep_coarse\t= 1644\nnx\t= 3\nny\t= 3\nnz\t= 3\nnlevelmax\t= 10\nnboundary\t= 6\nngrid_current\t= 2383\nbound_key ==> length(1025)\ncpu_read ==> length(1025)\n\n\n\u001b [Mera]: Particle overview\u001b\n\u001b ===============================\u001b\neta_sn\t= 0.0\nage_sn\t= 0.6706464407596582\nf_w\t= 0.0\nNpart\t= 0\nNdm\t= 0\nNstars\t= 0\nNsinks\t= 0\nNcloud\t= 0\nNdebris\t= 0\nNother\t= 0\nNundefined\t= 0\nother_tracer1\t= 0\ndebris_tracer\t= 0\ncloud_tracer\t= 0\nstar_tracer\t= 0\nother_tracer2\t= 0\ngas_tracer\t= 0\n\n\n\u001b [Mera]: Compilation file overview\u001b\n\u001b ========================================\u001b\ncompile_date\t=  01/12/16-18:13:59\npatch_dir\t=  /hydra/u/manb/sf_sim/patch\nremote_repo\t=  \nlocal_branch\t=  \nlast_commit\t=  \n\n\n\u001b [Mera]: Makefile content\u001b\n\u001b =================================\u001b\n#############################################################################\n# If you have problems with this makefile, contact Romain.Teyssier@gmail.com\n#############################################################################\n# Compilation time parameters\nNVECTOR = 32\nNDIM = 3\nNPRE = 8\nNVAR = 6\nNENER = 0\nSOLVER = hydro\nPATCH = /hydra/u/manb/sf_sim/patch\nEXEC = ramses_neu\n#############################################################################\nGITBRANCH = $(shell git rev-parse --abbrev-ref HEAD)\nGITHASH = $(shell git log --pretty=format:'%H' -n 1)\nGITREPO = $(shell git config --get remote.origin.url)\nBUILDDATE = $(shell date +\"%D-%T\")\nDEFINES = -DNVECTOR=$(NVECTOR) -DNDIM=$(NDIM) -DNPRE=$(NPRE) -DNENER=$(NENER) -DNVAR=$(NVAR) \\\n          -DSOLVER$(SOLVER)\n#############################################################################\n# Fortran compiler options and directives\n\n# --- No MPI, gfortran -------------------------------\n#F90 = gfortran -O3 -frecord-marker=4 -fbacktrace -ffree-line-length-none -g\n#FFLAGS = -x f95-cpp-input $(DEFINES) -DWITHOUTMPI\n\n# --- No MPI, tau ----------------------------------\n#F90 = tau_f90.sh -optKeepFiles -optPreProcess -optCPPOpts=$(DEFINES) -DWITHOUTMPI\n\n# --- No MPI, pgf90 ----------------------------------\n#F90 = pgf90\n#FFLAGS = -Mpreprocess $(DEFINES) -DWITHOUTMPI\n\n# --- No MPI, xlf ------------------------------------\n#F90 = xlf\n#FFLAGS = -WF,-DNDIM=$(NDIM),-DNPRE=$(NPRE),-DNVAR=$(NVAR),-DSOLVER$(SOLVER),-DWITHOUTMPI -qfree=f90 -qsuffix=f=f90 -qsuffix=cpp=f90\n\n# --- No MPI, f90 ------------------------------------\n#F90 = f90\n#FFLAGS = -cpp $(DEFINES) -DWITHOUTMPI\n\n# --- No MPI, ifort ----------------------------------\n#F90 = ifort\n#FFLAGS = -cpp $(DEFINES) -DWITHOUTMPI\n\n# --- MPI, gfortran syntax ------------------------------\n#F90 = mpif90 -frecord-marker=4 -O3 -ffree-line-length-none -g -fbacktrace\n#FFLAGS = -x f95-cpp-input $(DEFINES)\n\n# --- MPI, gfortran DEBUG syntax ------------------------------\n#F90 = mpif90 -frecord-marker=4 -ffree-line-length-none -fbacktrace -g -O -fbounds-check -Wuninitialized -Wall\n#FFLAGS = -x f95-cpp-input -ffpe-trap=zero,underflow,overflow,invalid -finit-real=nan  $(DEFINES)    \n\n# --- MPI, pgf90 syntax ------------------------------\n#F90 = mpif90 -O3\n#FFLAGS = -Mpreprocess $(DEFINES)\n\n# --- MPI, ifort syntax ------------------------------\nF90 = mpiifort\n#FFLAGS = -cpp -fast $(DEFINES) -DNOSYSTEM\nFFLAGS = -O3 -g -traceback -fpe0 -ftrapuv -cpp $(DEFINES) -DNOSYSTEM\n\n# --- MPI, ifort syntax, additional checks -----------\n#F90 = mpif90\n#FFLAGS = -warn all -O0 -g -traceback -fpe0 -ftrapuv -check bounds -cpp $(DEFINES) -DNOSYSTEM\n\n\n# --- MPI, ifort syntax ------------------------------\n#F90 = ftn\n#FFLAGS = -xAVX -g -traceback -fpp -fast $(DEFINES) -DNOSYSTEM #-DRT\n\n# --- MPI, ifort syntax, additional checks -----------\n#F90 = ftn\n#FFLAGS = -O3 -g -traceback -fpe0 -ftrapuv -cpp $(DEFINES) -DNOSYSTEM #-DRT\n\n#############################################################################\nMOD = mod\n#############################################################################\n# MPI librairies\nLIBMPI =\n#LIBMPI = -lfmpi -lmpi -lelan\n\n# --- CUDA libraries, for Titane ---\nLIBCUDA = -L/opt/cuda/lib  -lm -lcuda -lcudart\n\nLIBS = $(LIBMPI)\n#############################################################################\n# Sources directories are searched in this exact order\nVPATH = $(PATCH):../$(SOLVER):../aton:../hydro:../pm:../poisson:../amr:../tools\n#############################################################################\n# All objects\nMODOBJ = amr_parameters.o amr_commons.o random.o pm_parameters.o pm_commons.o poisson_parameters.o \\\n         poisson_commons.o hydro_parameters.o hydro_commons.o cooling_module.o bisection.o sparse_mat.o \\\n         clfind_commons.o gadgetreadfile.o write_makefile.o write_patch.o write_gitinfo.o\n\nAMROBJ = read_params.o init_amr.o init_time.o init_refine.o adaptive_loop.o amr_step.o update_time.o \\\n         output_amr.o flag_utils.o physical_boundaries.o virtual_boundaries.o refine_utils.o nbors_utils.o \\\n         hilbert.o load_balance.o title.o sort.o cooling_fine.o units.o light_cone.o movie.o\n# Particle-Mesh objects\nPMOBJ = init_part.o output_part.o rho_fine.o synchro_fine.o move_fine.o newdt_fine.o particle_tree.o \\\n        add_list.o remove_list.o star_formation.o sink_particle.o feedback.o clump_finder.o clump_merger.o \\\n        flag_formation_sites.o init_sink.o output_sink.o\n# Poisson solver objects\nPOISSONOBJ = init_poisson.o phi_fine_cg.o interpol_phi.o force_fine.o multigrid_coarse.o multigrid_fine_commons.o \\\n             multigrid_fine_fine.o multigrid_fine_coarse.o gravana.o boundary_potential.o rho_ana.o output_poisson.o\n# Hydro objects\nHYDROOBJ = init_hydro.o init_flow_fine.o write_screen.o output_hydro.o courant_fine.o godunov_fine.o \\\n           uplmde.o umuscl.o interpol_hydro.o godunov_utils.o condinit.o hydro_flag.o hydro_boundary.o \\\n           boundana.o read_hydro_params.o synchro_hydro_fine.o\nEXTTOOLS = specfun.o\n\n# All objects\nAMRLIB = $(EXTTOOLS)  $(AMROBJ) $(HYDROOBJ) $(PMOBJ) $(POISSONOBJ)\n# ATON objects\nATON_MODOBJ = timing.o radiation_commons.o rad_step.o\nATON_OBJ = observe.o init_radiation.o rad_init.o rad_boundary.o rad_stars.o rad_backup.o ../aton/atonlib/libaton.a\n#############################################################################\nramses:\t$(MODOBJ) $(AMRLIB) ramses.o\n\t$(F90) $(MODOBJ) $(AMRLIB) ramses.o -o $(EXEC)$(NDIM)d $(LIBS)\n\trm write_makefile.f90\n\trm write_patch.f90\nramses_aton: $(MODOBJ) $(ATON_MODOBJ) $(AMRLIB) $(ATON_OBJ) ramses.o\n\t$(F90) $(MODOBJ) $(ATON_MODOBJ) $(AMRLIB) $(ATON_OBJ) ramses.o -o $(EXEC)$(NDIM)d $(LIBS) $(LIBCUDA)\n\trm write_makefile.f90\n\trm write_patch.f90\n#############################################################################\nwrite_gitinfo.o: FORCE\n\t$(F90) $(FFLAGS) -DPATCH=\\'$(PATCH)\\' -DGITBRANCH=\\'$(GITBRANCH)\\' -DGITHASH=\\'\"$(GITHASH)\"\\' \\\n -DGITREPO=\\'$(GITREPO)\\' -DBUILDDATE=\\'\"$(BUILDDATE)\"\\' -c ../amr/write_gitinfo.f90 -o $@\t\t\nwrite_makefile.o: FORCE\n\t../utils/scripts/cr_write_makefile.sh $(MAKEFILE_LIST)\n\t$(F90) $(FFLAGS) -c write_makefile.f90 -o $@\nwrite_patch.o: FORCE\n\t../utils/scripts/cr_write_patch.sh $(PATCH)\n\t$(F90) $(FFLAGS) -c write_patch.f90 -o $@\n%.o:%.f90\n\t$(F90) $(FFLAGS) -c $^ -o $@\nFORCE:\n#############################################################################\nclean :\n\trm *.o *.$(MOD)\n#############################################################################\n\n\n\u001b [Mera]: Timer-file content\u001b\n\u001b =================================\u001b\n[Mera]: No timer-file found!","category":"page"},{"location":"00_multi_FirstSteps/#Disc-Space-1","page":"First Steps","title":"Disc Space","text":"","category":"section"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"Gives an overview of the used disc space for the different data types of the selected output:","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"storageoverview(info)","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"\u001b Overview of the used disc space for output: [420]\u001b\n\u001b ------------------------------------------------------\u001b\nFolder:         1.38 GB \t<282.44 KB>/file\nAMR-Files:      321.44 MB \t<321.44 KB>/file\nHydro-Files:    607.0 MB \t<606.41 KB>/file\nGravity-Files:  485.14 MB \t<485.14 KB>/file\nParticle-Files: 188.0 KB \t<188.0 Bytes>/file\nClump-Files:    184.25 KB \t<184.25 Bytes>/file\n\n\nmtime: 2017-07-27T01:22:09\nctime: 2019-12-24T09:57:04.822","category":"page"},{"location":"00_multi_FirstSteps/#","page":"First Steps","title":"First Steps","text":"","category":"page"},{"location":"01_hydro_First_Inspection/#.-Hydro:-First-Data-Inspection-1","page":"Hydro","title":"1. Hydro: First Data Inspection","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#Simulation-Overview-1","page":"Hydro","title":"Simulation Overview","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"using Mera\ninfo = getinfo(420, \"../../testing/simulations/manu_sim_sf_L10\");","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: 2020-02-12T20:42:32.755\u001b\n\nCode: RAMSES\noutput [420] summary:\nmtime: 2017-07-27T01:22:09\nctime: 2019-12-24T09:57:04.822\n\u001b =======================================================\u001b\nsimulation time: 624.91 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 1024\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 10 --> cellsize(s): 750.0 [pc] - 46.88 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  6  --> (:rho, :vx, :vy, :vz, :p, :var6)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1)\nγ: 1.01\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"A short overview of the loaded hydro properties is printed:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"existence of hydro files\nthe number and predefined variables\nthe variable names from the descriptor file\nadiabatic index","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The functions in Mera \"know\" the predefined hydro variable names: :rho, :vx, :vy, :vz, :p, :var6, :var7,.... In a future version the variable names from the hydro descriptor can be used by setting the field info.descriptor.usehydro = true . Furthermore, the user has the opportunity to overwrite the variable names in the discriptor list by changing the entries in the array:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"info.descriptor.hydro","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"6-element Array{Symbol,1}:\n :density         \n :velocity_x      \n :velocity_y      \n :velocity_z      \n :thermal_pressure\n :passive_scalar_1","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"For example:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"info.descriptor.hydro[2] = :vel_x;","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"info.descriptor.hydro","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"6-element Array{Symbol,1}:\n :density         \n :vel_x           \n :velocity_y      \n :velocity_z      \n :thermal_pressure\n :passive_scalar_1","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Get an overview of the loaded descriptor properties:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"viewfields(info.descriptor)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Descriptor overview\u001b\n\u001b =================================\u001b\nhversion\t= 0\nhydro\t= Symbol[:density, :vel_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1]\nhtypes\t= String[]\nusehydro\t= false\nhydrofile\t= true\npversion\t= 0\nparticles\t= Symbol[:vx, :vy, :vz, :mass, :birth]\nptypes\t= String[]\nuseparticles\t= false\nparticlesfile\t= false\ngravity\t= Symbol[:epot, :ax, :ay, :az]\nusegravity\t= false\ngravityfile\t= false\nclumps\t= Symbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nuseclumps\t= false\nclumpsfile\t= false\nsinks\t= Symbol[]\nusesinks\t= false\nsinksfile\t= false\nrt\t= Symbol[]\nusert\t= false\nrtfile\t= false","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Get a simple list of the fields:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"propertynames(info.descriptor)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"(:hversion, :hydro, :htypes, :usehydro, :hydrofile, :pversion, :particles, :ptypes, :useparticles, :particlesfile, :gravity, :usegravity, :gravityfile, :clumps, :useclumps, :clumpsfile, :sinks, :usesinks, :sinksfile, :rt, :usert, :rtfile)","category":"page"},{"location":"01_hydro_First_Inspection/#Load-AMR/Hydro-Data-1","page":"Hydro","title":"Load AMR/Hydro Data","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"info = getinfo(420, \"../../testing/simulations/manu_sim_sf_L10\", verbose=false); # used to overwrite the previous changes","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Read the AMR and the Hydro data from all files of the full box with all existing variables and cell positions (only leaf cells of the AMR grid).","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, smallr=1e-5);","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-12T20:43:29.834\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:54\u001b\n\n\nMemory used for data table :85.94877052307129 MB\n-------------------------------------------------------","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The memory consumption of the data table is printed at the end. We provide a function which gives the possibility to print the used memory of any object:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"usedmemory(gas);","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Memory used: 86.16 MB","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The assigned data object is now of type HydroDataType:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"typeof(gas)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"HydroDataType","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"It is a sub-type of ContainMassDataSetType","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"supertype( ContainMassDataSetType )","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"DataSetType","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"ContainMassDataSetType is a sub-type of to the super-type DataSetType","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"supertype( HydroDataType )","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"HydroPartType","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The data is stored in a JuliaDB table and the user selected hydro variables and parameters are assigned to fields:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"viewfields(gas)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"\u001b data ==> JuliaDB table: (:level, :cx, :cy, :cz, :rho, :vx, :vy, :vz, :p, :var6)\u001b\n\n\u001b info ==> subfields: (:output, :path, :fnames, :simcode, :mtime, :ctime, :ncpu, :ndim, :levelmin, :levelmax, :boxlen, :time, :aexp, :H0, :omega_m, :omega_l, :omega_k, :omega_b, :unit_l, :unit_d, :unit_m, :unit_v, :unit_t, :gamma, :hydro, :nvarh, :nvarp, :variable_list, :gravity_variable_list, :particles_variable_list, :clumps_variable_list, :sinks_variable_list, :descriptor, :amr, :gravity, :particles, :clumps, :sinks, :rt, :namelist, :namelist_content, :headerfile, :makefile, :files_content, :timerfile, :compilationfile, :patchfile, :Narraysize, :scale, :grid_info, :part_info, :compilation, :constants)\u001b\n\nlmin\t= 6\nlmax\t= 10\nboxlen\t= 48.0\nranges\t= [0.0, 1.0, 0.0, 1.0, 0.0, 1.0]\nselected_hydrovars\t= [1, 2, 3, 4, 5, 6]\nsmallr\t= 1.0e-5\nsmallc\t= 0.0\n\n\u001b scale ==> subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Msol_pc3, :g_cm3, :Msol_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :Ba)\u001b","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"For convenience, all the fields from the info-object above (InfoType) are now also accessible from the object with \"gas.info\" and the scaling relations from code to cgs units in \"gas.scale\". The minimum and maximum level of the loaded data, the box length, the selected ranges and number of the hydro variables are retained.","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"A minimum density or sound speed can be set for the loaded data (e.g. to overwrite negative densities) and is then represented by the fields smallr and smallc of the object gas (here). An example:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, smallr=1e-5);","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-12T20:44:27.671\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:55\u001b\n\n\nMemory used for data table :85.94877052307129 MB\n-------------------------------------------------------","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Print the fields of an object (composite type) in a simple list:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"propertynames(gas)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"(:data, :info, :lmin, :lmax, :boxlen, :ranges, :selected_hydrovars, :used_descriptors, :smallr, :smallc, :scale)","category":"page"},{"location":"01_hydro_First_Inspection/#Overview-of-AMR/Hydro-1","page":"Hydro","title":"Overview of AMR/Hydro","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Get an overview of the AMR structure associated with the object gas (HydroDataType). The printed information is stored into the object overview_amr as a JuliaDB table (code units)  and can be used for further calculations:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"overview_amr = amroverview(gas)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Counting...\n\n\n\n\n\nTable with 5 rows, 3 columns:\nlevel  cells   cellsize\n───────────────────────\n6      249057  0.75\n7      73010   0.375\n8      209058  0.1875\n9      321159  0.09375\n10     274248  0.046875","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Get some overview of the data that is associated with the object gas. The calculated information can be accessed from the object data_overview (here) in code units for further calculations:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"data_overview = dataoverview(gas)","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Calculating...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:01\u001b\n\n\n\n\n\nTable with 5 rows, 14 columns:\nColumns:\n #   \u001b  colname   \u001b  type\u001b\n──────────────────\n1   level     Any\n2   mass      Any\n3   rho_min   Any\n4   rho_max   Any\n5   vx_min    Any\n6   vx_max    Any\n7   vy_min    Any\n8   vy_max    Any\n9   vz_min    Any\n10  vz_max    Any\n11  p_min     Any\n12  p_max     Any\n13  var6_min  Any\n14  var6_max  Any","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"If the number of columns is relatively long, the table is typically represented by an overview. To access certain columns, use the select function. The representation \":mass\" is called a quoted Symbol (see in Julia documentation):","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"using JuliaDB","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"select(data_overview, (:level,:mass, :rho_min, :rho_max ) )","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Table with 5 rows, 4 columns:\nlevel  mass      rho_min     rho_max\n───────────────────────────────────────\n6      1.75297   1.0e-5      0.00611279\n7      0.880087  1.0e-5      0.0201622\n8      2.29402   1.30505e-5  0.0927872\n9      2.95427   1.40099e-5  0.39797\n10     26.1408   4.18939e-5  379.907","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Get an array from the column \":mass\" in data_overview and scale it to the units Msol. The order of the calculated data is consistent with the table above:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"column(data_overview, :mass) * info.scale.Msol","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"5-element Array{Float64,1}:\n 1.752485761487614e9  \n 8.798434048277442e8  \n 2.2933832876377296e9\n 2.9534569318639927e9\n 2.6133591055943253e10","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Or simply convert the :mass data in the table to Msol units by manipulating the column:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"data_overview = transform(data_overview, :mass => :mass => value->value * info.scale.Msol);","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"select(data_overview, (:level, :mass, :rho_min, :rho_max ) )","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Table with 5 rows, 4 columns:\nlevel  mass        rho_min     rho_max\n─────────────────────────────────────────\n6      1.75249e9   1.0e-5      0.00611279\n7      8.79843e8   1.0e-5      0.0201622\n8      2.29338e9   1.30505e-5  0.0927872\n9      2.95346e9   1.40099e-5  0.39797\n10     2.61336e10  4.18939e-5  379.907","category":"page"},{"location":"01_hydro_First_Inspection/#Data-Inspection-1","page":"Hydro","title":"Data Inspection","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The data is associated with the field gas.data as a JuliaDB table (code units). Each row corresponds to a cell and each column to a property which makes it easy to  find, filter, map, aggregate, group the data, etc. More information can be found in the Mera tutorials or in: JuliaDB API Reference","category":"page"},{"location":"01_hydro_First_Inspection/#Table-View-1","page":"Hydro","title":"Table View","text":"","category":"section"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"The cell positions cx,cy,cz correspond to a uniform 3D array for each level. E.g., for level=8, the positions range from 1-256 for each dimension, for level=14, 1-16384 while not all positions within this range exist due to the complex AMR structure. The integers cx,cy,cz are used to reconstruct the grid in many functions of MERA and should not be modified.","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"gas.data","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Table with 1126532 rows, 10 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"A more detailed view into the data:","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"select(gas.data, (:level,:cx, :cy, :cz, :rho) )","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"Table with 1126532 rows, 5 columns:\n level  \u001b  cx   \u001b  cy   \u001b  cz   \u001b rho\n───────────────────────────────\n6      1    1    1    1.0e-5\n6      1    1    2    1.0e-5\n6      1    1    3    1.0e-5\n6      1    1    4    1.0e-5\n6      1    1    5    1.0e-5\n6      1    1    6    1.0e-5\n6      1    1    7    1.0e-5\n6      1    1    8    1.0e-5\n6      1    1    9    1.0e-5\n6      1    1    10   1.0e-5\n6      1    1    11   1.0e-5\n6      1    1    12   1.0e-5\n⋮\n10     822  507  516  0.0305045\n10     822  508  511  0.0551132\n10     822  508  512  0.0551132\n10     822  508  513  0.0845289\n10     822  508  514  0.0788161\n10     822  508  515  0.0305045\n10     822  508  516  0.0305045\n10     822  509  513  0.0861783\n10     822  509  514  0.0861783\n10     822  510  513  0.0861783\n10     822  510  514  0.0861783","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"","category":"page"},{"location":"01_hydro_First_Inspection/#","page":"Hydro","title":"Hydro","text":"","category":"page"},{"location":"03_particles_Get_Subregions/#.-Particles:-Get-Sub-Regions-of-Loaded-the-Data-1","page":"Particles","title":"3. Particles: Get Sub-Regions of Loaded the Data","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Load-the-Data-1","page":"Particles","title":"Load the Data","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"using Mera, PyPlot\nusing ColorSchemes\ncmap = ColorMap(ColorSchemes.lajolla.colors) # See http://www.fabiocrameri.ch/colourmaps.php\n\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");\nparticles = getparticles(info, :mass);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:29:31.468\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b \n\n\u001b [Mera]: Get particle data: 2020-02-18T23:29:46.476\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(4,) = (:mass,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\n\n\n\u001b Reading data...100%|████████████████████████████████████| Time: 0:00:03\u001b\n\n\nFound 5.089390e+05 particles\nMemory used for data table :19.4152889251709 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#Cuboid-Region-1","page":"Particles","title":"Cuboid Region","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Create-projections-of-the-full-box:-1","page":"Particles","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The generated objects include, e.g. the extent of the processed domain, that can be used to declare the specific range of the plots, while the field cextent gives the extent related to a given center (default: [0.,0.,0.]).","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"propertynames(proj_z)","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(:maps, :maps_unit, :maps_lmax, :maps_mode, :lmax_projected, :lmin, :lmax, :ref_time, :ranges, :extent, :cextent, :ratio, :boxlen, :scale, :info)","category":"page"},{"location":"03_particles_Get_Subregions/#Cuboid-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Particles","title":"Cuboid Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cuboid-Region:-Cutout-the-data-assigned-to-the-object-particles-1","page":"Particles","title":"Cuboid Region: Cutout the data assigned to the object particles","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"Note: The selected regions can be given relative to a user given center or to the box corner [0., 0., 0.] by default. The user can choose between standard notation 0:1 or physical length-units, defined in e.g. info.scale :","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion( particles, :cuboid,\n                                    xrange=[-4., 0.],\n                                    yrange=[-15. ,15.],\n                                    zrange=[-2. ,2.],\n                                    center=[:boxcenter],\n                                    range_unit=:kpc );","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:10.393\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :10.259977340698242 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The function subregion creates a new object with the same type as the object created by the function getparticles :","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"typeof(part_subregion)","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"PartDataType","category":"page"},{"location":"03_particles_Get_Subregions/#Cuboid-Region:-Projections-of-the-sub-region.-1","page":"Particles","title":"Cuboid Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=10, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=10, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=10, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cuboid-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Particles","title":"Cuboid Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion( particles, :cuboid,\n                                    xrange=[-4., 0.],\n                                    yrange=[-15. ,15.],\n                                    zrange=[-2. ,2.],\n                                    center=[24.,24.,24.],\n                                    range_unit=:kpc,\n                                    inverse=true);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:12.491\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.4166667 :: 0.5  \t==> 20.0 [kpc] :: 24.0 [kpc]\nymin::ymax: 0.1875 :: 0.8125  \t==> 9.0 [kpc] :: 39.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nMemory used for data table :9.156118392944336 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-15.,-15.,15.,15.,-15.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-4.,0.,0.,-4.,-4.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-15.,15.,15.,-15.,-15.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region-1","page":"Particles","title":"Cylindrical Region","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Create-projections-of-the-full-box:-2","page":"Particles","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Particles","title":"Cylindrical Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region:-Cutout-the-data-assigned-to-the-object-particles-1","page":"Particles","title":"Cylindrical Region: Cutout the data assigned to the object particles","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"Select the ranges of the cylinder in the unit \"kpc\", relative to the given center [13., 24., 24.]. The height refers to both z-directions from the plane.","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion(particles, :cylinder,\n                            radius=3.,\n                            height=2.,\n                            range_unit=:kpc,\n                            center=[13.,:bc,:bc],\n                            direction=:z);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:15.671\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :578.951171875 KB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region:-Projections-of-the-sub-region.-1","page":"Particles","title":"Cylindrical Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=10, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=10, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=10, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext = L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\n\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\n\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region:-Projections-of-the-sub-region-py-passing-a-different-center:-1","page":"Particles","title":"Cylindrical Region: Projections of the sub-region py passing a different center:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, direction=:z, center=[13., 24.,24.], range_unit=:kpc, lmax=10, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, direction=:y, center=[13., 24.,24.], range_unit=:kpc, lmax=10, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, direction=:x, center=[13., 24.,24.], range_unit=:kpc, lmax=10, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#The-ranges-of-the-plots-are-now-adapted-to-the-given-data-center:-1","page":"Particles","title":"The ranges of the plots are now adapted to the given data center:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta), 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Particles","title":"Cylindrical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion(particles, :cylinder,\n                                    radius=3.,\n                                    height=2.,\n                                    range_unit=:kpc,\n                                    center=[ (24. -11.),:bc,:bc],\n                                    direction=:z,\n                                    inverse=true);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:19.162\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2083333 :: 0.3333333  \t==> 10.0 [kpc] :: 16.0 [kpc]\nymin::ymax: 0.4375 :: 0.5625  \t==> 21.0 [kpc] :: 27.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRadius: 3.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :18.8507137298584 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 3. .* sin.(theta) .-11, 3 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.] .-11.,[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-3.,3.,3.,-3.,-3.],[-2.,-2.,2.,2.,-2.], color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Region-1","page":"Particles","title":"Spherical Region","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Create-projections-of-the-full-box:-3","page":"Particles","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Region:-The-red-lines-show-the-region-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Particles","title":"Spherical Region: The red lines show the region that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Region:-Cutout-the-data-assigned-to-the-object-particles-1","page":"Particles","title":"Spherical Region: Cutout the data assigned to the object particles","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"Select the radius of the sphere in the unit \"kpc\", relative to the given center [13., 24., 24.]:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion( particles, :sphere,\n                            radius=10.,\n                            range_unit=:kpc,\n                            center=[(24. -11.),24.,24.]);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:22.122\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :8.807950973510742 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Region:-Projections-of-the-sub-region.-1","page":"Particles","title":"Spherical Region: Projections of the sub-region.","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Region:-Get-the-data-outside-of-the-selected-region-(inverse-selection):-1","page":"Particles","title":"Spherical Region: Get the data outside of the selected region (inverse selection):","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = subregion( particles, :sphere,\n                            radius=10.,\n                            range_unit=:kpc,\n                            center=[(24. -11.),24.,24.],\n                            inverse=true);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:23.142\u001b\n\ncenter: [0.2708333, 0.5, 0.5] ==> [13.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.0625 :: 0.4791667  \t==> 3.0 [kpc] :: 23.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nRadius: 10.0 [kpc]\nMemory used for data table :10.608144760131836 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) .-11., 10 .* cos.(theta), color=\"red\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Combined/Nested/Shell-Sub-Regions-1","page":"Particles","title":"Combined/Nested/Shell Sub-Regions","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#The-sub-region-and-shell-functions-can-be-used-in-any-combination-with-each-other!-(Combined-with-overlapping-ranges-or-nested)-1","page":"Particles","title":"The sub-region and shell functions can be used in any combination with each other! (Combined with overlapping ranges or nested)","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"One Example:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"comb_region = subregion(particles, :cuboid, xrange=[-8.,8.], yrange=[-8.,8.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc, verbose=false)\ncomb_region2 = subregion(comb_region, :sphere, radius=12., center=[40.,24.,24.], range_unit=:kpc, inverse=true, verbose=false)\ncomb_region3 = subregion(comb_region2, :sphere, radius=12., center=[8.,24.,24.], range_unit=:kpc, inverse=true, verbose=false);\ncomb_region4 = subregion(comb_region3, :sphere, radius=12., center=[24.,5.,24.], range_unit=:kpc, inverse=true, verbose=false);\ncomb_region5 = subregion(comb_region4, :sphere, radius=12., center=[24.,43.,24.], range_unit=:kpc, inverse=true, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, verbose=false);\nproj_y = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter],direction=:y, verbose=false);\nproj_x = projection(comb_region5, :sd, unit=:Msol_pc2, center=[:boxcenter],direction=:x, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = LinRange(-pi, pi, 100)\n\nsubplot(1,3,1)\nim = imshow( log10.(permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.(permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Shell-1","page":"Particles","title":"Cylindrical Shell","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Create-projections-of-the-full-box:-4","page":"Particles","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Shell:-The-red-lines-show-the-shell-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Particles","title":"Cylindrical Shell: The red lines show the shell we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.(permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Shell:-1","page":"Particles","title":"Cylindrical Shell:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"Pass the height of the cylinder and the inner/outer radius of the shell in the unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = shellregion( particles, :cylinder,\n                                radius=[5.,10.],\n                                height=2.,\n                                range_unit=:kpc,\n                                center=[:boxcenter]);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:28.41\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :7.282835006713867 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, orientation=\"horizontal\", label=labeltext, pad=0.2);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Cylindrical-Shell:-Get-the-data-outside-of-the-selected-shell-(inverse-selection):-1","page":"Particles","title":"Cylindrical Shell: Get the data outside of the selected shell (inverse selection):","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = shellregion( particles, :cylinder,\n                                radius=[5.,10.],\n                                height=2.,\n                                range_unit=:kpc,\n                                center=[:boxcenter],\n                                inverse=true);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:30.228\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nHeight: 2.0 [kpc]\nMemory used for data table :12.133260726928711 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot([-10.,-10.,10.,10.,-10.], [-2.,2.,2.,-2.,-2.], color=\"red\")\nplot([-5.,-5,5.,5.,-5.], [-2.,2.,2.,-2.,-2.], color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"<a id=\"ShellRegionSphere\"></a>","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Shell-1","page":"Particles","title":"Spherical Shell","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#Create-projections-of-the-full-box:-5","page":"Particles","title":"Create projections of the full box:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(particles, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Shell:-The-red-lines-show-the-shell-that-we-want-to-cutout-as-a-sub-region-from-the-full-data:-1","page":"Particles","title":"Spherical Shell: The red lines show the shell that we want to cutout as a sub-region from the full data:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\",ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Shell:-1","page":"Particles","title":"Spherical Shell:","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"Select the inner and outer radius of the spherical shell in unit \"kpc\", relative to the box center [24., 24., 24.]:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = shellregion( particles, :sphere,\n                                radius=[5.,10.],\n                                range_unit=:kpc,\n                                center=[24.,24.,24.]);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:34.32\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :7.592016220092773 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Shell:-Projections-of-the-shell-region.-1","page":"Particles","title":"Spherical Shell: Projections of the shell-region.","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"The coordinates center is the center of the box:","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\",ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\",ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#Spherical-Shell:-Get-the-data-outside-of-the-selected-shell-region-(inverse-selection):-1","page":"Particles","title":"Spherical Shell: Get the data outside of the selected shell-region (inverse selection):","text":"","category":"section"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"part_subregion = shellregion( particles, :sphere,\n                                radius=[5.,10.],\n                                range_unit=:kpc,\n                                center=[:boxcenter],\n                                inverse=true);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"\u001b [Mera]: 2020-02-18T23:30:35.378\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nymin::ymax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\nzmin::zmax: 0.2916667 :: 0.7083333  \t==> 14.0 [kpc] :: 34.0 [kpc]\n\nInner radius: 5.0 [kpc]\nOuter radius: 10.0 [kpc]\nRadius diff: 5.0 [kpc]\nMemory used for data table :11.824079513549805 MB\n-------------------------------------------------------","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"proj_z = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:z, lmax=8, verbose=false);\nproj_y = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:y, lmax=8, verbose=false);\nproj_x = projection(part_subregion, :sd, unit=:Msol_pc2, center=[:boxcenter], direction=:x, lmax=8, verbose=false);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"figure(figsize=(15.5, 3.5))\nlabeltext=L\"\\mathrm{log10(\\Sigma) \\ [M_{\\odot} pc^{-2}]}\"\ntheta = range(-pi, stop=pi, length=100)\n\nsubplot(1,3,1)\nim = imshow( log10.( permutedims(proj_z.maps[:sd]) ), cmap=cmap, aspect=proj_z.ratio, origin=\"lower\", extent=proj_z.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"y [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,2)\nim = imshow( log10.( permutedims(proj_y.maps[:sd]) ), cmap=cmap, aspect=proj_y.ratio, origin=\"lower\", extent=proj_y.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"x [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext)\n\nsubplot(1,3,3)\nim = imshow( log10.( permutedims(proj_x.maps[:sd]) ), cmap=cmap, aspect=proj_x.ratio, origin=\"lower\", extent=proj_x.cextent, vmin=0, vmax=3)\nplot( 10. .* sin.(theta) , 10 .* cos.(theta), color=\"red\")\nplot( 5. .* sin.(theta) , 5. .* cos.(theta), color=\"red\", ls=\"--\")\nxlabel(\"y [kpc]\")\nylabel(\"z [kpc]\")\ncb = colorbar(im, label=labeltext);","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"(Image: png)","category":"page"},{"location":"03_particles_Get_Subregions/#","page":"Particles","title":"Particles","text":"","category":"page"},{"location":"04_multi_Basic_Calculations/#.-Basic-Calculations-1","page":"4-Basic Calculations","title":"4. Basic Calculations","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The following functions process different types of DataSetType:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"ContainMassDataSetType,\nHydroPartType,\nHydroDataType,\nPartDataType,\nClumpDataType.","category":"page"},{"location":"04_multi_Basic_Calculations/#Load-The-Data-1","page":"4-Basic Calculations","title":"Load The Data","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");\ngas       = gethydro(info, [:rho, :vx, :vy, :vz], lmax=8);\nparticles = getparticles(info, [:mass, :vx, :vy, :vz])\nclumps    = getclumps(info);","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"┌ Info: Precompiling Mera [02f895e8-fdb1-4346-8fe6-c721699f5126]\n└ @ Base loading.jl:1273\n\n\n\n*__   __ _______ ______   _______\n|  |_|  |       |    _ | |   _   |\n|       |    ___|   | || |  |_|  |\n|       |   |___|   |_||_|       |\n|       |    ___|    __  |       |\n| ||_|| |   |___|   |  | |   _   |\n|_|   |_|_______|___|  |_|__| |__|\n\n\u001b [Mera]: 2020-02-15T21:12:42.671\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b\n\n\u001b [Mera]: Get hydro data: 2020-02-15T21:12:50.488\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4) = (:rho, :vx, :vy, :vz)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:02:13\u001b\n\n\nMemory used for data table :51.840110778808594 MB\n-------------------------------------------------------\n\n\u001b [Mera]: Get particle data: 2020-02-15T21:15:06.908\u001b\n\nKey vars=(:level, :x, :y, :z, :id)\nUsing var(s)=(1, 2, 3, 4) = (:vx, :vy, :vz, :mass)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\n\n\n Reading data...100%|████████████████████████████████████| Time: 0:00:02\u001b\n\n\nFound 5.089390e+05 particles\nMemory used for data table :31.064278602600098 MB\n-------------------------------------------------------\n\n\u001b [Mera]: Get clump data: 2020-02-15T21:15:11.574\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"04_multi_Basic_Calculations/#Note-1","page":"4-Basic Calculations","title":"Note","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Many functions can provide the results in selected units. The internal scaling from code to physical units makes use of the following defined relations:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"viewfields(info.scale)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMsol_pc3\t= 0.9997234790001649\ng_cm3\t= 6.76838218451376e-23\nMsol_pc2\t= 999.7234790008131\ng_cm2\t= 0.20885045168302602\nGyr\t= 0.014910986463557083\nMyr\t= 14.910986463557084\nyr\t= 1.4910986463557083e7\ns\t= 4.70554946422349e14\nms\t= 4.70554946422349e17\nMsol\t= 9.99723479002109e8\nMearth\t= 3.329677459032007e14\nMjupiter\t= 1.0476363431814971e12\ng\t= 1.9885499720830952e42\nkm_s\t= 65.57528732282063\nm_s\t= 65575.28732282063\ncm_s\t= 6.557528732282063e6\nnH\t= 30.987773856809987\nerg\t= 8.551000140274429e55\ng_cms2\t= 2.9104844143584656e-9\nT_mu\t= 517028.3199143136\nBa\t= 2.910484414358466e-9","category":"page"},{"location":"04_multi_Basic_Calculations/#Total-Mass-1","page":"4-Basic Calculations","title":"Total Mass","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The function msum calculates the total mass of the data that is assigned to the provided object. For the hydro-data, the mass is derived from the density and cell-size (level) of all elements. info.scale.Msol (or e.g.: gas.info.scale.Msol) scales the result from code units to solar masses:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas Mtot:       \", msum(gas)       * info.scale.Msol, \" Msol\" )\nprintln( \"Particles Mtot: \", msum(particles) * info.scale.Msol, \" Msol\" )\nprintln( \"Clumps Mtot:    \", msum(clumps)    * info.scale.Msol, \" Msol\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas Mtot:       2.6703951073850353e10 Msol\nParticles Mtot: 5.804426008528444e9 Msol\nClumps Mtot:    1.3743280681841675e10 Msol","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The units for the results can be calculated by the function itself by providing an unit-argument:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas Mtot:       \", msum(gas, :Msol)       , \" Msol\" )\nprintln( \"Particles Mtot: \", msum(particles, :Msol) , \" Msol\" )\nprintln( \"Clumps Mtot:    \", msum(clumps, :Msol)    , \" Msol\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas Mtot:       2.6703951073850353e10 Msol\nParticles Mtot: 5.804426008528437e9 Msol\nClumps Mtot:    1.3743280681841677e10 Msol","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The following methods are defined on the function msum:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods(msum)","category":"page"},{"location":"04_multi_Basic_Calculations/#Center-Of-Mass-1","page":"4-Basic Calculations","title":"Center-Of-Mass","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The function center_of_mass or com calculates the center-of-mass of the data that is assigned to the provided object.","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas COM:       \", center_of_mass(gas)       .* info.scale.kpc, \" kpc\" )\nprintln( \"Particles COM: \", center_of_mass(particles) .* info.scale.kpc, \" kpc\" )\nprintln( \"Clumps COM:    \", center_of_mass(clumps)    .* info.scale.kpc, \" kpc\" );","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas COM:       (23.327487354477643, 23.835419919525922, 24.041720148035843) kpc\nParticles COM: (22.891354761211332, 24.174147282680273, 24.003205056545575) kpc\nClumps COM:    (23.135765457064576, 23.741712325649264, 24.0050127185862) kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The units for the results can be calculated by the function itself by providing a unit-argument:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas COM:       \", center_of_mass(gas, :kpc)       , \" kpc\" )\nprintln( \"Particles COM: \", center_of_mass(particles, :kpc) , \" kpc\" )\nprintln( \"Clumps COM:    \", center_of_mass(clumps, :kpc)    , \" kpc\" );","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas COM:       (23.327487354477643, 23.835419919525922, 24.041720148035843) kpc\nParticles COM: (22.891354761211332, 24.174147282680273, 24.003205056545575) kpc\nClumps COM:    (23.135765457064576, 23.741712325649264, 24.0050127185862) kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"A shorter name for the function center_of_mass is defined as com :","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas COM:       \", com(gas, :kpc)       , \" kpc\" )\nprintln( \"Particles COM: \", com(particles, :kpc) , \" kpc\" )\nprintln( \"Clumps COM:    \", com(clumps, :kpc)    , \" kpc\" );","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas COM:       (23.327487354477643, 23.835419919525922, 24.041720148035843) kpc\nParticles COM: (22.891354761211332, 24.174147282680273, 24.003205056545575) kpc\nClumps COM:    (23.135765457064576, 23.741712325649264, 24.0050127185862) kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The result of the coordinates (x, y, z) can be assigned e.g. to a tuple or to three single variables:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"# return coordinates in a tuple\ncom_gas = com(gas, :kpc)\nprintln( \"Tuple:      \", com_gas, \" kpc\" )\n\n# return coordinates into variables\nx_pos, y_pos, z_pos = com(gas, :kpc);  #create variables\nprintln(\"Single vars: \", x_pos, \"  \", y_pos, \"  \", z_pos, \"  kpc\")","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Tuple:      (23.327487354477643, 23.835419919525922, 24.041720148035843) kpc\nSingle vars: 23.327487354477643  23.835419919525922  24.041720148035843  kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Calculate the joint centre-of-mass from the hydro and particle data. Provide the hydro and particle data with an array (independent order):","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Joint COM (Gas + Particles): \", center_of_mass([gas,particles], :kpc) , \" kpc\" )\nprintln( \"Joint COM (Particles + Gas): \", center_of_mass([particles,gas], :kpc) , \" kpc\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Joint COM (Gas + Particles): (23.24961513830681, 23.895900266222746, 24.03484321295537) kpc\nJoint COM (Particles + Gas): (23.24961513830681, 23.895900266222746, 24.03484321295537) kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use the shorter name com that is defined as the function center_of_mass :","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Joint COM (Gas + Particles): \", com([gas,particles], :kpc) , \" kpc\" )\nprintln( \"Joint COM (Particles + Gas): \", com([particles,gas], :kpc) , \" kpc\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Joint COM (Gas + Particles): (23.24961513830681, 23.895900266222746, 24.03484321295537) kpc\nJoint COM (Particles + Gas): (23.24961513830681, 23.895900266222746, 24.03484321295537) kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods(center_of_mass)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods(com)","category":"page"},{"location":"04_multi_Basic_Calculations/#Bulk-Velocity-1","page":"4-Basic Calculations","title":"Bulk Velocity","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The function bulk_velocity or average_velocity calculates the average velocity (w/o mass-weight) of the data that is assigned to the provided object. It can also be used for the clump data if it has velocity components: vx, vy, vz. The default is with mass-weighting:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas:       \", bulk_velocity(gas, :km_s)       , \" km/s\" )\nprintln( \"Particles: \", bulk_velocity(particles, :km_s) , \" km/s\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas:       (-1.4418303105424648, -11.708719305767849, -0.5393243496862975) km/s\nParticles: (-11.623422700314535, -18.440572802490234, -0.3291927731417528) km/s","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas:       \", average_velocity(gas, :km_s)       , \" km/s\" )\nprintln( \"Particles: \", average_velocity(particles, :km_s) , \" km/s\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas:       (-1.4418303105424648, -11.708719305767849, -0.5393243496862975) km/s\nParticles: (-11.623422700314535, -18.440572802490234, -0.3291927731417528) km/s","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Without mass-weighting:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"gas: volume or :no weighting\nparticles: no weighting","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas:       \", bulk_velocity(gas, :km_s, weighting=:volume)       , \" km/s\" )\nprintln( \"Particles: \", bulk_velocity(particles, :km_s, weighting=:no) , \" km/s\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas:       (1.5248458901822857, -8.770913864354458, -0.5037635305158431) km/s\nParticles: (-11.594477384589647, -18.38859118719373, -0.3097746295267971) km/s","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas:       \", average_velocity(gas, :km_s, weighting=:volume)       , \" km/s\" )\nprintln( \"Particles: \", average_velocity(particles, :km_s, weighting=:no) , \" km/s\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas:       (1.5248458901822857, -8.770913864354458, -0.5037635305158431) km/s\nParticles: (-11.594477384589647, -18.38859118719373, -0.3097746295267971) km/s","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods(bulk_velocity)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods(average_velocity)","category":"page"},{"location":"04_multi_Basic_Calculations/#Mass-Weighted-Average-1","page":"4-Basic Calculations","title":"Mass Weighted Average","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The functions center_of_mass and bulk_velocity use the function average_mweighted (average_mass-weighted) in the backend which can be feeded with any kind of variable that is pre-defined for the getvar() function or exists in the datatable. See the defined method and at getvar() below:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"methods( average_mweighted )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"<a id=\"Statistics\"></a>","category":"page"},{"location":"04_multi_Basic_Calculations/#Get-Predefined-Quantities-1","page":"4-Basic Calculations","title":"Get Predefined Quantities","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Here, we only show the examples with the hydro-data:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"info = getinfo(1, \"../../testing/simulations/manu_stable_2019\", verbose=false);\ngas = gethydro(info, [:rho, :vx, :vy, :vz], verbose=false);","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Reading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:56\u001b","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use getvar to extract variables or derive predefined quantities from the database, dependent on the data type. See the possible variables:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"getvar()","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Predefined vars that can be calculated for each cell/particle:\n----------------------------------------------------------------\n=============================[gas]:=============================\n       -all the non derived hydro vars-\n:cpu, :level, :rho, :cx, :cy, :cz, :vx, :vy, :vz, :p, var6,...\n\n              -derived hydro vars-\n:x, :y, :z\n:mass, :cellsize, :volume, :freefall_time\n:cs, :mach, :jeanslength, :jeansnumber\n\n==========================[particles]:==========================\n        all the non derived  vars:\n:cpu, :level, :id, :family, :tag\n:x, :y, :z, :vx, :vy, :vz, :mass, :birth, :metal....\n\n              -derived particle vars-\n:age\n\n===========================[clumps]:===========================\n:peak_x or :x, :peak_y or :y, :peak_z or :z\n:v, :ekin,...\n\n=====================[gas or particles]:=======================\n:v, :ekin\n\nrelated to a given center:\n---------------------------\n:r_cylinder, :r_sphere (radial components)\n:vr_cylinder\n:vϕ\n----------------------------------------------------------------","category":"page"},{"location":"04_multi_Basic_Calculations/#Get-a-Single-Quantity-1","page":"4-Basic Calculations","title":"Get a Single Quantity","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"In the following example, we calculate the mass for each cell of the hydro data.","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The output is a 1dim array in code units by default (mass1).\nEach element/cell can be scaled to Msol units by the elementwise multiplikation gas.scale.Msol (mass2).\nThe getvar function supports intrinsic scaling to a selected unit (mass3).\nThe selected unit does not need a keyword argument if the following order is maintained: dataobject, variable, unit","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"mass1 = getvar(gas, :mass) # [code units]\nmass2 = getvar(gas, :mass) * gas.scale.Msol # scale the result (1dim array) from code units to solar masses\nmass3 = getvar(gas, :mass, unit=:Msol) # unit calculation, provided by a keyword argument [Msol]\nmass4 = getvar(gas, :mass, :Msol) # unit calculation provided by an argument [Msol]\n\n# construct a three dimensional array to compare the three created arrays column wise:  \nmass_overview = [mass1 mass2 mass3 mass4]","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"37898393×4 Array{Float64,2}:\n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n 8.9407e-7   894.07     894.07     894.07   \n ⋮                                          \n 1.02889e-7  102.889    102.889    102.889  \n 1.02889e-7  102.889    102.889    102.889  \n 1.94423e-7  194.423    194.423    194.423  \n 1.94423e-7  194.423    194.423    194.423  \n 8.90454e-8   89.0454    89.0454    89.0454\n 8.90454e-8   89.0454    89.0454    89.0454\n 2.27641e-8   22.7641    22.7641    22.7641\n 2.27641e-8   22.7641    22.7641    22.7641\n 8.42157e-9    8.42157    8.42157    8.42157\n 8.42157e-9    8.42157    8.42157    8.42157\n 3.65085e-8   36.5085    36.5085    36.5085\n 3.65085e-8   36.5085    36.5085    36.5085","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Furthermore, we provide a simple function to get the mass of each cell in code units:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"getmass(gas)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"37898393-element Array{Float64,1}:\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n 8.940696716308594e-7\n ⋮                    \n 1.0288910576564388e-7\n 1.0288910576564388e-7\n 1.9442336261293343e-7\n 1.9442336261293343e-7\n 8.90453891574347e-8  \n 8.90453891574347e-8  \n 2.276412192306883e-8\n 2.276412192306883e-8\n 8.421571563820485e-9\n 8.421571563820485e-9\n 3.650851622718898e-8\n 3.650851622718898e-8","category":"page"},{"location":"04_multi_Basic_Calculations/#Get-Multiple-Quantities-1","page":"4-Basic Calculations","title":"Get Multiple Quantities","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Get several quantities with one function call by passing an array containing the selected variables. getvar returns a dictionary containing 1dim arrays for each quantity in code units:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :ekin])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 2 entries:\n  :mass => [8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8…\n  :ekin => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  2.28274e-7, 2.…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The units for each quantity can by passed as an array to the keyword argument \"units\" (plural, compare with single quantitiy call above) by preserving the order of the vars argument:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :ekin], units=[:Msol, :erg])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 2 entries:\n  :mass => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894…\n  :ekin => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  1.95354e49, 1.…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The function can be called without any keywords by preserving the following order: dataobject, variables, units","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :ekin], [:Msol, :erg])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 2 entries:\n  :mass => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894…\n  :ekin => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  1.95354e49, 1.…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The arrays of the single quantities can be accessed from the dictionary:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities[:mass]","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"37898393-element Array{Float64,1}:\n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n 894.0696716308591  \n   ⋮                \n 102.88910576564386\n 102.88910576564386\n 194.42336261293337\n 194.42336261293337\n  89.04538915743468\n  89.04538915743468\n  22.764121923068824\n  22.764121923068824\n   8.421571563820482\n   8.421571563820482\n  36.50851622718897\n  36.50851622718897","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"If all selected variables should be of the same unit use the following arguments: dataobject, array of quantities, unit (no array needed):","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:vx, :vy, :vz], :km_s)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 3 entries:\n  :vy => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  -97.5301, -97.53…\n  :vz => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 0…\n  :vx => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  -24.307, -24.307…","category":"page"},{"location":"04_multi_Basic_Calculations/#Get-Quantities-related-to-a-center-1","page":"4-Basic Calculations","title":"Get Quantities related to a center","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Some quantities are related to a given center, e.g. radius in cylindrical coordinates, see the overview :","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"getvar()","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Predefined vars that can be calculated for each cell/particle:\n----------------------------------------------------------------\n=============================[gas]:=============================\n       -all the non derived hydro vars-\n:cpu, :level, :rho, :cx, :cy, :cz, :vx, :vy, :vz, :p, var6,...\n\n              -derived hydro vars-\n:x, :y, :z\n:mass, :cellsize, :volume, :freefall_time\n:cs, :mach, :jeanslength, :jeansnumber\n\n==========================[particles]:==========================\n        all the non derived  vars:\n:cpu, :level, :id, :family, :tag\n:x, :y, :z, :vx, :vy, :vz, :mass, :birth, :metal....\n\n              -derived particle vars-\n:age\n\n===========================[clumps]:===========================\n:peak_x or :x, :peak_y or :y, :peak_z or :z\n:v, :ekin,...\n\n=====================[gas or particles]:=======================\n:v, :ekin\n\nrelated to a given center:\n---------------------------\n:r_cylinder, :r_sphere (radial components)\n:vr_cylinder\n:vϕ\n----------------------------------------------------------------","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The unit of the provided center-array (in cartesian coordinates: x,y.z) is given by the keyword argument center_unit (default: code units). The function returns the quantitites in code units:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"cv = (gas.boxlen / 2.) * gas.scale.kpc # provide the box-center in kpc\n# e.g. for :mass the center keyword is ignored\nquantities = getvar(gas, [:mass, :r_cylinder], center=[cv, cv, cv], center_unit=:kpc)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 2 entries:\n  :r_cylinder => [70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583…\n  :mass       => [8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407e-7, 8.9407…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Here, the function returns the result in the units that are provided. Note: E.g. the quantities :mass and :v (velocity) are not affected by the given center.","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :r_cylinder, :v], units=[:Msol, :kpc, :km_s], center=[cv, cv, cv], center_unit=:kpc)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 3 entries:\n  :r_cylinder => [70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583…\n  :v          => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  100.513,…\n  :mass       => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.0…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z). In this case the keyword center_unit is ignored:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :r_cylinder, :v], units=[:Msol, :kpc, :km_s], center=[:boxcenter])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 3 entries:\n  :r_cylinder => [70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583…\n  :v          => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  100.513,…\n  :mass       => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.0…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :r_cylinder, :v], units=[:Msol, :kpc, :km_s], center=[:bc])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 3 entries:\n  :r_cylinder => [70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583, 70.1583…\n  :v          => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  100.513,…\n  :mass       => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.0…","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use the box center notation for individual dimensions, here x,z. The keyword center_unit is needed for the y-coordinates:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"quantities = getvar(gas, [:mass, :r_cylinder, :v], units=[:Msol, :kpc, :km_s], center=[:bc, 24., :bc], center_unit=:kpc)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Dict{Any,Any} with 3 entries:\n  :r_cylinder => [54.9408, 54.9408, 54.9408, 54.9408, 54.9408, 54.9408, 54.9408…\n  :v          => [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  100.513,…\n  :mass       => [894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.07, 894.0…","category":"page"},{"location":"04_multi_Basic_Calculations/#Create-Costum-Quantities-1","page":"4-Basic Calculations","title":"Create Costum Quantities","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Example1: Represent the positions of the data as the radius for a disk, centred in the simulation box (cylindrical coordinates):","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"boxlen = info.boxlen\ncv = boxlen / 2. # box-center\nlevels = getvar(gas, :level) # get the level of each cell\ncellsize = boxlen ./ 2 .^levels # calculate the cellsize for each cell (code units)\n\n# or use the predefined quantity\ncellsize = getvar(gas, :cellsize)\n\n\n# convert the cell-number (related to the levels) into positions (code units), relative to the box center\nx = getvar(gas, :cx) .* cellsize .- cv # (code units)\ny = getvar(gas, :cy) .* cellsize .- cv # (code units)\n\n# or use the predefined quantity\nx = getvar(gas, :x, center=[:bc])\ny = getvar(gas, :y, center=[:bc])\n\n\n# calculate the cylindrical radius and scale from code units to kpc\nradius = sqrt.(x.^2 .+ y.^2) .* info.scale.kpc","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"37898393-element Array{Float64,1}:\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n 70.15825094589823\n  ⋮               \n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808\n 20.08587520654808","category":"page"},{"location":"04_multi_Basic_Calculations/#Use-JuliaDB-Functions-1","page":"4-Basic Calculations","title":"Use JuliaDB Functions","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"see https://juliadb.org","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"using JuliaDB","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Example: Get the mass for each gas cell: mi  = ρi * cellvolumei = ρ_i * (boxlen / 2^level)^3","category":"page"},{"location":"04_multi_Basic_Calculations/#Version-1-1","page":"4-Basic Calculations","title":"Version 1","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use the select function and calculate the mass for each cell:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"boxlen = gas.boxlen\nlevel = select(gas.data, :level ) # get level information from each cell\ncellvol = (boxlen ./ 2 .^level).^3 # calculate volume for each cell\nmass1 = select(gas.data, :rho) .* cellvol .* info.scale.Msol; # calculate the mass for each cell in Msol units","category":"page"},{"location":"04_multi_Basic_Calculations/#Version-2-1","page":"4-Basic Calculations","title":"Version 2","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use a single time the select function to do the calculations from above :","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"mass2 = select( gas.data, (:rho, :level)=>p->p.rho * (boxlen / 2^p.level)^3 ) .* info.scale.Msol;","category":"page"},{"location":"04_multi_Basic_Calculations/#Version-3-1","page":"4-Basic Calculations","title":"Version 3","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Use the map function to do the calculations from above :","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"mass3 = map(p->p.rho * (boxlen / 2^p.level)^3, gas.data) .* info.scale.Msol;","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Comparison of the results:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"[mass1 mass2 mass3]","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"37898393×3 Array{Float64,2}:\n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n 894.07     894.07     894.07   \n   ⋮                            \n 102.889    102.889    102.889  \n 102.889    102.889    102.889  \n 194.423    194.423    194.423  \n 194.423    194.423    194.423  \n  89.0454    89.0454    89.0454\n  89.0454    89.0454    89.0454\n  22.7641    22.7641    22.7641\n  22.7641    22.7641    22.7641\n   8.42157    8.42157    8.42157\n   8.42157    8.42157    8.42157\n  36.5085    36.5085    36.5085\n  36.5085    36.5085    36.5085","category":"page"},{"location":"04_multi_Basic_Calculations/#Statistical-Quantities-1","page":"4-Basic Calculations","title":"Statistical Quantities","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"info = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\", verbose=false);\ngas       = gethydro(info, [:rho, :vx, :vy, :vz], lmax=8, smallr=1e-5, verbose=false);\nparticles = getparticles(info, [:mass, :vx, :vy, :vz], verbose=false)\nclumps    = getclumps(info, verbose=false);","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Reading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:02:22\u001b\n Reading data...100%|████████████████████████████████████| Time: 0:00:03\u001b","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Pass any kind of Array{<:Real,1} (Float, Integer,...) to the wstat function to get several unweighted statistical quantities at once:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"stats_gas       = wstat( getvar(gas,       :vx,     :km_s)     )\nstats_particles = wstat( getvar(particles, :vx,     :km_s)     )\nstats_clumps    = wstat( getvar(clumps,    :rho_av, :Msol_pc3) );","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The result is an object that contains several fields with the statistical quantities:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( typeof(stats_gas) )\nprintln( typeof(stats_particles) )\nprintln( typeof(stats_clumps) )\npropertynames(stats_gas)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Mera.WStatType\nMera.WStatType\nMera.WStatType\n\n\n\n\n\n(:mean, :median, :std, :skewness, :kurtosis, :min, :max)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas        <vx>_allcells     : \",  stats_gas.mean,       \" km/s\" )\nprintln( \"Particles  <vx>_allparticles : \",  stats_particles.mean, \" km/s\" )\nprintln( \"Clumps <rho_av>_allclumps    : \",  stats_clumps.mean,    \" Msol/pc^3\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas        <vx>_allcells     : -2.9318774650713726 km/s\nParticles  <vx>_allparticles : -11.594477384589647 km/s\nClumps <rho_av>_allclumps    : 594.7315900915924 Msol/pc^3","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas        min/max_allcells     : \",  stats_gas.min,      \"/\", stats_gas.max,       \" km/s\" )\nprintln( \"Particles  min/max_allparticles : \",  stats_particles.min,\"/\", stats_particles.max, \" km/s\" )\nprintln( \"Clumps     min/max_allclumps    : \",  stats_clumps.min,   \"/\", stats_clumps.max,    \" Msol/pc^3\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas        min/max_allcells     : -676.5464963488397/894.9181733956399 km/s\nParticles  min/max_allparticles : -874.6440509326601/670.7956741234592 km/s\nClumps     min/max_allclumps    : 125.4809686796669/5357.370234867635 Msol/pc^3","category":"page"},{"location":"04_multi_Basic_Calculations/#Weighted-Statistics-1","page":"4-Basic Calculations","title":"Weighted Statistics","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Pass any kind of Array{<:Real,1} (Float, Integer,...) for the given variables and one for the weighting with the same length. The weighting goes cell by cell, particle by particle, clump by clump, etc...:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"stats_gas       = wstat( getvar(gas,       :vx,     :km_s), weight=getvar(gas,       :mass  ));\nstats_particles = wstat( getvar(particles, :vx,     :km_s), weight=getvar(particles, :mass   ));\nstats_clumps    = wstat( getvar(clumps,    :peak_x, :kpc ), weight=getvar(clumps,    :mass_cl))  ;","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Without the keyword weight the following order for the given arrays has to be maintained: values, weight","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"stats_gas       = wstat( getvar(gas,       :vx,     :km_s), getvar(gas,       :mass  ));\nstats_particles = wstat( getvar(particles, :vx,     :km_s), getvar(particles, :mass   ));\nstats_clumps    = wstat( getvar(clumps,    :peak_x, :kpc ), getvar(clumps,    :mass_cl))  ;","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"propertynames(stats_gas)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"(:mean, :median, :std, :skewness, :kurtosis, :min, :max)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas        <vx>_allcells     : \",  stats_gas.mean,       \" km/s (mass weighted)\" )\nprintln( \"Particles  <vx>_allparticles : \",  stats_particles.mean, \" km/s (mass weighted)\" )\nprintln( \"Clumps <peak_x>_allclumps    : \",  stats_clumps.mean,    \" kpc  (mass weighted)\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas        <vx>_allcells     : -1.199925358479736 km/s (mass weighted)\nParticles  <vx>_allparticles : -11.623422700314544 km/s (mass weighted)\nClumps <peak_x>_allclumps    : 23.13576545706458 kpc  (mass weighted)","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas        min/max_allcells     : \",  stats_gas.min,      \"/\", stats_gas.max,       \" km/s\" )\nprintln( \"Particles  min/max_allparticles : \",  stats_particles.min,\"/\", stats_particles.max, \" km/s\" )\nprintln( \"Clumps     min/max_allclumps    : \",  stats_clumps.min,   \"/\", stats_clumps.max,    \" Msol/pc^3\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas        min/max_allcells     : -676.5464963488397/894.9181733956399 km/s\nParticles  min/max_allparticles : -874.6440509326601/670.7956741234592 km/s\nClumps     min/max_allclumps    : 10.29199219000667/38.17382813002474 Msol/pc^3","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"For the average of the gas-density use volume weighting:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"stats_gas = wstat( getvar(gas, :rho, :g_cm3), weight=getvar(gas, :volume) );","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"println( \"Gas  <rho>_allcells : \",  stats_gas.mean,  \" g/cm^3 (volume weighted)\" )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Gas  <rho>_allcells : 0.008679815788762611 g/cm^3 (volume weighted)","category":"page"},{"location":"04_multi_Basic_Calculations/#Helpful-Functions-1","page":"4-Basic Calculations","title":"Helpful Functions","text":"","category":"section"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Get the x,y,z positions of every cell relative to a given center:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"x,y,z = getpositions(gas, :kpc, center=[24.,24.,24.], center_unit=:kpc); # returns a Tuple of 3 arrays","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"The box-center can be calculated automatically:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"x,y,z = getpositions(gas, :kpc, center=[:boxcenter]);","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"[x y z] # preview of the output","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"849332×3 Array{Float64,2}:\n -23.25   -23.25    -23.25  \n -23.25   -23.25    -22.5   \n -23.25   -23.25    -21.75  \n -23.25   -23.25    -21.0   \n -23.25   -23.25    -20.25  \n -23.25   -23.25    -19.5   \n -23.25   -23.25    -18.75  \n -23.25   -23.25    -18.0   \n -23.25   -23.25    -17.25  \n -23.25   -23.25    -16.5   \n -23.25   -23.25    -15.75  \n -23.25   -23.25    -15.0   \n -23.25   -23.25    -14.25  \n   ⋮                        \n  16.125    3.9375    0.1875\n  16.125    3.9375    0.375\n  16.125    3.9375    0.5625\n  16.125    3.9375    0.75  \n  16.125    4.125    -0.5625\n  16.125    4.125    -0.375\n  16.125    4.125    -0.1875\n  16.125    4.125     0.0   \n  16.125    4.125     0.1875\n  16.125    4.125     0.375\n  16.125    4.125     0.5625\n  16.125    4.125     0.75","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Get the extent of the dataset-domain:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"getextent(gas) # returns Tuple of (xmin, xmax), (ymin ,ymax ), (zmin ,zmax )","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"((0.0, 48.0), (0.0, 48.0), (0.0, 48.0))","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"Get the extent relative to a given center:","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"getextent(gas, center=[:boxcenter])","category":"page"},{"location":"04_multi_Basic_Calculations/#","page":"4-Basic Calculations","title":"4-Basic Calculations","text":"((-24.0, 24.0), (-24.0, 24.0), (-24.0, 24.0))","category":"page"},{"location":"02_clumps_Load_Selections/#.-Clumps:-Load-Selected-Variables-and-Data-Ranges-1","page":"Clumps","title":"2. Clumps: Load Selected Variables and Data Ranges","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#Simulation-Overview-1","page":"Clumps","title":"Simulation Overview","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"using Mera\ninfo = getinfo(400, \"../../testing/simulations/manu_sim_sf_L14\");","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: 2020-02-08T13:43:44.724\u001b\n\nCode: RAMSES\noutput [400] summary:\nmtime: 2018-09-05T09:51:55.041\nctime: 2019-11-01T17:35:21.051\n\u001b =======================================================\u001b\nsimulation time: 594.98 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 2048\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 14 --> cellsize(s): 750.0 [pc] - 2.93 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  7  --> (:rho, :vx, :vy, :vz, :p, :var6, :var7)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)\nγ: 1.6667\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\n- Npart:    5.091500e+05\n- Nstars:   5.066030e+05\n- Ndm:      2.547000e+03\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"02_clumps_Load_Selections/#Select-Variables-1","page":"Clumps","title":"Select Variables","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"MERA reads the first line of a clump file to identify the number of columns and their names.","category":"page"},{"location":"02_clumps_Load_Selections/#Read-all-variables-(default)-1","page":"Clumps","title":"Read all variables (default)","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:43:54.134\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps.data","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Table with 644 rows, 12 columns:\nColumns:\n #   \u001b  colname    \u001b  type\u001b\n──────────────────────\n1   index      Float64\n2   lev        Float64\n3   parent     Float64\n4   ncell      Float64\n5   peak_x     Float64\n6   peak_y     Float64\n7   peak_z     Float64\n8   rho-       Float64\n9   rho+       Float64\n10  rho_av     Float64\n11  mass_cl    Float64\n12  relevance  Float64","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"The colum names should not be changed, since they are assumed in some functions. The usage of individual descriptor variables will be implemented in the future.","category":"page"},{"location":"02_clumps_Load_Selections/#Select-several-variables-w/o-a-keyword-1","page":"Clumps","title":"Select several variables w/o a keyword","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Currently, the length of the loaded variable list can be modified. E.g. the list can be extended with more names if there are more columns in the data than given by the header in the files.","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Load less than the found 12 columns from the header of the clump files; Pass an array with the variables to the keyword argument vars. The order of the variables has to be consistent with the header in the clump files:}","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info, vars=[ :index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z]);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:01.434\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 7 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z]\nMemory used for data table :36.1083984375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Pass an array that contains the variables without the keyword argument vars. The following order has to be preserved: InfoType-object, variables","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info, [ :index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z]);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:03.36\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 7 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z]\nMemory used for data table :36.1083984375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps.data","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Table with 644 rows, 7 columns:\nindex   lev  parent  ncell   peak_x   peak_y   peak_z\n──────────────────────────────────────────────────────\n4.0     0.0  4.0     740.0   20.1094  11.5005  23.9604\n5.0     0.0  5.0     1073.0  20.1592  11.5122  23.9253\n9.0     0.0  9.0     551.0   21.7852  17.855   23.814\n12.0    0.0  12.0    463.0   21.8232  17.8608  23.855\n13.0    0.0  13.0    2141.0  21.8906  17.2837  23.5415\n18.0    0.0  18.0    691.0   21.7822  16.8823  23.7817\n19.0    0.0  19.0    608.0   21.75    16.8589  23.7993\n20.0    0.0  20.0    1253.0  21.6006  17.5679  23.7935\n25.0    0.0  25.0    1275.0  21.5801  17.6177  23.9341\n26.0    0.0  26.0    1212.0  21.5859  17.5796  23.9165\n29.0    0.0  29.0    1759.0  21.5625  17.5854  23.8726\n46.0    0.0  46.0    4741.0  21.5215  17.6235  23.9458\n⋮\n2115.0  0.0  2115.0  1071.0  27.7705  13.2788  23.8081\n2116.0  0.0  2116.0  839.0   27.7617  13.3081  23.8081\n2117.0  0.0  2117.0  753.0   27.7793  13.2993  23.6851\n2120.0  0.0  2120.0  866.0   27.7559  13.1792  23.8638\n2125.0  0.0  2125.0  181.0   27.7939  13.0298  23.9194\n2128.0  0.0  2128.0  296.0   27.791   13.0649  23.9019\n2131.0  0.0  2131.0  323.0   28.3037  12.8188  23.9487\n2132.0  0.0  2132.0  615.0   28.626   12.8188  23.8755\n2137.0  0.0  2137.0  318.0   29.9736  15.0571  23.7202\n2140.0  0.0  2140.0  1719.0  27.1436  15.6401  23.9048\n2147.0  0.0  2147.0  1535.0  25.1953  9.93604  23.9897","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Load more than the found 12 columns from the header of the clump files. The order of the variables has to be consistent with the header in the clump files:","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info, vars=[  :index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance, :vx, :vy, :vz]);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:04.175\u001b\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nRead 15 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance, :vx, :vy, :vz]\nMemory used for data table :77.1787109375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps.data","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Table with 644 rows, 15 columns:\nColumns:\n #   \u001b  colname    \u001b  type\u001b\n──────────────────────\n1   index      Float64\n2   lev        Float64\n3   parent     Float64\n4   ncell      Float64\n5   peak_x     Float64\n6   peak_y     Float64\n7   peak_z     Float64\n8   rho-       Float64\n9   rho+       Float64\n10  rho_av     Float64\n11  mass_cl    Float64\n12  relevance  Float64\n13  vx         Float64\n14  vy         Float64\n15  vz         Float64","category":"page"},{"location":"02_clumps_Load_Selections/#Select-Spatial-Ranges-1","page":"Clumps","title":"Select Spatial Ranges","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#Use-RAMSES-Standard-Notation-1","page":"Clumps","title":"Use RAMSES Standard Notation","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Ranges correspond to the domain [0:1]^3 and are related to the box corner at [0., 0., 0.] by default.","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[0.2,0.8],\n                    yrange=[0.2,0.8],\n                    zrange=[0.4,0.6]);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:06.579\u001b\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 19.2 [kpc] :: 28.8 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"The loaded data ranges are assigned to the field ranges in an array in  RAMSES standard notation (domain: [0:1]^3):","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps.ranges","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"6-element Array{Float64,1}:\n 0.2\n 0.8\n 0.2\n 0.8\n 0.4\n 0.6","category":"page"},{"location":"02_clumps_Load_Selections/#Ranges-relative-to-a-given-center:-1","page":"Clumps","title":"Ranges relative to a given center:","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[-0.3, 0.3],\n                    yrange=[-0.3, 0.3],\n                    zrange=[-0.1, 0.1],\n                    center=[0.5, 0.5, 0.5]);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:09.633\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 19.2 [kpc] :: 28.8 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#Use-notation-in-physical-units-1","page":"Clumps","title":"Use notation in physical units","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"In the following example the ranges are given in units \"kpc\", relative to the box corner 0., 0., 0.:","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[2.,22.],\n                    yrange=[2.,22.],\n                    zrange=[22.,26.],\n                    range_unit=:kpc);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:09.96\u001b\n\ndomain:\nxmin::xmax: 0.0416667 :: 0.4583333  \t==> 2.0 [kpc] :: 22.0 [kpc]\nymin::ymax: 0.0416667 :: 0.4583333  \t==> 2.0 [kpc] :: 22.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :12.83984375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"The possible physical length units for the keyword range_unit are defined in the field scale :","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"viewfields(info.scale) # or e.g.: clumps.info.scale","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMsol_pc3\t= 0.9997234790001649\ng_cm3\t= 6.76838218451376e-23\nMsol_pc2\t= 999.7234790008131\ng_cm2\t= 0.20885045168302602\nGyr\t= 0.014910986463557083\nMyr\t= 14.910986463557084\nyr\t= 1.4910986463557083e7\ns\t= 4.70554946422349e14\nms\t= 4.70554946422349e17\nMsol\t= 9.99723479002109e8\nMearth\t= 3.329677459032007e14\nMjupiter\t= 1.0476363431814971e12\ng\t= 1.9885499720830952e42\nkm_s\t= 65.57528732282063\nm_s\t= 65575.28732282063\ncm_s\t= 6.557528732282063e6\nnH\t= 30.987773856809987\nerg\t= 8.551000140274429e55\ng_cms2\t= 2.9104844143584656e-9\nT_mu\t= 517028.3199143136\nBa\t= 2.910484414358466e-9","category":"page"},{"location":"02_clumps_Load_Selections/#Ranges-relative-to-a-given-center-e.g.-in-units-\"kpc\":-1","page":"Clumps","title":"Ranges relative to a given center e.g. in units \"kpc\":","text":"","category":"section"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[-16.,16.],\n                    yrange=[-16.,16.],\n                    zrange=[-2.,2.],\n                    center=[24.,24.,24.],\n                    range_unit=:kpc);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:10.318\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z):","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[-16.,16.],\n                    yrange=[-16.,16.],\n                    zrange=[-2.,2.],\n                    center=[:boxcenter],\n                    range_unit=:kpc);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:11.159\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[-16.,16.],\n                    yrange=[-16.,16.],\n                    zrange=[-2.,2.],\n                    center=[:bc],\n                    range_unit=:kpc);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:11.478\u001b\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"Use the box center notation for individual dimensions, here x,z:","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"clumps = getclumps(info,\n                    xrange=[-16.,16.],\n                    yrange=[-16.,16.],\n                    zrange=[-2.,2.],\n                    center=[:bc, 24., :bc],\n                    range_unit=:kpc);","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"\u001b [Mera]: Get clump data: 2020-02-08T13:44:12.344\u001b \n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nRead 12 colums:\nSymbol[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance]\nMemory used for data table :61.77734375 KB\n-------------------------------------------------------","category":"page"},{"location":"02_clumps_Load_Selections/#","page":"Clumps","title":"Clumps","text":"","category":"page"},{"location":"examples/#Short-Tutorials-1","page":"Examples","title":"Short Tutorials","text":"","category":"section"},{"location":"examples/#","page":"Examples","title":"Examples","text":"Load from a sequence of existing simulations in a folder\nExport/Import data - ASCII/binary files","category":"page"},{"location":"#Home-1","page":"Home","title":"Home","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"(Image: Gitter) (Image: DOI)","category":"page"},{"location":"#","page":"Home","title":"Home","text":"MERA is a package for working with large 3D AMR/uniform-grid and N-body particle data sets from astrophysical simulations. It is entirely written in the language Julia and currently supports the hydrodynamic code RAMSES. With this package, I intend to provide essential functions to load and prepare the simulation data for calculations but try to avoid too high-level abstraction (black boxes).","category":"page"},{"location":"#Package-Features-1","page":"Home","title":"Package Features","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"Easy to install and update\nFast and memory lightweight data reading/saving and handling\nThe data is loaded and processed in a database framework JuliaDB.jl\nEfficient workflow\nMany functionalities for advanced analysis\nEasy to extend\nInteractive and script functionality\nMany examples and tutorials","category":"page"},{"location":"#","page":"Home","title":"Home","text":"note: Release Notes\nThis first public release includes not all available functions yet. Stable versions of the following functions will be published stepwise:Slicing\nSelect particle id/family etc. in projection function\nParticle age calculation for cosmological runs\nMera-files is a significant faster way to read/store the RAMSES data for time sequence analysis\nCreate Profiles of quantities and projected data\nReader for sinks, gravity, rt, ..\nCreate 1D, 2D histograms (phase plots)\nMore predefined quantities\nExport data into binary files to use with Paraview (volume rendering)\nTutorials to create 360° equirectangular projections\n...","category":"page"},{"location":"#Package-Installation-1","page":"Home","title":"Package Installation","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"The package is tested against Julia 1.3 and can be installed with the Julia package manager. From the Julia REPL, type ] to enter the Pkg REPL mode and run:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"pkg> add Mera","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Or, equivalently, via the Pkg API in the Jupyter notebook use","category":"page"},{"location":"#","page":"Home","title":"Home","text":"using Pkg\nPkg.add(\"Mera\")","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Optionally, precompile the downloaded package and all its dependencies:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"pkg> precompile","category":"page"},{"location":"#","page":"Home","title":"Home","text":"In the Jupyter notebook","category":"page"},{"location":"#","page":"Home","title":"Home","text":"using Pkg\nPkg.precompile()","category":"page"},{"location":"#","page":"Home","title":"Home","text":"note: Install Julia without admin privileges\nDownload the Linux binary from Julialang.org and untar it in your favored folder on your server. Define an alias in the .bashrc file that is pointing to julia:alias julia=\"/home/username/codes/julia/usr/bin/julia\"","category":"page"},{"location":"#Updates-1","page":"Home","title":"Updates","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"Watch on GitHub. Note: Before updating, always read the release notes. In Pkg REPL mode run:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"pkg> update Mera","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Or, equivalently,","category":"page"},{"location":"#","page":"Home","title":"Home","text":"using Pkg\nPkg.update(\"Mera\")","category":"page"},{"location":"#Reproducibility-1","page":"Home","title":"Reproducibility","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"Reproducibility is an essential requirement of the scientific process. Therefore, I recommend working with environments. Create independent projects that contain their list of used package dependencies and their versions. The possibility of creating projects ensures reproducibility of your programs on your or other platforms if, e.g. the code is shared (toml-files are added to the project folder). For more information see Julia environments. In order to create a new project \"activate\" your working directory:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"shell> cd MyProject\n/Users/you/MyProject\n\n(v1.3) pkg> activate .","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Now add packages like Mera and PyPlot in the favored version:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"(MyProject) pkg> add Package","category":"page"},{"location":"#Help-and-documentation-1","page":"Home","title":"Help and documentation","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"The exported functions and types in MERA are listed in the API documentation, but can also be accessed in the REPL or Jupyter notebook.","category":"page"},{"location":"#","page":"Home","title":"Home","text":"In the REPL use e.g. for the function getinfo:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"julia> ? # upon typing ?, the prompt changes (in place) to: help?>\n\nhelp?> getinfo\nsearch: getinfo SegmentationFault getindex getpositions MissingException\n\n  Get the simulation overview from RAMSES info, descriptor and output header files\n  ----------------------------------------------------------------------------------\n\n  getinfo(; output::Real=1, path::String=\"\", namelist::String=\"\", verbose::Bool=verbose_mode)\n  return InfoType\n\n  Keyword Arguments\n  -------------------\n\n    •    output: timestep number (default=1)\n\n    •    path: the path to the output folder relative to the current folder or absolute path\n\n    •    namelist: give the path to a namelist file (by default the namelist.txt-file in the output-folder is read)\n\n    •    verbose:: informations are printed on the screen by default: gloval variable verbose_mode=true\n\n  Examples\n  ----------\n...........","category":"page"},{"location":"#","page":"Home","title":"Home","text":"In the Jupyter notebook use e.g.:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"?getinfo\nsearch: getinfo SegmentationFault getindex getpositions MissingException\n\n  Get the simulation overview from RAMSES info, descriptor and output header files\n  ----------------------------------------------------------------------------------\n\n  getinfo(; output::Real=1, path::String=\"\", namelist::String=\"\", verbose::Bool=verbose_mode)\n  return InfoType\n\n  Keyword Arguments\n  -------------------\n\n    •    output: timestep number (default=1)\n\n    •    path: the path to the output folder relative to the current folder or absolute path\n\n    •    namelist: give the path to a namelist file (by default the namelist.txt-file in the output-folder is read)\n\n    •    verbose:: informations are printed on the screen by default: gloval variable verbose_mode=true\n\n  Examples\n  ----------\n...........","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Get a list of the defined methods of a function:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"julia> methods(viewfields)\n# 10 methods for generic function \"viewfields\":\n[1] viewfields(object::PhysicalUnitsType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:181\n[2] viewfields(object::Mera.FilesContentType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:166\n[3] viewfields(object::DescriptorType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:150\n[4] viewfields(object::FileNamesType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:134\n[5] viewfields(object::CompilationInfoType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:116\n[6] viewfields(object::GridInfoType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:90\n[7] viewfields(object::PartInfoType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:73\n[8] viewfields(object::ScalesType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:57\n[9] viewfields(object::InfoType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:12\n[10] viewfields(object::DataSetType) in Mera at /Users/mabe/Documents/Projects/dev/Mera/src/functions/viewfields.jl:197","category":"page"},{"location":"#Further-Notes-1","page":"Home","title":"Further Notes","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"To use the Jupyter interactive environment, please install IJulia (see IJulia)\nThe tutorials in the documentation can be downloaded from GitHub as Jupyter notebooks\nMera is tested against the RAMSES versions: =< stable-17.09, stable-18-09, stable-19-10\nThe variables from the descriptor-files are currently only read and can be used in a future Mera version\nFor simulations with a uniform grid is the column :level not created to reduce memory usage","category":"page"},{"location":"#Why-Julia?-1","page":"Home","title":"Why Julia?","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"In scientific computing, we are dealing with a steadily increasing amount of data. Highest performance is required, and therefore, most science-related libraries are written in low-level languages like C or Fortran with relatively long development times. The reduced data is often processed in a high-level language like Python. Julia is a relatively new and modern language, and it combines high-level programming with high-performance numerical computing. The syntax is simple and great for math. The just-in-time compilation allows for interactive coding and to achieve an optimized machine code on the fly. Both enhance prototyping and code readability. Therefore, complex projects can be realized in relatively short development times. ﻿​ Further features:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Package manager\nRuns on multiple platform\nMultiple dispatch\nBuild-in parallelism\nMetaprogramming\nDirectly call C, Fortran, Python (e.g. Matplotlib), R libraries, ...","category":"page"},{"location":"#","page":"Home","title":"Home","text":"….","category":"page"},{"location":"#Useful-Links-1","page":"Home","title":"Useful Links","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"Official Julia website\nLearning Julia\nWikibooks\nJulia Cheatsheet\nFree book ThinkJulia\nSynthax comparison: MATLAB–Python–Julia\nJulia forum JuliaDiscourse\nCourses on YouTube\nDatabase framework used in Mera: JuliaDB.jl\nInteresting Packages: JuliaAstro.jl, JuliaObserver.com\nUse Matplotlib in Julia: PyPlot.jl\nCall Python packages/functions from Julia: PyCall.jl\nVisual Studio Code based Julia IDE julia-vscode\nAtom based Julia IDE Juno","category":"page"},{"location":"#Contact-for-Questions-and-Contributing-1","page":"Home","title":"Contact for Questions and Contributing","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"If you have any questions about the package, please feel free to chat in the Gitter channel: (Image: Gitter)\nFor bug reports, etc., please submit an issue on GitHub","category":"page"},{"location":"#","page":"Home","title":"Home","text":"New ideas, feature requests are very welcome! MERA can be easily extended for other grid-based or N-body based data. Write an email to: mera[>]manuelbehrendt.com","category":"page"},{"location":"#Supporting-and-Citing-1","page":"Home","title":"Supporting and Citing","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"To credit the Mera software, please star the repository on GitHub. If you use the Mera software as part of your research, teaching, or other activities, I would be grateful if you could cite my work. To give proper academic credit, follow the link for BibTeX export: (Image: DOI)","category":"page"},{"location":"#License-1","page":"Home","title":"License","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"MIT License","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Copyright (c) 2019 Manuel Behrendt","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:","category":"page"},{"location":"#","page":"Home","title":"Home","text":"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.","category":"page"},{"location":"#","page":"Home","title":"Home","text":"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","category":"page"},{"location":"02_hydro_Load_Selections/#.-Hydro:-Load-Selected-Variables-and-Data-Ranges-1","page":"Hydro","title":"2. Hydro: Load Selected Variables and Data Ranges","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#Simulation-Overview-1","page":"Hydro","title":"Simulation Overview","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"using Mera\ninfo = getinfo(420, \"../../testing/simulations/manu_sim_sf_L10\");","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"┌ Info: Precompiling Mera [02f895e8-fdb1-4346-8fe6-c721699f5126]\n└ @ Base loading.jl:1273\n\n\n\n*__   __ _______ ______   _______\n|  |_|  |       |    _ | |   _   |\n|       |    ___|   | || |  |_|  |\n|       |   |___|   |_||_|       |\n|       |    ___|    __  |       |\n| ||_|| |   |___|   |  | |   _   |\n|_|   |_|_______|___|  |_|__| |__|\n\n\u001b [Mera]: 2020-02-08T13:41:33.944\u001b\n\nCode: RAMSES\noutput [420] summary:\nmtime: 2017-07-27T01:22:09\nctime: 2019-12-24T09:57:04.822\n\u001b =======================================================\u001b\nsimulation time: 624.91 [Myr]\nboxlen: 48.0 [kpc]\nncpu: 1024\nndim: 3\n-------------------------------------------------------\namr:           true\nlevel(s): 6 - 10 --> cellsize(s): 750.0 [pc] - 46.88 [pc]\n-------------------------------------------------------\nhydro:         true\nhydro-variables:  6  --> (:rho, :vx, :vy, :vz, :p, :var6)\nhydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1)\nγ: 1.01\n-------------------------------------------------------\ngravity:       true\ngravity-variables: (:epot, :ax, :ay, :az)\n-------------------------------------------------------\nparticles:     true\nparticle variables: (:vx, :vy, :vz, :mass, :birth)\n-------------------------------------------------------\nclumps:        true\nclump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(\"rho-\"), Symbol(\"rho+\"), :rho_av, :mass_cl, :relevance)\n-------------------------------------------------------\nnamelist-file: false\ntimer-file:       false\ncompilation-file: true\nmakefile:         true\npatchfile:        true\n\u001b =======================================================\u001b","category":"page"},{"location":"02_hydro_Load_Selections/#Select-Variables-1","page":"Hydro","title":"Select Variables","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Choose from the existing hydro variables listed in the simulation-info. Use the quoted Symbols: :varn1 or :cpu (=neg. one), :var1 or :rho, :var2 or :vx, :var3 or :vy, :var4 or :vz, :var5 or :p. Variables above 5 can be selected by :var6, :var7 etc. . No order is required. The selection of the variable's names from the descriptor files will be implemented in the future.","category":"page"},{"location":"02_hydro_Load_Selections/#Read-all-variables-(default)-1","page":"Hydro","title":"Read all variables (default)","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:08:41.471\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:48\u001b\n\n\nMemory used for data table :85.94877052307129 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas.data","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Table with 1126532 rows, 10 columns:\nColumns:\n #   \u001b  colname  \u001b  type\u001b\n────────────────────\n1   level    Int64\n2   cx       Int64\n3   cy       Int64\n4   cz       Int64\n5   rho      Float64\n6   vx       Float64\n7   vy       Float64\n8   vz       Float64\n9   p        Float64\n10  var6     Float64","category":"page"},{"location":"02_hydro_Load_Selections/#Select-several-variables-w/o-a-keyword-1","page":"Hydro","title":"Select several variables w/o a keyword","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_a = gethydro(info, vars=[:rho, :p], smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:09:34.25\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 5) = (:rho, :p)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:40\u001b\n\n\nMemory used for data table :51.5693416595459 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"The same variables can be read by using the var-number:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_a = gethydro(info, vars=[:var1, :var5], smallr = 1e-4 / info.unit_d);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:10:15.474\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 5) = (:rho, :p)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:50\u001b\n\n\nMemory used for data table :51.5693416595459 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"A keyword argument for the variables is not needed if the following order is preserved: InfoType-object, variables:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_a = gethydro(info, [:rho, :p], smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:11:05.814\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 5) = (:rho, :p)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:53\u001b\n\n\nMemory used for data table :51.5693416595459 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_a.data","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Table with 1126532 rows, 6 columns:\n level  \u001b  cx   \u001b  cy   \u001b  cz   \u001b rho        p\n────────────────────────────────────────────\n6      1    1    1    0.0001     2.85781e-7\n6      1    1    2    0.0001     2.85781e-7\n6      1    1    3    0.0001     2.85781e-7\n6      1    1    4    0.0001     2.85781e-7\n6      1    1    5    0.0001     2.85781e-7\n6      1    1    6    0.0001     2.85781e-7\n6      1    1    7    0.0001     2.85781e-7\n6      1    1    8    0.0001     2.85781e-7\n6      1    1    9    0.0001     2.85781e-7\n6      1    1    10   0.0001     2.85781e-7\n6      1    1    11   0.0001     2.85781e-7\n6      1    1    12   0.0001     2.85781e-7\n⋮\n10     822  507  516  0.0305045  0.000589997\n10     822  508  511  0.0551132  0.00106596\n10     822  508  512  0.0551132  0.00106596\n10     822  508  513  0.0845289  0.0016349\n10     822  508  514  0.0788161  0.00152441\n10     822  508  515  0.0305045  0.000589997\n10     822  508  516  0.0305045  0.000589997\n10     822  509  513  0.0861783  0.0016668\n10     822  509  514  0.0861783  0.0016668\n10     822  510  513  0.0861783  0.0016668\n10     822  510  514  0.0861783  0.0016668","category":"page"},{"location":"02_hydro_Load_Selections/#Select-one-variable-1","page":"Hydro","title":"Select one variable","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"In this case, no array and keyword is necessary, but preserve the following order: InfoType-object, variable:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_c = gethydro(info, :vx );","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:11:59.783\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(2,) = (:vx,)\n\ndomain:\nxmin::xmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nymin::ymax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\nzmin::zmax: 0.0 :: 1.0  \t==> 0.0 [kpc] :: 48.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:43\u001b\n\n\nMemory used for data table :42.97448444366455 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas_c.data","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Table with 1126532 rows, 5 columns:\n level  \u001b  cx   \u001b  cy   \u001b  cz   \u001b vx\n────────────────────────────────\n6      1    1    1    0.0990548\n6      1    1    2    0.110889\n6      1    1    3    0.117122\n6      1    1    4    0.120163\n6      1    1    5    0.122688\n6      1    1    6    0.124978\n6      1    1    7    0.12718\n6      1    1    8    0.129342\n6      1    1    9    0.131503\n6      1    1    10   0.133663\n6      1    1    11   0.135799\n6      1    1    12   0.137892\n⋮\n10     822  507  516  -0.0840177\n10     822  508  511  -0.08318\n10     822  508  512  -0.08318\n10     822  508  513  -0.0948844\n10     822  508  514  -0.0986642\n10     822  508  515  -0.0840177\n10     822  508  516  -0.0840177\n10     822  509  513  -0.136379\n10     822  509  514  -0.136379\n10     822  510  513  -0.136379\n10     822  510  514  -0.136379","category":"page"},{"location":"02_hydro_Load_Selections/#Select-Spatial-Ranges-1","page":"Hydro","title":"Select Spatial Ranges","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#Use-RAMSES-Standard-Notation-1","page":"Hydro","title":"Use RAMSES Standard Notation","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Ranges correspond to the domain [0:1]^3 and are related to the box corner at [0., 0., 0.] by default. Here, we limit the loading of the data to a maximum level of 8:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[0.2,0.8],\n                yrange=[0.2,0.8],\n                zrange=[0.4,0.6],\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:12:44.551\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 19.2 [kpc] :: 28.8 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:35\u001b\n\n\nMemory used for data table :23.961313247680664 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"The loaded data ranges are assigned to the field ranges as an array in  RAMSES standard notation (domain: [0:1]^3):","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas.ranges","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"6-element Array{Float64,1}:\n 0.2\n 0.8\n 0.2\n 0.8\n 0.4\n 0.6","category":"page"},{"location":"02_hydro_Load_Selections/#Ranges-relative-to-a-given-center:-1","page":"Hydro","title":"Ranges relative to a given center:","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[-0.3, 0.3],\n                yrange=[-0.3, 0.3],\n                zrange=[-0.1, 0.1],\n                center=[0.5, 0.5, 0.5],\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:13:20.861\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nymin::ymax: 0.2 :: 0.8  \t==> 9.6 [kpc] :: 38.4 [kpc]\nzmin::zmax: 0.4 :: 0.6  \t==> 19.2 [kpc] :: 28.8 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:36\u001b\n\n\nMemory used for data table :23.961313247680664 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#Use-notation-in-physical-units-1","page":"Hydro","title":"Use notation in physical units","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"In the following example the ranges are given in unit \"kpc\", relative to the box corner 0., 0., 0.:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[2.,22.],\n                yrange=[2.,22.],\n                zrange=[22.,26.],\n                range_unit=:kpc,\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:13:57.226\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ndomain:\nxmin::xmax: 0.0416667 :: 0.4583333  \t==> 2.0 [kpc] :: 22.0 [kpc]\nymin::ymax: 0.0416667 :: 0.4583333  \t==> 2.0 [kpc] :: 22.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:32\u001b\n\n\nMemory used for data table :4.347360610961914 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"The possible physical length units for the keyword range_unit are defined in the field scale :","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"viewfields(info.scale)  # or e.g.: gas.info.scale","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Fields to scale from user/code units to selected units\u001b\n\u001b =======================================================================\u001b\nMpc\t= 0.0010000000000006482\nkpc\t= 1.0000000000006481\npc\t= 1000.0000000006482\nmpc\t= 1.0000000000006482e6\nly\t= 3261.5637769461323\nAu\t= 2.0626480623310105e23\nkm\t= 3.0856775812820004e16\nm\t= 3.085677581282e19\ncm\t= 3.085677581282e21\nmm\t= 3.085677581282e22\nμm\t= 3.085677581282e25\nMsol_pc3\t= 0.9997234790001649\ng_cm3\t= 6.76838218451376e-23\nMsol_pc2\t= 999.7234790008131\ng_cm2\t= 0.20885045168302602\nGyr\t= 0.014910986463557083\nMyr\t= 14.910986463557084\nyr\t= 1.4910986463557083e7\ns\t= 4.70554946422349e14\nms\t= 4.70554946422349e17\nMsol\t= 9.99723479002109e8\nMearth\t= 3.329677459032007e14\nMjupiter\t= 1.0476363431814971e12\ng\t= 1.9885499720830952e42\nkm_s\t= 65.57528732282063\nm_s\t= 65575.28732282063\ncm_s\t= 6.557528732282063e6\nnH\t= 30.987773856809987\nerg\t= 8.551000140274429e55\ng_cms2\t= 2.9104844143584656e-9\nT_mu\t= 517028.3199143136\nBa\t= 2.910484414358466e-9","category":"page"},{"location":"02_hydro_Load_Selections/#Ranges-relative-to-a-given-center-e.g.-in-unit-\"kpc\":-1","page":"Hydro","title":"Ranges relative to a given center e.g. in unit \"kpc\":","text":"","category":"section"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[-16.,16.],\n                yrange=[-16.,16.],\n                zrange=[-2.,2.],\n                center=[24.,24.,24.],\n                range_unit=:kpc,\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:41:54.547\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:37\u001b\n\n\nMemory used for data table :22.76700782775879 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z):","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[-16., 16.],\n                yrange=[-16., 16.],\n                zrange=[-2., 2.],\n                center=[:boxcenter],\n                range_unit=:kpc,\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:42:56.283\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:28\u001b\n\n\nMemory used for data table :22.76700782775879 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[-16., 16.],\n                yrange=[-16., 16.],\n                zrange=[-2., 2.],\n                center=[:bc],\n                range_unit=:kpc,\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:15:01.751\u001b\n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:31\u001b\n\n\nMemory used for data table :22.76700782775879 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"Use the box center notation for individual dimensions, here x,z:","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"gas = gethydro(info, lmax=8,\n                xrange=[-16., 16.],\n                yrange=[-16., 16.],\n                zrange=[-2., 2.],\n                center=[:bc, 24., :bc],\n                range_unit=:kpc,\n                smallr = 1e-4);","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"\u001b [Mera]: Get hydro data: 2020-02-08T13:44:27.734\u001b \n\nKey vars=(:level, :cx, :cy, :cz)\nUsing var(s)=(1, 2, 3, 4, 5, 6) = (:rho, :vx, :vy, :vz, :p, :var6)\n\ncenter: [0.5, 0.5, 0.5] ==> [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]\n\ndomain:\nxmin::xmax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nymin::ymax: 0.1666667 :: 0.8333333  \t==> 8.0 [kpc] :: 40.0 [kpc]\nzmin::zmax: 0.4583333 :: 0.5416667  \t==> 22.0 [kpc] :: 26.0 [kpc]\n\nReading data...\n\n\n 100%|███████████████████████████████████████████████████| Time: 0:00:27\u001b\n\n\nMemory used for data table :22.76700782775879 MB\n-------------------------------------------------------","category":"page"},{"location":"02_hydro_Load_Selections/#","page":"Hydro","title":"Hydro","text":"","category":"page"}]
}
