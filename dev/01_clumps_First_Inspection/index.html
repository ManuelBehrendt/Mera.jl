<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Clumps · Mera.jl</title><meta name="title" content="Clumps · Mera.jl"/><meta property="og:title" content="Clumps · Mera.jl"/><meta property="twitter:title" content="Clumps · Mera.jl"/><meta name="description" content="Documentation for Mera.jl."/><meta property="og:description" content="Documentation for Mera.jl."/><meta property="twitter:description" content="Documentation for Mera.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Mera.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../00_multi_FirstSteps/">First Steps</a></li><li><span class="tocitem">1 Data Inspection</span><ul><li><a class="tocitem" href="../01_hydro_First_Inspection/">Hydro</a></li><li><a class="tocitem" href="../01_particles_First_Inspection/">Particles</a></li><li class="is-active"><a class="tocitem" href>Clumps</a><ul class="internal"><li><a class="tocitem" href="#Learning-Objectives"><span>Learning Objectives</span></a></li><li><a class="tocitem" href="#Quick-Reference:-Essential-Clump-Functions"><span>Quick Reference: Essential Clump Functions</span></a></li><li><a class="tocitem" href="#Loading-Clump-Data"><span>Loading Clump Data</span></a></li><li><a class="tocitem" href="#Understanding-Data-Types"><span>Understanding Data Types</span></a></li><li><a class="tocitem" href="#Data-Organization-and-Structure"><span>Data Organization and Structure</span></a></li><li><a class="tocitem" href="#Data-Analysis-and-Exploration"><span>Data Analysis and Exploration</span></a></li><li><a class="tocitem" href="#Data-Structure-Deep-Dive"><span>Data Structure Deep Dive</span></a></li><li><a class="tocitem" href="#Summary-and-Next-Steps"><span>Summary and Next Steps</span></a></li></ul></li><li><a class="tocitem" href="../api/data_inspection/">API Reference</a></li></ul></li><li><span class="tocitem">2 Load by Selection</span><ul><li><a class="tocitem" href="../02_hydro_Load_Selections/">Hydro</a></li><li><a class="tocitem" href="../02_particles_Load_Selections/">Particles</a></li><li><a class="tocitem" href="../02_clumps_Load_Selections/">Clumps</a></li><li><a class="tocitem" href="../api/data_loading/">API Reference</a></li></ul></li><li><span class="tocitem">3 Get Subregions</span><ul><li><a class="tocitem" href="../03_hydro_Get_Subregions/">Hydro</a></li><li><a class="tocitem" href="../03_particles_Get_Subregions/">Particles</a></li><li><a class="tocitem" href="../03_clumps_Get_Subregions/">Clumps</a></li><li><a class="tocitem" href="../api/subregions/">API Reference</a></li></ul></li><li><span class="tocitem">4 Basic Calculations</span><ul><li><a class="tocitem" href="../04_multi_Basic_Calculations/">Tutorial</a></li><li><a class="tocitem" href="../api/calculations/">API Reference</a></li></ul></li><li><span class="tocitem">5 Mask/Filter/Meta</span><ul><li><a class="tocitem" href="../05_multi_Masking_Filtering/">Tutorial</a></li><li><a class="tocitem" href="../api/masking_filtering/">API Reference</a></li></ul></li><li><span class="tocitem">6 Projection</span><ul><li><a class="tocitem" href="../06_hydro_Projection/">Hydro</a></li><li><a class="tocitem" href="../06_particles_Projection/">Particles</a></li><li><a class="tocitem" href="../api/projections/">API Reference</a></li></ul></li><li><span class="tocitem">7 MERA-Files</span><ul><li><a class="tocitem" href="../07_multi_Mera_Files/">Mera-Files</a></li><li><a class="tocitem" href="../07_1_multi_Mera_Files_Converter/">Converter</a></li><li><a class="tocitem" href="../api/mera_files/">API Reference</a></li></ul></li><li><span class="tocitem">8 Volume Rendering</span><ul><li><a class="tocitem" href="../paraview/paraview_intro/">Intro</a></li><li><a class="tocitem" href="../paraview/08_hydro_VTK_export/">Hydro</a></li><li><a class="tocitem" href="../paraview/08_particles_VTK_export/">Particles</a></li><li><a class="tocitem" href="../api/volume_rendering/">API Reference</a></li></ul></li><li><span class="tocitem">9 Miscellaneous</span><ul><li><a class="tocitem" href="../Miscellaneous/">Tutorial</a></li><li><a class="tocitem" href="../api/miscellaneous/">API Reference</a></li></ul></li><li><span class="tocitem">10 Examples</span><ul><li><a class="tocitem" href="../examples/">Tutorial</a></li><li><a class="tocitem" href="../api/examples/">API Reference</a></li></ul></li><li><span class="tocitem">11 Multi-Threading</span><ul><li><a class="tocitem" href="../multi-threading/multi-threading_intro/">Tutorial</a></li><li><a class="tocitem" href="../api/multithreading/">API Reference</a></li></ul></li><li><span class="tocitem">12 Notifications</span><ul><li><a class="tocitem" href="../notifications/">Overview</a></li><li><a class="tocitem" href="../notifications/bell/">Bell (Local Audio)</a></li><li><a class="tocitem" href="../notifications/email/">Email</a></li><li><a class="tocitem" href="../notifications/zulip/">Zulip (Team Chat)</a></li><li><a class="tocitem" href="../api/notifications/">API Reference</a></li></ul></li><li><span class="tocitem">13 Benchmarks</span><ul><li><a class="tocitem" href="../benchmarks/IO/IOperformance/">Server IO</a></li><li><a class="tocitem" href="../benchmarks/RAMSES_reading/ramses_reading/">Parallel RAMSES-Files Reading</a></li><li><a class="tocitem" href="../benchmarks/JLD2_reading/Mera_files_reading/">Mera-Files Reading</a></li><li><a class="tocitem" href="../benchmarks/Projection/multi_projections/">Parallel Projections</a></li></ul></li><li><span class="tocitem">14 Julia Quick Reference</span><ul><li><a class="tocitem" href="../quickreference/01_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../quickreference/02_migrators/">From Other Languages</a></li><li><a class="tocitem" href="../quickreference/03_packages/">Essential Packages</a></li><li><a class="tocitem" href="../quickreference/04_mera_patterns/">Julia Fundamentals</a></li><li><a class="tocitem" href="../quickreference/05_performance/">Performance &amp; Debugging</a></li><li><a class="tocitem" href="../quickreference/06_resources/">Resources &amp; Community</a></li></ul></li><li><a class="tocitem" href="../api/">15 Complete API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">1 Data Inspection</a></li><li class="is-active"><a href>Clumps</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Clumps</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Clump-Data:-First-Inspection"><a class="docs-heading-anchor" href="#Clump-Data:-First-Inspection">Clump Data: First Inspection</a><a id="Clump-Data:-First-Inspection-1"></a><a class="docs-heading-anchor-permalink" href="#Clump-Data:-First-Inspection" title="Permalink"></a></h1><p>This notebook provides a comprehensive introduction to loading and analyzing clump structure data using Mera.jl. You&#39;ll learn the fundamentals of working with RAMSES clump data and understanding clump hierarchies and properties.</p><h2 id="Learning-Objectives"><a class="docs-heading-anchor" href="#Learning-Objectives">Learning Objectives</a><a id="Learning-Objectives-1"></a><a class="docs-heading-anchor-permalink" href="#Learning-Objectives" title="Permalink"></a></h2><ul><li>Load and inspect clump structure simulation data</li><li>Understand clump properties, hierarchies, and organization</li><li>Analyze clump distributions and characteristics across the simulation</li><li>Handle different clump variable types and unit conversions</li><li>Work with IndexedTables data structures for clump analysis</li><li>Apply memory management best practices for clump datasets</li></ul><h2 id="Quick-Reference:-Essential-Clump-Functions"><a class="docs-heading-anchor" href="#Quick-Reference:-Essential-Clump-Functions">Quick Reference: Essential Clump Functions</a><a id="Quick-Reference:-Essential-Clump-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Reference:-Essential-Clump-Functions" title="Permalink"></a></h2><p>This section provides a comprehensive reference of key Mera.jl functions for clump data analysis.</p><h3 id="Data-Loading-Functions"><a class="docs-heading-anchor" href="#Data-Loading-Functions">Data Loading Functions</a><a id="Data-Loading-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Loading-Functions" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Load simulation metadata with clump information
info = getinfo(output_number, &quot;path/to/simulation&quot;)
info = getinfo(400, &quot;/path/to/sim&quot;)                   # Specific output
info = getinfo(&quot;/path/to/sim&quot;)                        # Latest output

# Load clump data - basic usage
clumps = getclumps(info)                              # Load all clumps, all variables</code></pre><h3 id="Data-Exploration-Functions"><a class="docs-heading-anchor" href="#Data-Exploration-Functions">Data Exploration Functions</a><a id="Data-Exploration-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Exploration-Functions" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Analyze clump data structure and properties
data_overview = dataoverview(clumps)                  # Statistical overview of clump variables
usedmemory(clumps)                                    # Memory usage analysis

# Explore object structure
viewfields(clumps)                                    # View ClumpDataType structure
viewfields(info.clumps_info)                         # View clump file information
propertynames(clumps)                                 # List all available fields</code></pre><h3 id="Variable-and-Data-Management"><a class="docs-heading-anchor" href="#Variable-and-Data-Management">Variable and Data Management</a><a id="Variable-and-Data-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-and-Data-Management" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Access clump information
info.clumps_info                                      # Clump file information
clumps.data                                           # Raw clump data table
clumps.info.scale                                     # Scaling factors

# Common clump variables (depend on clump finder output)
# :index, :peak_x, :peak_y, :peak_z, :mass_cl, :rho_max, :rho_saddle
# Variable names are read from clump file headers automatically</code></pre><h3 id="IndexedTables-Operations"><a class="docs-heading-anchor" href="#IndexedTables-Operations">IndexedTables Operations</a><a id="IndexedTables-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#IndexedTables-Operations" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Work with clump data tables
using Mera.IndexedTables

# Select specific columns
select(clumps.data, (:index, :peak_x, :peak_y, :peak_z, :mass_cl)) # View positions + mass
select(data_overview, (:extrema, :index, :mass_cl))   # Statistical summary

# Extract column data
column(data_overview, :mass_cl)                      # Extract mass column as array
column(data_overview, :mass_cl) * info.scale.Msol    # Convert to solar masses

# Transform data in-place
transform(data_overview, :mass_cl =&gt; :mass_cl =&gt; value-&gt;value * info.scale.Msol)</code></pre><h3 id="Unit-Conversion"><a class="docs-heading-anchor" href="#Unit-Conversion">Unit Conversion</a><a id="Unit-Conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Conversion" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Access scaling factors
scale = clumps.scale                                  # Shortcut to scaling factors
constants = clumps.info.constants                    # Physical constants

# Common unit conversions for clump data
mass_msol = clumps.data.mass_cl * scale.Msol         # Mass to solar masses
position_kpc = clumps.data.peak_x * scale.kpc        # Position to kpc
density_gcm3 = clumps.data.rho_max * scale.g_cm3     # Density to g/cm³
size_pc = clumps.data.size * scale.pc                # Size to parsecs (if available)</code></pre><h3 id="Memory-Management"><a class="docs-heading-anchor" href="#Memory-Management">Memory Management</a><a id="Memory-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Management" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Monitor and optimize memory usage
usedmemory(clumps)                                    # Check current memory usage
clumps = nothing; GC.gc()                            # Clear variable and garbage collect</code></pre><h3 id="Common-Analysis-Workflow"><a class="docs-heading-anchor" href="#Common-Analysis-Workflow">Common Analysis Workflow</a><a id="Common-Analysis-Workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Analysis-Workflow" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Standard clump data analysis workflow
info = getinfo(400, &quot;/path/to/simulation&quot;)           # Load simulation metadata
clumps = getclumps(info)                             # Load clump data
usedmemory(clumps)                                    # Check memory usage

# Analyze structure and properties
data_overview = dataoverview(clumps)                 # Statistical overview
viewfields(clumps)                                    # Explore data structure

# Convert units and extract specific data
scale = clumps.scale                                  # Create scaling shortcut
mass_msol = select(clumps.data, :mass_cl) * scale.Msol # Physical masses
position_kpc = select(clumps.data, (:peak_x, :peak_y, :peak_z)) * scale.kpc</code></pre><h3 id="Clump-Analysis-Functions"><a class="docs-heading-anchor" href="#Clump-Analysis-Functions">Clump Analysis Functions</a><a id="Clump-Analysis-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Clump-Analysis-Functions" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Work with clump properties
# Filter clumps by mass
massive_clumps = filter(c -&gt; c.mass_cl &gt; 1e5, clumps.data)
</code></pre><h3 id="Package-Import-and-Initial-Setup"><a class="docs-heading-anchor" href="#Package-Import-and-Initial-Setup">Package Import and Initial Setup</a><a id="Package-Import-and-Initial-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Import-and-Initial-Setup" title="Permalink"></a></h3><p>Let&#39;s start by importing Mera.jl and loading simulation information for output 300:</p><pre><code class="language-julia hljs">using Mera
info = getinfo(400, &quot;/Volumes/FASTStorage/Simulations/Mera-Tests/manu_sim_sf_L14&quot;);</code></pre><pre><code class="nohighlight hljs">[Mera]: 2025-08-14T14:04:17.072

Code: RAMSES
output [400] summary:
mtime: 2018-09-05T09:51:55
ctime: 2025-06-29T20:06:45.267
=======================================================
simulation time: 594.98 [Myr]
boxlen: 48.0 [kpc]
ncpu: 2048
ndim: 3
-------------------------------------------------------
amr:           true
level(s): 6 - 14 --&gt; cellsize(s): 750.0 [pc] - 2.93 [pc]
-------------------------------------------------------
hydro:         true
hydro-variables:  7  --&gt; (:rho, :vx, :vy, :vz, :p, :var6, :var7)
hydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)
γ: 1.6667
-------------------------------------------------------
gravity:       true
gravity-variables: (:epot, :ax, :ay, :az)
-------------------------------------------------------
particles:     true
- Npart:    5.091500e+05
- Nstars:   5.066030e+05
- Ndm:      2.547000e+03
particle-variables: 5  --&gt; (:vx, :vy, :vz, :mass, :birth)
-------------------------------------------------------
rt:            false
-------------------------------------------------------
clumps:           true
clump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(&quot;rho-&quot;), Symbol(&quot;rho+&quot;), :rho_av, :mass_cl, :relevance)
-------------------------------------------------------
namelist-file:    false
timer-file:       false
compilation-file: true
makefile:         true
patchfile:        true
=======================================================
</code></pre><h3 id="Understanding-Clump-Properties"><a class="docs-heading-anchor" href="#Understanding-Clump-Properties">Understanding Clump Properties</a><a id="Understanding-Clump-Properties-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-Clump-Properties" title="Permalink"></a></h3><p>The output above provides a comprehensive overview of the loaded clump data properties:</p><ul><li><strong>Clump files status</strong> - Confirms existence and accessibility of clump data files</li><li><strong>Variable names</strong> - Lists the clump variable names from the file headers</li><li><strong>Data structure</strong> - Reveals how the clump data is organized and stored</li><li><strong>File format</strong> - Shows the automatic parsing of clump file structure</li></ul><h2 id="Loading-Clump-Data"><a class="docs-heading-anchor" href="#Loading-Clump-Data">Loading Clump Data</a><a id="Loading-Clump-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Clump-Data" title="Permalink"></a></h2><p>Now that we understand our simulation&#39;s structure and clump organization, let&#39;s load the actual clump data. We&#39;ll use Mera&#39;s powerful data loading capabilities to read clump structures and their properties.</p><h3 id="Data-Loading-Overview"><a class="docs-heading-anchor" href="#Data-Loading-Overview">Data Loading Overview</a><a id="Data-Loading-Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Loading-Overview" title="Permalink"></a></h3><p>The <code>getclumps()</code> function is the primary tool for loading clump data from RAMSES simulations. It provides extensive options for:</p><ul><li><strong>Variable selection</strong> - Choose specific clump properties</li><li><strong>Mass filtering</strong> - Focus on clumps within specific mass ranges</li><li><strong>Spatial filtering</strong> - Focus on regions of interest</li><li><strong>Automatic parsing</strong> - Column names are automatically read from clump file headers</li></ul><p><strong>Note</strong>: Mera automatically checks the first line of each clump file to determine column names and data structure.</p><h3 id="Loading-Complete-Clump-Dataset"><a class="docs-heading-anchor" href="#Loading-Complete-Clump-Dataset">Loading Complete Clump Dataset</a><a id="Loading-Complete-Clump-Dataset-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Complete-Clump-Dataset" title="Permalink"></a></h3><p>Now let&#39;s load all clump data from the simulation. This will read:</p><ul><li><strong>All clump structures</strong> - Complete catalog of identified clumps</li><li><strong>All available variables</strong> - All clump properties present in the files</li><li><strong>Automatic column parsing</strong> - Variable names determined from file headers</li><li><strong>Efficient organization</strong> - Data structured for analysis and manipulation</li></ul><pre><code class="language-julia hljs">clumps = getclumps(info);</code></pre><pre><code class="nohighlight hljs">[Mera]: Get clump data: 2025-08-14T14:04:19.532

domain:
xmin::xmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
ymin::ymax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
zmin::zmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]

Read 12 colums:
[:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(&quot;rho-&quot;), Symbol(&quot;rho+&quot;), :rho_av, :mass_cl, :relevance]
Memory used for data table :61.58203125 KB
-------------------------------------------------------
</code></pre><h3 id="Memory-Usage-Analysis"><a class="docs-heading-anchor" href="#Memory-Usage-Analysis">Memory Usage Analysis</a><a id="Memory-Usage-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Usage-Analysis" title="Permalink"></a></h3><p>The memory consumption of the loaded data is displayed automatically. For detailed memory analysis of any object, Mera.jl provides the <code>usedmemory()</code> function:</p><pre><code class="language-julia hljs">usedmemory(clumps);</code></pre><pre><code class="nohighlight hljs">Memory used: 363.003 KB
</code></pre><h2 id="Understanding-Data-Types"><a class="docs-heading-anchor" href="#Understanding-Data-Types">Understanding Data Types</a><a id="Understanding-Data-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-Data-Types" title="Permalink"></a></h2><p>The loaded data object is now of type <code>ClumpDataType</code>, which is specifically designed for clump structure data:</p><pre><code class="language-julia hljs">typeof(clumps)</code></pre><pre><code class="nohighlight hljs">ClumpDataType</code></pre><h3 id="Type-Hierarchy"><a class="docs-heading-anchor" href="#Type-Hierarchy">Type Hierarchy</a><a id="Type-Hierarchy-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Hierarchy" title="Permalink"></a></h3><p><code>ClumpDataType</code> is part of a well-organized type hierarchy. It&#39;s a sub-type of <code>ContainMassDataSetType</code>:</p><pre><code class="language-julia hljs"># Which in turn is a subtype of the general `DataSetType`.
supertype( ContainMassDataSetType )</code></pre><pre><code class="nohighlight hljs">DataSetType</code></pre><p>Which in turn is a sub-type of the general <code>DataSetType</code>:</p><pre><code class="language-julia hljs">supertype( ClumpDataType )</code></pre><pre><code class="nohighlight hljs">ContainMassDataSetType</code></pre><p><img src="../assets/TypeHierarchy.png" alt="TypeHierarchy"/></p><h2 id="Data-Organization-and-Structure"><a class="docs-heading-anchor" href="#Data-Organization-and-Structure">Data Organization and Structure</a><a id="Data-Organization-and-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Organization-and-Structure" title="Permalink"></a></h2><p>The clump data is stored in an <strong>IndexedTables</strong> table format, with clump variables and parameters organized into accessible fields. Let&#39;s explore the structure:</p><pre><code class="language-julia hljs">viewfields(clumps)</code></pre><pre><code class="nohighlight hljs">
data ==&gt; IndexedTables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(&quot;rho-&quot;), Symbol(&quot;rho+&quot;), :rho_av, :mass_cl, :relevance)

info ==&gt; subfields: (:output, :path, :fnames, :simcode, :mtime, :ctime, :ncpu, :ndim, :levelmin, :levelmax, :boxlen, :time, :aexp, :H0, :omega_m, :omega_l, :omega_k, :omega_b, :unit_l, :unit_d, :unit_m, :unit_v, :unit_t, :gamma, :hydro, :nvarh, :nvarp, :nvarrt, :variable_list, :gravity_variable_list, :particles_variable_list, :rt_variable_list, :clumps_variable_list, :sinks_variable_list, :descriptor, :amr, :gravity, :particles, :rt, :clumps, :sinks, :namelist, :namelist_content, :headerfile, :makefile, :files_content, :timerfile, :compilationfile, :patchfile, :Narraysize, :scale, :grid_info, :part_info, :compilation, :constants)

boxlen	= 48.0
ranges	= [0.0, 1.0, 0.0, 1.0, 0.0, 1.0]
selected_clumpvars	= [:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(&quot;rho-&quot;), Symbol(&quot;rho+&quot;), :rho_av, :mass_cl, :relevance]

scale ==&gt; subfields: (:Mpc, :kpc, :pc, :mpc, :ly, :Au, :km, :m, :cm, :mm, :μm, :Mpc3, :kpc3, :pc3, :mpc3, :ly3, :Au3, :km3, :m3, :cm3, :mm3, :μm3, :Msol_pc3, :Msun_pc3, :g_cm3, :Msol_pc2, :Msun_pc2, :g_cm2, :Gyr, :Myr, :yr, :s, :ms, :Msol, :Msun, :Mearth, :Mjupiter, :g, :km_s, :m_s, :cm_s, :nH, :erg, :g_cms2, :T_mu, :K_mu, :T, :K, :Ba, :g_cm_s2, :p_kB, :K_cm3, :erg_g_K, :keV_cm2, :erg_K, :J_K, :erg_cm3_K, :J_m3_K, :kB_per_particle, :J_s, :g_cm2_s, :kg_m2_s, :Gauss, :muG, :microG, :Tesla, :eV, :keV, :MeV, :erg_s, :Lsol, :Lsun, :cm_3, :pc_3, :n_e, :erg_g_s, :erg_cm3_s, :erg_cm2_s, :Jy, :mJy, :microJy, :atoms_cm2, :NH_cm2, :cm_s2, :m_s2, :km_s2, :pc_Myr2, :erg_g, :J_kg, :km2_s2, :u_grav, :erg_cell, :dyne, :s_2, :lambda_J, :M_J, :t_ff, :alpha_vir, :delta_rho, :a_mag, :v_esc, :ax, :ay, :az, :epot, :a_magnitude, :escape_speed, :gravitational_redshift, :gravitational_energy_density, :gravitational_binding_energy, :total_binding_energy, :specific_gravitational_energy, :gravitational_work, :jeans_length_gravity, :jeans_mass_gravity, :jeansmass, :freefall_time_gravity, :ekin, :etherm, :virial_parameter_local, :Fg, :poisson_source, :ar_cylinder, :aϕ_cylinder, :ar_sphere, :aθ_sphere, :aϕ_sphere, :r_cylinder, :r_sphere, :ϕ, :dimensionless, :rad, :deg)
</code></pre><h3 id="Convenient-Data-Access"><a class="docs-heading-anchor" href="#Convenient-Data-Access">Convenient Data Access</a><a id="Convenient-Data-Access-1"></a><a class="docs-heading-anchor-permalink" href="#Convenient-Data-Access" title="Permalink"></a></h3><p>For convenience, all fields from the original <code>InfoType</code> object are now accessible through:</p><ul><li><strong><code>clumps.info</code></strong> - All simulation metadata and parameters</li><li><strong><code>clumps.scale</code></strong> - Scaling relations for converting from code units to physical units</li></ul><p>The data object also retains important structural information:</p><ul><li>Box dimensions and coordinate ranges</li><li>Selected spatial regions and filtering parameters</li><li>Number and properties of loaded clumps</li></ul><h3 id="Quick-Field-Reference"><a class="docs-heading-anchor" href="#Quick-Field-Reference">Quick Field Reference</a><a id="Quick-Field-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Field-Reference" title="Permalink"></a></h3><p>For a simple list of all available fields in the clump data object:</p><pre><code class="language-julia hljs">propertynames(clumps)</code></pre><pre><code class="nohighlight hljs">(:data, :info, :boxlen, :ranges, :selected_clumpvars, :used_descriptors, :scale)</code></pre><h2 id="Data-Analysis-and-Exploration"><a class="docs-heading-anchor" href="#Data-Analysis-and-Exploration">Data Analysis and Exploration</a><a id="Data-Analysis-and-Exploration-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Analysis-and-Exploration" title="Permalink"></a></h2><p>Now that we have loaded our clump data, let&#39;s explore its structure and properties in detail. This section demonstrates the key analysis functions available in Mera.jl.</p><h3 id="Analysis-Overview"><a class="docs-heading-anchor" href="#Analysis-Overview">Analysis Overview</a><a id="Analysis-Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis-Overview" title="Permalink"></a></h3><p>We&#39;ll focus on statistical analysis of clump properties:</p><ul><li><strong>Statistical Data Overview</strong> - Computing basic statistical properties of clump variables, understanding mass distributions, spatial distributions of clumps, peak positions and other key parameters, and assessing data quality and identifying potential issues</li></ul><p>The following analysis will help us understand the overall structure and properties of our clump population.</p><h3 id="Statistical-Data-Analysis"><a class="docs-heading-anchor" href="#Statistical-Data-Analysis">Statistical Data Analysis</a><a id="Statistical-Data-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Statistical-Data-Analysis" title="Permalink"></a></h3><p>The <code>dataoverview()</code> function computes comprehensive statistics for all clump variables in our dataset. This analysis provides:</p><ul><li><strong>Variable ranges</strong> - Minimum and maximum values for each clump property</li></ul><p>The calculated information is stored in code units and can be accessed for further analysis:</p><pre><code class="language-julia hljs">data_overview = dataoverview(clumps)</code></pre><pre><code class="nohighlight hljs">Table with 2 rows, 13 columns:
Columns:
#   colname    type
───────────────────
1   extrema    Any
2   index      Any
3   lev        Any
4   parent     Any
5   ncell      Any
6   peak_x     Any
7   peak_y     Any
8   peak_z     Any
9   rho-       Any
10  rho+       Any
11  rho_av     Any
12  mass_cl    Any
13  relevance  Any</code></pre><h3 id="Working-with-IndexedTables"><a class="docs-heading-anchor" href="#Working-with-IndexedTables">Working with IndexedTables</a><a id="Working-with-IndexedTables-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-IndexedTables" title="Permalink"></a></h3><p>When dealing with tables containing many columns, only a summary view is typically displayed. To access specific columns, use the <code>select()</code> function.</p><p><strong>Important Notes:</strong></p><ul><li>Column names are specified as quoted Symbols (<code>:column_name</code>)</li><li>For more details, see the <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/#Symbols-1">Julia documentation on Symbols</a></li><li>The <code>select()</code> function maintains data order and relationships</li></ul><p>Let&#39;s select specific columns to examine clump properties:</p><pre><code class="language-julia hljs">using Mera.IndexedTables</code></pre><pre><code class="language-julia hljs">select(data_overview, (:extrema, :index, :peak_x, :peak_y, :peak_z, :mass_cl) )</code></pre><pre><code class="nohighlight hljs">Table with 2 rows, 6 columns:
extrema  index   peak_x   peak_y   peak_z   mass_cl
──────────────────────────────────────────────────────
&quot;min&quot;    4.0     10.292   9.93604  22.1294  0.00031216
&quot;max&quot;    2147.0  38.1738  35.7056  25.4634  0.860755</code></pre><h3 id="Unit-Conversion-Example"><a class="docs-heading-anchor" href="#Unit-Conversion-Example">Unit Conversion Example</a><a id="Unit-Conversion-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Conversion-Example" title="Permalink"></a></h3><p>Extract mass data from a specific column and convert it to solar masses. The <code>select()</code> function retrieves data from specific table columns, maintaining the order consistent with the table structure:</p><pre><code class="language-julia hljs">select(data_overview, :mass_cl) * info.scale.Msol</code></pre><pre><code class="nohighlight hljs">2-element Vector{Float64}:
 312073.3187055649
      8.605166312657958e8</code></pre><h3 id="In-Place-Unit-Conversion"><a class="docs-heading-anchor" href="#In-Place-Unit-Conversion">In-Place Unit Conversion</a><a id="In-Place-Unit-Conversion-1"></a><a class="docs-heading-anchor-permalink" href="#In-Place-Unit-Conversion" title="Permalink"></a></h3><p>Alternatively, you can directly convert the data within the table using the <code>transform()</code> function. This modifies the table in-place, converting the <code>:mass_cl</code> column to solar mass units:</p><pre><code class="language-julia hljs">data_overview = transform(data_overview, :mass_cl =&gt; :mass_cl =&gt; value-&gt;value * info.scale.Msol);</code></pre><pre><code class="language-julia hljs">select(data_overview, (:extrema, :index, :peak_x, :peak_y, :peak_z, :mass_cl) )</code></pre><pre><code class="nohighlight hljs">Table with 2 rows, 6 columns:
extrema  index   peak_x   peak_y   peak_z   mass_cl
─────────────────────────────────────────────────────
&quot;min&quot;    4.0     10.292   9.93604  22.1294  3.12073e5
&quot;max&quot;    2147.0  38.1738  35.7056  25.4634  8.60517e8</code></pre><h2 id="Data-Structure-Deep-Dive"><a class="docs-heading-anchor" href="#Data-Structure-Deep-Dive">Data Structure Deep Dive</a><a id="Data-Structure-Deep-Dive-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Structure-Deep-Dive" title="Permalink"></a></h2><p>Now let&#39;s examine the detailed structure of our clump data. Understanding this organization is crucial for effective data manipulation and analysis.</p><h3 id="IndexedTables-Storage-Format"><a class="docs-heading-anchor" href="#IndexedTables-Storage-Format">IndexedTables Storage Format</a><a id="IndexedTables-Storage-Format-1"></a><a class="docs-heading-anchor-permalink" href="#IndexedTables-Storage-Format" title="Permalink"></a></h3><p>The clump data is stored in <code>clumps.data</code> as an <strong>IndexedTables</strong> table (in code units), which provides several key advantages:</p><ul><li><strong>Row-based organization</strong>: Each row represents a unique clump in the simulation</li><li><strong>Column-based access</strong>: Each column represents a specific clump property</li><li><strong>Efficient operations</strong>: Built-in support for filtering, mapping, and aggregation</li><li><strong>Memory efficiency</strong>: Optimized storage and access patterns for clump catalogs</li><li><strong>Functional interface</strong>: Clean, composable operations for data manipulation</li></ul><p>For comprehensive information on working with this data structure:</p><ul><li>Mera.jl documentation and tutorials</li><li><a href="https://juliadb.juliadata.org/latest/">JuliaDB API Reference</a></li><li>IndexedTables.jl documentation</li></ul><h3 id="Understanding-the-Data-Layout"><a class="docs-heading-anchor" href="#Understanding-the-Data-Layout">Understanding the Data Layout</a><a id="Understanding-the-Data-Layout-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-the-Data-Layout" title="Permalink"></a></h3><p>The table structure reflects the clump catalog organization:</p><p><strong>Clump Identification and Properties</strong></p><ul><li><strong>Peak positions</strong> (peak<em>x, peak</em>y, peak_z) represent clump centers in code units</li><li><strong>Index values</strong> provide unique identifiers for each clump</li><li><strong>Mass and density</strong> properties characterize clump physical properties</li><li><strong>Spatial relationships</strong> maintain clump hierarchies and associations</li></ul><p><strong>Critical Data Integrity Notes</strong></p><ul><li><strong>Position preservation</strong>: The peak positions are essential for spatial analysis</li><li><strong>Do not modify</strong>: These coordinates are used by many Mera functions</li><li><strong>Unique identifiers</strong>: Each clump index uniquely identifies a structure</li></ul><p>Let&#39;s examine the complete data table:</p><pre><code class="language-julia hljs">clumps.data</code></pre><pre><code class="nohighlight hljs">Table with 644 rows, 12 columns:
Columns:
#   colname    type
──────────────────────
1   index      Float64
2   lev        Float64
3   parent     Float64
4   ncell      Float64
5   peak_x     Float64
6   peak_y     Float64
7   peak_z     Float64
8   rho-       Float64
9   rho+       Float64
10  rho_av     Float64
11  mass_cl    Float64
12  relevance  Float64</code></pre><h3 id="Focused-Data-Examination"><a class="docs-heading-anchor" href="#Focused-Data-Examination">Focused Data Examination</a><a id="Focused-Data-Examination-1"></a><a class="docs-heading-anchor-permalink" href="#Focused-Data-Examination" title="Permalink"></a></h3><p>For a more detailed view of specific columns, we can select key fields to understand the clump organization better:</p><pre><code class="language-julia hljs">select(clumps.data, (:index, :peak_x, :peak_y, :peak_z, :mass_cl) )</code></pre><pre><code class="nohighlight hljs">Table with 644 rows, 5 columns:
index   peak_x   peak_y   peak_z   mass_cl
─────────────────────────────────────────────
4.0     20.1094  11.5005  23.9604  0.0213767
5.0     20.1592  11.5122  23.9253  0.0131504
9.0     21.7852  17.855   23.814   0.00358253
12.0    21.8232  17.8608  23.855   0.00509792
13.0    21.8906  17.2837  23.5415  0.0319414
18.0    21.7822  16.8823  23.7817  0.00848828
19.0    21.75    16.8589  23.7993  0.00587003
20.0    21.6006  17.5679  23.7935  0.0324672
25.0    21.5801  17.6177  23.9341  0.0245806
26.0    21.5859  17.5796  23.9165  0.0183601
29.0    21.5625  17.5854  23.8726  0.0303356
46.0    21.5215  17.6235  23.9458  0.343594
⋮
2115.0  27.7705  13.2788  23.8081  0.0340939
2116.0  27.7617  13.3081  23.8081  0.0145199
2117.0  27.7793  13.2993  23.6851  0.00855992
2120.0  27.7559  13.1792  23.8638  0.00508007
2125.0  27.7939  13.0298  23.9194  0.00128829
2128.0  27.791   13.0649  23.9019  0.00183979
2131.0  28.3037  12.8188  23.9487  0.00128627
2132.0  28.626   12.8188  23.8755  0.00434
2137.0  29.9736  15.0571  23.7202  0.00195464
2140.0  27.1436  15.6401  23.9048  0.0160477
2147.0  25.1953  9.93604  23.9897  0.0294943</code></pre><h2 id="Summary-and-Next-Steps"><a class="docs-heading-anchor" href="#Summary-and-Next-Steps">Summary and Next Steps</a><a id="Summary-and-Next-Steps-1"></a><a class="docs-heading-anchor-permalink" href="#Summary-and-Next-Steps" title="Permalink"></a></h2><h3 id="What-You&#39;ve-Learned"><a class="docs-heading-anchor" href="#What-You&#39;ve-Learned">What You&#39;ve Learned</a><a id="What-You&#39;ve-Learned-1"></a><a class="docs-heading-anchor-permalink" href="#What-You&#39;ve-Learned" title="Permalink"></a></h3><p>In this tutorial, you&#39;ve mastered the fundamentals of working with clump data in Mera.jl:</p><ol><li><strong>Data Loading</strong>: How to load clump data using <code>getclumps()</code> with various options</li><li><strong>Structure Understanding</strong>: The organization of clump catalogs and their properties</li><li><strong>Variable Management</strong>: Working with automatically parsed clump variable names</li><li><strong>Data Analysis</strong>: Using <code>dataoverview()</code> for comprehensive clump statistical analysis</li><li><strong>Unit Handling</strong>: Converting between code units and physical units for clump properties</li><li><strong>Memory Management</strong>: Monitoring and optimizing memory usage for clump datasets</li><li><strong>Data Manipulation</strong>: Using IndexedTables operations for efficient clump data processing</li></ol><h3 id="Key-Takeaways"><a class="docs-heading-anchor" href="#Key-Takeaways">Key Takeaways</a><a id="Key-Takeaways-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Takeaways" title="Permalink"></a></h3><ul><li>Clump data is stored in IndexedTables format for efficient access and manipulation</li><li>Peak positions (peak<em>x, peak</em>y, peak_z) are critical for spatial relationships and should not be modified</li><li>Always be conscious of units - raw data is in code units</li><li>Memory management is important for large clump catalogs</li><li>Variable names are automatically parsed from clump file headers</li><li>Mera.jl provides powerful tools for statistical analysis and clump data exploration</li></ul><h3 id="Continue-Your-Learning"><a class="docs-heading-anchor" href="#Continue-Your-Learning">Continue Your Learning</a><a id="Continue-Your-Learning-1"></a><a class="docs-heading-anchor-permalink" href="#Continue-Your-Learning" title="Permalink"></a></h3><p>Now that you understand clump data fundamentals, you can explore:</p><ul><li><strong>Advanced clump analysis</strong>: Hierarchical structure analysis, mass function studies, and spatial clustering</li><li><strong>Clump evolution studies</strong>: Tracking clump properties across multiple outputs</li><li><strong>Multi-physics analysis</strong>: Combining clump data with hydro, particle, and gravity data</li><li><strong>Statistical analysis</strong>: Advanced statistical methods for clump population studies</li><li><strong>Performance optimization</strong>: Advanced techniques for large-scale clump data processing</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../01_particles_First_Inspection/">« Particles</a><a class="docs-footer-nextpage" href="../api/data_inspection/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Sunday 24 August 2025 16:24">Sunday 24 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
