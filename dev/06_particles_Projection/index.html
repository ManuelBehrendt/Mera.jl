<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>6. Particles: Projections ¬∑ Mera.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Mera.jl logo"/></a><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../00_multi_FirstSteps/">First Steps</a></li><li><span class="tocitem">1-Data Inspection</span><ul><li><a class="tocitem" href="../01_hydro_First_Inspection/">Hydro</a></li><li><a class="tocitem" href="../01_particles_First_Inspection/">Particles</a></li><li><a class="tocitem" href="../01_clumps_First_Inspection/">Clumps</a></li></ul></li><li><span class="tocitem">2-Load by Selection</span><ul><li><a class="tocitem" href="../02_hydro_Load_Selections/">Hydro</a></li><li><a class="tocitem" href="../02_particles_Load_Selections/">Particles</a></li><li><a class="tocitem" href="../02_clumps_Load_Selections/">Clumps</a></li></ul></li><li><span class="tocitem">3-Get Subregions</span><ul><li><a class="tocitem" href="../03_hydro_Get_Subregions/03_hydro_Get_Subregions/">Hydro</a></li><li><a class="tocitem" href="../03_particles_Get_Subregions/03_particles_Get_Subregions/">Particles</a></li><li><a class="tocitem" href="../03_clumps_Get_Subregions/03_clumps_Get_Subregions/">Clumps</a></li></ul></li><li><a class="tocitem" href="../04_multi_Basic_Calculations/">4-Basic Calculations</a></li><li><a class="tocitem" href="../05_multi_Masking_Filtering/05_multi_Masking_Filtering/">5-Mask/Filter/Meta</a></li><li><span class="tocitem">6-Projection</span><ul><li><a class="tocitem" href="../06_hydro_Projection/06_hydro_Projection/">Hydro</a></li><li><a class="tocitem" href="06_particles_Projection/">Particles</a></li></ul></li><li><a class="tocitem" href="../07_multi_Mera_Files/">7-MERA-Files</a></li><li><a class="tocitem" href="../Miscellaneous/">8-Miscellaneous</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../api/">API Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>6. Particles: Projections</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>6. Particles: Projections</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ManuelBehrendt/Mera.jl/blob/master/docs/src/06_particles_Projection.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id=".-Particles:-Projections"><a class="docs-heading-anchor" href="#.-Particles:-Projections">6. Particles: Projections</a><a id=".-Particles:-Projections-1"></a><a class="docs-heading-anchor-permalink" href="#.-Particles:-Projections" title="Permalink"></a></h1><h2 id="Load-The-Data"><a class="docs-heading-anchor" href="#Load-The-Data">Load The Data</a><a id="Load-The-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Load-The-Data" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Mera
info = getinfo(400, &quot;../../testing/simulations/manu_sim_sf_L14&quot;);
particles  = getparticles(info);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-18T23:09:51.793

Code: RAMSES
output [400] summary:
mtime: 2018-09-05T09:51:55.041
ctime: 2019-11-01T17:35:21.051
 =======================================================
simulation time: 594.98 [Myr]
boxlen: 48.0 [kpc]
ncpu: 2048
ndim: 3
-------------------------------------------------------
amr:           true
level(s): 6 - 14 --&gt; cellsize(s): 750.0 [pc] - 2.93 [pc]
-------------------------------------------------------
hydro:         true
hydro-variables:  7  --&gt; (:rho, :vx, :vy, :vz, :p, :var6, :var7)
hydro-descriptor: (:density, :velocity_x, :velocity_y, :velocity_z, :thermal_pressure, :passive_scalar_1, :passive_scalar_2)
Œ≥: 1.6667
-------------------------------------------------------
gravity:       true
gravity-variables: (:epot, :ax, :ay, :az)
-------------------------------------------------------
particles:     true
- Npart:    5.091500e+05
- Nstars:   5.066030e+05
- Ndm:      2.547000e+03
particle variables: (:vx, :vy, :vz, :mass, :birth)
-------------------------------------------------------
clumps:        true
clump-variables: (:index, :lev, :parent, :ncell, :peak_x, :peak_y, :peak_z, Symbol(&quot;rho-&quot;), Symbol(&quot;rho+&quot;), :rho_av, :mass_cl, :relevance)
-------------------------------------------------------
namelist-file: false
timer-file:       false
compilation-file: true
makefile:         true
patchfile:        true
 =======================================================

 [Mera]: Get particle data: 2020-02-18T23:10:01.886

Key vars=(:level, :x, :y, :z, :id)
Using var(s)=(1, 2, 3, 4, 5) = (:vx, :vy, :vz, :mass, :birth)

domain:
xmin::xmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
ymin::ymax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
zmin::zmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]



 Reading data...100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| Time: 0:00:04


Found 5.089390e+05 particles
Memory used for data table :34.947275161743164 MB
-------------------------------------------------------</code></pre><pre><code class="language-julia hljs">particles.data</code></pre><pre><code class="nohighlight hljs">Table with 508939 rows, 10 columns:
Columns:
 #     colname    type
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1   level    Int32
2   x        Float64
3   y        Float64
4   z        Float64
5   id       Int32
6   vx       Float64
7   vy       Float64
8   vz       Float64
9   mass     Float64
10  birth    Float64</code></pre><h2 id="Projection-of-Predefined-Quantities"><a class="docs-heading-anchor" href="#Projection-of-Predefined-Quantities">Projection of Predefined Quantities</a><a id="Projection-of-Predefined-Quantities-1"></a><a class="docs-heading-anchor-permalink" href="#Projection-of-Predefined-Quantities" title="Permalink"></a></h2><p>See the possible variables:</p><pre><code class="language-julia hljs">projection()</code></pre><pre><code class="nohighlight hljs">Predefined vars for projections:
------------------------------------------------
=====================[gas]:=====================
       -all the non derived hydro vars-
:cpu, :level, :rho, :cx, :cy, :cz, :vx, :vy, :vz, :p, var6,...
further possibilities: :rho, :density, :œÅ
              -derived hydro vars-
:x, :y, :z
:sd or :Œ£ or :surfacedensity
:mass, :cellsize, :freefall_time
:cs, :mach, :jeanslength, :jeansnumber

==================[particles]:==================
        all the non derived  vars:
:cpu, :level, :id, :family, :tag
:x, :y, :z, :vx, :vy, :vz, :mass, :birth, :metal....

              -derived particle vars-
:age

==============[gas or particles]:===============
:v, :ekin
squared =&gt; :vx2, :vy2, :vz2
velocity dispersion =&gt; œÉx, œÉy, œÉz, œÉ

related to a given center:
---------------------------
:vr_cylinder, vr_sphere (radial components)
:vœï_cylinder, :vŒ∏
squared =&gt; :vr_cylinder2, :vœï_cylinder2
velocity dispersion =&gt; œÉr_cylinder, œÉœï_cylinder

2d maps (not projected):
:r_cylinder
:œï
------------------------------------------------</code></pre><h2 id="Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)"><a class="docs-heading-anchor" href="#Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)">Projection of a Single Quantity in Different Directions (z,y,x)</a><a id="Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)-1"></a><a class="docs-heading-anchor-permalink" href="#Projection-of-a-Single-Quantity-in-Different-Directions-(z,y,x)" title="Permalink"></a></h2><p>Here we project the surface density in the z-direction of the data within a particular vertical range (domain=[0:1]) on a grid corresponding to level=9. Pass any object of <em>PartDataType</em> (here: &quot;particles&quot;) to the <em>projection</em>-function and select a variable by a Symbol (here: :sd = :surfacedensity = :Œ£ in Msol/pc^3)</p><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, unit=:Msol_pc2, lmax=9, zrange=[0.45,0.55])
proj_z = projection(particles, :Œ£,  unit=:Msol_pc2, lmax=9, zrange=[0.45,0.55], verbose=false)
proj_z = projection(particles, :surfacedensity, unit=:Msol_pc2, lmax=9,zrange=[0.45,0.55], verbose=false)
proj_z = projection(particles, :sd, :Msol_pc2, lmax=9, zrange=[0.45,0.55], verbose=false) # The keyword &quot;unit&quot; (singular) can be omit if the following order is preserved: data-object, quantity, unit.
proj_x = projection(particles, :sd, :Msol_pc2, lmax=9, direction = :x, zrange=[0.45,0.55], verbose=false); # Project the surface density in x-direction</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:42.33

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
ymin::ymax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
zmin::zmax: 0.95 :: 1.0  	==&gt; 45.6 [kpc] :: 48.0 [kpc]

Map data on given lmax: 9
xrange: 1 513
yrange: 1 513
zrange: 487 513
pixel-size: 93.75 [pc]</code></pre><h3 id="Select-a-Range-Related-to-a-Center"><a class="docs-heading-anchor" href="#Select-a-Range-Related-to-a-Center">Select a Range Related to a Center</a><a id="Select-a-Range-Related-to-a-Center-1"></a><a class="docs-heading-anchor-permalink" href="#Select-a-Range-Related-to-a-Center" title="Permalink"></a></h3><p>See also in the documentation for: load data by selection</p><pre><code class="language-julia hljs">cv = (particles.boxlen / 2.) * particles.scale.kpc # provide the box-center in kpc
proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                    center=[cv,cv,cv], range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:45.187

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><p>Use the short notation for the box center :bc or :boxcenter for all dimensions (x,y,z):</p><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                        center=[:boxcenter], range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:46.718

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                        center=[:bc], range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:46.818

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><p>Use the box center notation for individual dimensions, here x,z:</p><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                        xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                        center=[:bc, 24., :bc], range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:48.695

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><h3 id="Get-Multiple-Quantities"><a class="docs-heading-anchor" href="#Get-Multiple-Quantities">Get Multiple Quantities</a><a id="Get-Multiple-Quantities-1"></a><a class="docs-heading-anchor-permalink" href="#Get-Multiple-Quantities" title="Permalink"></a></h3><p>Get several quantities with one function call by passing an array containing the selected variables (at least one entry). The keyword name for the units is now in plural.</p><pre><code class="language-julia hljs">proj1_x = projection(particles, [:sd], units=[:Msol_pc2], lmax=9,
                        direction = :x,
                        xrange=[-10.,10.],
                        yrange=[-10.,10.],
                        zrange=[-2.,2.],
                        center=[24.,24.,24.],
                        range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:49.018

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><p>Pass an array containing several quantities to process and their corresponding units:</p><pre><code class="language-julia hljs">proj1_z = projection(particles, [:sd, :vx], units=[:Msol_pc2, :km_s], lmax=9,
                        direction = :x,
                        xrange=[-10.,10.],
                        yrange=[-10.,10.],
                        zrange=[-2.,2.],
                        center=[24.,24.,24.],
                        range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:49.132

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><p>The function can be called without any keywords by preserving the following order: dataobject, variables, units</p><pre><code class="language-julia hljs">proj1_z = projection(particles, [:sd , :vx], [:Msol_pc2, :km_s], lmax=9,
                        direction = :x,
                        xrange=[-10.,10.],
                        yrange=[-10.,10.],
                        zrange=[-2.,2.],
                        center=[24.,24.,24.],
                        range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:50.02

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><p>If all selected variables should be of the same unit use the following arguments: dataobject, array of quantities, unit (no array needed)</p><pre><code class="language-julia hljs">projvel_z = projection(particles, [:vx, :vy, :vz], :km_s, lmax=9,
                        xrange=[-10.,10.],
                        yrange=[-10.,10.],
                        zrange=[-2.,2.],
                        center=[24.,24.,24.],
                        range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-12T20:07:50.259

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]</code></pre><h2 id="Function-Output"><a class="docs-heading-anchor" href="#Function-Output">Function Output</a><a id="Function-Output-1"></a><a class="docs-heading-anchor-permalink" href="#Function-Output" title="Permalink"></a></h2><p>List the fields of the assigned object:</p><pre><code class="language-julia hljs">propertynames(proj1_z)</code></pre><pre><code class="nohighlight hljs">(:maps, :maps_unit, :maps_lmax, :maps_mode, :lmax_projected, :lmin, :lmax, :ref_time, :ranges, :extent, :cextent, :ratio, :boxlen, :scale, :info)</code></pre><p>The projected 2D maps are stored in a dictionary:</p><pre><code class="language-julia hljs">proj1_z.maps</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:
  :sd =&gt; [1.29223 1.29223 ‚Ä¶ 1.29223 0.0; 2.58445 1.29223 ‚Ä¶ 0.0 0.0; ‚Ä¶ ; 3.87668‚Ä¶
  :vx =&gt; [178.738 143.611 ‚Ä¶ 131.468 NaN; 96.6932 154.086 ‚Ä¶ NaN NaN; ‚Ä¶ ; -189.97‚Ä¶</code></pre><p>The maps can be accessed by giving the name of the dictionary:</p><pre><code class="language-julia hljs">proj1_z.maps[:sd]</code></pre><pre><code class="nohighlight hljs">214√ó44 Array{Float64,2}:
  1.29223  1.29223  1.29223   1.29223  ‚Ä¶  0.0      1.29223  1.29223  0.0
  2.58445  1.29223  2.58445   2.58445     1.29223  1.29223  0.0      0.0
  0.0      1.29223  3.87668   2.58445     1.29223  0.0      0.0      0.0
  1.29223  1.29223  2.58445   1.29223     0.0      1.29223  0.0      0.0
  0.0      0.0      1.29223   2.58445     1.29223  0.0      1.29223  0.0
  2.58445  2.58445  3.87668   1.29223  ‚Ä¶  0.0      0.0      0.0      0.0
  0.0      2.58445  0.0       2.58445     2.58445  0.0      0.0      0.0
  1.29223  1.29223  6.46114   3.87668     3.87668  0.0      0.0      0.0
  0.0      1.29223  1.29223   1.29223     0.0      2.58445  0.0      0.0
  1.29223  2.58445  1.29223   3.87668     5.16891  2.58445  0.0      0.0
  1.29223  0.0      1.29223   7.75336  ‚Ä¶  0.0      2.58445  0.0      0.0
  2.58445  2.58445  2.58445   3.87668     6.46114  0.0      1.29223  0.0
  2.58445  2.58445  5.16891   0.0         0.0      2.58445  0.0      0.0
  ‚ãÆ                                    ‚ã±  ‚ãÆ                             
  3.87668  3.87668  5.16891   2.58445     5.16891  3.87668  0.0      0.0
  1.29223  6.46114  2.58445   5.16891     3.87668  2.58445  2.58445  0.0
  5.16891  7.75336  3.87668   6.46114     3.87668  2.58445  3.87668  0.0
 11.63     7.75336  5.16891   5.16891  ‚Ä¶  7.75336  5.16891  1.29223  0.0
  1.29223  3.87668  3.87668   2.58445     2.58445  1.29223  0.0      0.0
  5.16891  3.87668  3.87668  11.63        2.58445  3.87668  0.0      0.0
  2.58445  6.46114  6.46114   6.46114     5.16891  2.58445  1.29223  0.0
  2.58445  3.87668  3.87668  10.3378      9.04559  2.58445  0.0      0.0
  5.16891  6.46114  7.75336   9.04559  ‚Ä¶  3.87668  2.58445  0.0      0.0
  3.87668  3.87668  0.0       6.46114     9.04559  6.46114  0.0      0.0
  3.87668  5.16891  5.16891   1.29223     2.58445  3.87668  0.0      0.0
  0.0      0.0      0.0       0.0         0.0      0.0      0.0      0.0</code></pre><p>The units of the maps are stored in:</p><pre><code class="language-julia hljs">proj1_z.maps_unit</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 2 entries:
  :sd =&gt; :Msol_pc2
  :vx =&gt; :km_s</code></pre><p>The following fields are helpful for further calculations or plots.</p><pre><code class="language-julia hljs">proj1_z.ranges # normalized to the domain=[0:1]</code></pre><pre><code class="nohighlight hljs">6-element Array{Float64,1}:
 0.29166666666647767
 0.7083333333328743
 0.29166666666647767
 0.7083333333328743
 0.4583333333330363
 0.5416666666663156</code></pre><pre><code class="language-julia hljs">proj1_z.extent # ranges in code units</code></pre><pre><code class="nohighlight hljs">4-element Array{Float64,1}:
 13.96875
 34.03125
 21.9375
 26.0625</code></pre><pre><code class="language-julia hljs">proj1_z.cextent # ranges in code units relative to a given center (by default: box center)</code></pre><pre><code class="nohighlight hljs">4-element Array{Float64,1}:
 -10.031250000015554
  10.031249999984446
  -2.062500000015554
   2.062499999984446</code></pre><pre><code class="language-julia hljs">proj1_z.ratio # the ratio between the two ranges</code></pre><pre><code class="nohighlight hljs">4.863636363636363</code></pre><h2 id="Plot-Maps-with-Python"><a class="docs-heading-anchor" href="#Plot-Maps-with-Python">Plot Maps with Python</a><a id="Plot-Maps-with-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Maps-with-Python" title="Permalink"></a></h2><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false)
proj_x = projection(particles, :sd, :Msol_pc2, lmax=9,
                    zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false,
                    direction = :x);</code></pre><p>Python functions can be directly called in Julia, which gives the opportunity, e.g. to use the Matplotlib library.</p><pre><code class="language-julia hljs">using PyPlot
using ColorSchemes
cmap = ColorMap(ColorSchemes.lajolla.colors) # See http://www.fabiocrameri.ch/colourmaps.php
cmap2 = ColorMap(ColorSchemes.roma.colors)</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_43_0.svg" alt="svg"/></p><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=&quot;lower&quot;, extent=proj_x.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_44_0.png" alt="png"/></p><p>Project a specific spatial range and plot the axes of the map relative to the box-center (given by keyword: data_center):</p><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false,
                    data_center=[24.,24.,24.], data_center_unit=:kpc)
proj_x = projection(particles, :sd, :Msol_pc2, lmax=9,
                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false,
                    data_center=[24.,24.,24.], data_center_unit=:kpc,
                    direction = :x);</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=&quot;lower&quot;, extent=proj_x.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_47_0.png" alt="png"/></p><p>Plot the axes of the map relative to the map-center (given by keyword: data_center):</p><pre><code class="language-julia hljs">proj_z = projection(particles, :sd, :Msol_pc2, lmax=9,
                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false,
                    data_center=[19.,19.,24.], data_center_unit=:kpc)
proj_x = projection(particles, :sd, :Msol_pc2, lmax=9,
                    xrange=[-10.,0.], yrange=[-10.,0.], zrange=[-2.,2.], center=[:boxcenter], range_unit=:kpc,
                    verbose=false,
                    data_center=[19.,19.,24.], data_center_unit=:kpc,
                    direction = :x);</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:sd])), cmap=cmap, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:sd])), cmap=cmap, origin=&quot;lower&quot;, extent=proj_x.cextent, vmin=0, vmax=3)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(\Sigma) \ [M_{\odot} pc^{-2}]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_50_0.png" alt="png"/></p><h2 id="Projections-of-Derived-Kinematic-Data"><a class="docs-heading-anchor" href="#Projections-of-Derived-Kinematic-Data">Projections of Derived Kinematic Data</a><a id="Projections-of-Derived-Kinematic-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Projections-of-Derived-Kinematic-Data" title="Permalink"></a></h2><h4 id="Use-quantities-in-cartesian-coordinates:"><a class="docs-heading-anchor" href="#Use-quantities-in-cartesian-coordinates:">Use quantities in cartesian coordinates:</a><a id="Use-quantities-in-cartesian-coordinates:-1"></a><a class="docs-heading-anchor-permalink" href="#Use-quantities-in-cartesian-coordinates:" title="Permalink"></a></h4><p>Project the following derived data (mass weighted by default): The absolute value of the velocity :v, the velocity dispersion :œÉ in different directions and the kinetic energy :ekin. The Julia language supports Unicode characters and can be inserted by e.g. &quot;\sigma + tab-key&quot; leading to: <strong>œÉ</strong>.</p><pre><code class="language-julia hljs">proj_z = projection(particles, [:v, :œÉ, :œÉx, :œÉy, :œÉz, :ekin],
                    units=[:km_s,:km_s,:km_s,:km_s,:km_s,:erg],
                    lmax=9,
                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                    center=[24.,24.,24.], range_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-18T23:11:45.881

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]



 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| Time: 0:00:03</code></pre><p>For the velocity dispersion additional maps are created to created the mass-weighted quantity: E. g.: œÉx = sqrt( &lt;vx^2&gt; - &lt; vx &gt;^2 )</p><pre><code class="language-julia hljs">proj_z.maps</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 14 entries:
  :ekin =&gt; [2.4169e51 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶
  :sd   =&gt; [0.00129258 0.0 ‚Ä¶ 0.0 0.0; 0.0 0.0 ‚Ä¶ 0.0 0.0; ‚Ä¶ ; 0.0 0.0 ‚Ä¶ 0.0 0.0;‚Ä¶
  :v    =&gt; [146.277 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; Na‚Ä¶
  :v2   =&gt; [4.97588 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; Na‚Ä¶
  :vx   =&gt; [1.22376 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; Na‚Ä¶
  :vx2  =&gt; [1.49758 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; Na‚Ä¶
  :vy   =&gt; [-1.84928 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; N‚Ä¶
  :vy2  =&gt; [3.41984 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; Na‚Ä¶
  :vz   =&gt; [-0.241781 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶
  :vz2  =&gt; [0.058458 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; N‚Ä¶
  :œÉ    =&gt; [1.90735e-6 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN;‚Ä¶
  :œÉx   =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; NaN Na‚Ä¶
  :œÉy   =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN; NaN Na‚Ä¶
  :œÉz   =&gt; [1.72737e-7 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN;‚Ä¶</code></pre><pre><code class="language-julia hljs">proj_z.maps_unit</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 14 entries:
  :ekin =&gt; :erg
  :sd   =&gt; :standard
  :v    =&gt; :km_s
  :v2   =&gt; :standard
  :vx   =&gt; :standard
  :vx2  =&gt; :standard
  :vy   =&gt; :standard
  :vy2  =&gt; :standard
  :vz   =&gt; :standard
  :vz2  =&gt; :standard
  :œÉ    =&gt; :km_s
  :œÉx   =&gt; :km_s
  :œÉy   =&gt; :km_s
  :œÉz   =&gt; :km_s</code></pre><pre><code class="language-julia hljs">usedmemory(proj_z);</code></pre><pre><code class="nohighlight hljs">Memory used: 5.16 MB</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 5.5))

subplot(2, 3, 1)
title(&quot;v [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:v])  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent, vmax=300.)
colorbar()


subplot(2, 3, 2)
title(&quot;œÉ [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉ])  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(2, 3, 3)
title(&quot;Ekin [erg]&quot;)
imshow( log10.(permutedims(proj_z.maps[:ekin]) ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(2, 3, 4)
title(&quot;œÉx [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉx])   ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(2, 3, 5)
title(&quot;œÉy [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉy])  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(2, 3, 6)
title(&quot;œÉz [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉz])  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar();
</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_59_0.png" alt="png"/></p><h4 id="Use-quantities-in-cylindrical-coordinates:"><a class="docs-heading-anchor" href="#Use-quantities-in-cylindrical-coordinates:">Use quantities in cylindrical coordinates:</a><a id="Use-quantities-in-cylindrical-coordinates:-1"></a><a class="docs-heading-anchor-permalink" href="#Use-quantities-in-cylindrical-coordinates:" title="Permalink"></a></h4><h4 id="Face-on-disc-(z-direction)"><a class="docs-heading-anchor" href="#Face-on-disc-(z-direction)">Face-on disc (z-direction)</a><a id="Face-on-disc-(z-direction)-1"></a><a class="docs-heading-anchor-permalink" href="#Face-on-disc-(z-direction)" title="Permalink"></a></h4><p>For the cylindrical or spherical components of a quantity, the center of the coordinate system is used (keywords: data<em>center = center default) and can be given with the keyword &quot;data</em>center&quot; and its units with &quot;data<em>center</em>unit&quot;. Additionally, the quantities that are based on cartesian coordinates can be given.</p><pre><code class="language-julia hljs">proj_z = projection(particles, [:v, :œÉ, :œÉx, :œÉy, :œï, :r_cylinder, :vr_cylinder, :vœï_cylinder, :œÉr_cylinder, :œÉœï_cylinder],                    
                    units=[:km_s,:km_s,:km_s, :km_s, :standard, :kpc, :km_s, :km_s, :km_s, :km_s],
                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                    center=[:boxcenter], range_unit=:kpc,
                    data_center=[24.,24.,24.], data_center_unit=:kpc);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-18T23:14:53.029

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 9
xrange: 150 364
yrange: 150 364
zrange: 235 279
pixel-size: 93.75 [pc]



 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| Time: 0:00:01</code></pre><pre><code class="language-julia hljs">proj_z.maps</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:
  :r_cylinder   =&gt; [14.0096 13.9434 ‚Ä¶ 14.1205 14.1874; 13.9434 13.877 ‚Ä¶ 14.0549‚Ä¶
  :sd           =&gt; [0.00129258 0.0 ‚Ä¶ 0.0 0.0; 0.0 0.0 ‚Ä¶ 0.0 0.0; ‚Ä¶ ; 0.0 0.0 ‚Ä¶ ‚Ä¶
  :v            =&gt; [146.277 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :v2           =&gt; [4.97588 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :vr_cylinder  =&gt; [29.3132 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :vr_cylinder2 =&gt; [0.199823 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ Na‚Ä¶
  :vx           =&gt; [1.22376 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :vx2          =&gt; [1.49758 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :vy           =&gt; [-1.84928 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ Na‚Ä¶
  :vy2          =&gt; [3.41984 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :vœï_cylinder  =&gt; [142.43 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN ‚Ä¶
  :vœï_cylinder2 =&gt; [4.7176 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN ‚Ä¶
  :œÉ            =&gt; [1.90735e-6 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ ‚Ä¶
  :œÉr_cylinder  =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN‚Ä¶
  :œÉx           =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN‚Ä¶
  :œÉy           =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN‚Ä¶
  :œÉœï_cylinder  =&gt; [0.0 NaN ‚Ä¶ NaN NaN; NaN NaN ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN NaN‚Ä¶
  :œï            =&gt; [3.92699 3.92224 ‚Ä¶ 2.34837 2.34373; 3.93175 3.92699 ‚Ä¶ 2.3436‚Ä¶</code></pre><pre><code class="language-julia hljs">proj_z.maps_unit</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 18 entries:
  :r_cylinder   =&gt; :kpc
  :sd           =&gt; :standard
  :v            =&gt; :km_s
  :v2           =&gt; :standard
  :vr_cylinder  =&gt; :km_s
  :vr_cylinder2 =&gt; :standard
  :vx           =&gt; :standard
  :vx2          =&gt; :standard
  :vy           =&gt; :standard
  :vy2          =&gt; :standard
  :vœï_cylinder  =&gt; :km_s
  :vœï_cylinder2 =&gt; :standard
  :œÉ            =&gt; :km_s
  :œÉr_cylinder  =&gt; :km_s
  :œÉx           =&gt; :km_s
  :œÉy           =&gt; :km_s
  :œÉœï_cylinder  =&gt; :km_s
  :œï            =&gt; :radian</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 8.5))

subplot(3, 3, 1)
title(&quot;Radius [kpc]&quot;)
imshow( permutedims(proj_z.maps[:r_cylinder]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(3, 3, 2)
title(&quot;vr [km/s]&quot;)
imshow( permutedims(proj_z.maps[:vr_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent, vmin=-200.,vmax=200.)
colorbar()


subplot(3, 3, 3)
title(&quot;vœï [km/s]&quot;)
imshow( permutedims(proj_z.maps[:vœï_cylinder]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 4)
title(&quot;œï-angle&quot;)
imshow( (permutedims(proj_z.maps[:œï]) ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 5)
title(&quot;œÉr [km/s]&quot;)
imshow( permutedims(proj_z.maps[:œÉr_cylinder]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(3, 3, 6)
title(&quot;œÉœï [km/s]&quot;)
imshow( permutedims(proj_z.maps[:œÉœï_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 7)
title(&quot;œÉ [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉ]) ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 8)
title(&quot;œÉx [km/s]&quot;)
imshow( permutedims(proj_z.maps[:œÉx]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(3, 3, 9)
title(&quot;œÉy [km/s]&quot;)
imshow( permutedims(proj_z.maps[:œÉy] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar();</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_64_0.png" alt="png"/></p><h2 id="Project-on-a-Coarser-Grid"><a class="docs-heading-anchor" href="#Project-on-a-Coarser-Grid">Project on a Coarser Grid</a><a id="Project-on-a-Coarser-Grid-1"></a><a class="docs-heading-anchor-permalink" href="#Project-on-a-Coarser-Grid" title="Permalink"></a></h2><p>The default is the projection on the maximum loaded grid level (always provided in the output). Choose a smaller level with the keyword <em>lmax</em> to project on a coarser grid in addition. Higher-resolution data is averaged within each coarser grid-cell (default: mass-weighted). By default, the data is assumed to be in the center of the simulation box.</p><pre><code class="language-julia hljs">proj_z = projection(particles,
                    [:v, :œÉ, :œÉx, :œÉy, :œÉz, :vr_cylinder, :vœï_cylinder, :œÉr_cylinder, :œÉœï_cylinder],
                    :km_s,
                    xrange=[-10.,10.], yrange=[-10.,10.], zrange=[-2.,2.],
                    center=[:boxcenter], range_unit=:kpc,
                    lmax=8);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-18T23:15:37.232

center: [0.5, 0.5, 0.5] ==&gt; [24.0 [kpc] :: 24.0 [kpc] :: 24.0 [kpc]]

domain:
xmin::xmax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
ymin::ymax: 0.2916667 :: 0.7083333  	==&gt; 14.0 [kpc] :: 34.0 [kpc]
zmin::zmax: 0.4583333 :: 0.5416667  	==&gt; 22.0 [kpc] :: 26.0 [kpc]

Map data on given lmax: 8
xrange: 75 183
yrange: 75 183
zrange: 118 140
pixel-size: 187.5 [pc]



 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| Time: 0:00:01</code></pre><p>The projection onto the maximum loaded grid is always provided:</p><pre><code class="language-julia hljs">proj_z.maps</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:
  :sd           =&gt; [0.000323146 0.000323146 ‚Ä¶ 0.0 0.0; 0.000969439 0.000323146 ‚Ä¶
  :v            =&gt; [146.277 156.41 ‚Ä¶ NaN NaN; 168.992 166.428 ‚Ä¶ NaN NaN; ‚Ä¶ ; Na‚Ä¶
  :v2           =&gt; [4.97588 5.6892 ‚Ä¶ NaN NaN; 6.6621 6.4413 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN ‚Ä¶
  :vr_cylinder  =&gt; [29.3132 76.3408 ‚Ä¶ NaN NaN; 26.5929 6.80341 ‚Ä¶ NaN NaN; ‚Ä¶ ; N‚Ä¶
  :vr_cylinder2 =&gt; [0.199823 1.35529 ‚Ä¶ NaN NaN; 0.25831 0.010764 ‚Ä¶ NaN NaN; ‚Ä¶ ;‚Ä¶
  :vx           =&gt; [1.22376 0.610176 ‚Ä¶ NaN NaN; 1.49846 1.69991 ‚Ä¶ NaN NaN; ‚Ä¶ ; ‚Ä¶
  :vx2          =&gt; [1.49758 0.372314 ‚Ä¶ NaN NaN; 2.33418 2.88971 ‚Ä¶ NaN NaN; ‚Ä¶ ; ‚Ä¶
  :vy           =&gt; [-1.84928 -2.29076 ‚Ä¶ NaN NaN; -2.04837 -1.86716 ‚Ä¶ NaN NaN; ‚Ä¶‚Ä¶
  :vy2          =&gt; [3.41984 5.24756 ‚Ä¶ NaN NaN; 4.22525 3.48629 ‚Ä¶ NaN NaN; ‚Ä¶ ; N‚Ä¶
  :vz           =&gt; [-0.241781 -0.263284 ‚Ä¶ NaN NaN; -0.187282 0.25555 ‚Ä¶ NaN NaN;‚Ä¶
  :vz2          =&gt; [0.058458 0.0693187 ‚Ä¶ NaN NaN; 0.102671 0.0653057 ‚Ä¶ NaN NaN;‚Ä¶
  :vœï_cylinder  =&gt; [142.43 135.419 ‚Ä¶ NaN NaN; 164.297 165.443 ‚Ä¶ NaN NaN; ‚Ä¶ ; Na‚Ä¶
  :vœï_cylinder2 =&gt; [4.7176 4.26459 ‚Ä¶ NaN NaN; 6.30112 6.36523 ‚Ä¶ NaN NaN; ‚Ä¶ ; Na‚Ä¶
  :œÉ            =&gt; [1.90735e-6 0.0 ‚Ä¶ NaN NaN; 9.45804 1.90735e-6 ‚Ä¶ NaN NaN; ‚Ä¶ ;‚Ä¶
  :œÉr_cylinder  =&gt; [0.0 0.0 ‚Ä¶ NaN NaN; 20.0894 8.42937e-8 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN Na‚Ä¶
  :œÉx           =&gt; [0.0 0.0 ‚Ä¶ NaN NaN; 19.5408 0.0 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶
  :œÉy           =&gt; [0.0 0.0 ‚Ä¶ NaN NaN; 11.246 1.9543e-6 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶
  :œÉz           =&gt; [1.72737e-7 0.0 ‚Ä¶ NaN NaN; 17.0492 0.0 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN Na‚Ä¶
  :œÉœï_cylinder  =&gt; [0.0 0.0 ‚Ä¶ NaN NaN; 10.1009 0.0 ‚Ä¶ NaN NaN; ‚Ä¶ ; NaN NaN ‚Ä¶ NaN‚Ä¶</code></pre><pre><code class="language-julia hljs">proj_z.maps_unit</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:
  :sd           =&gt; :standard
  :v            =&gt; :km_s
  :v2           =&gt; :standard
  :vr_cylinder  =&gt; :km_s
  :vr_cylinder2 =&gt; :standard
  :vx           =&gt; :standard
  :vx2          =&gt; :standard
  :vy           =&gt; :standard
  :vy2          =&gt; :standard
  :vz           =&gt; :standard
  :vz2          =&gt; :standard
  :vœï_cylinder  =&gt; :km_s
  :vœï_cylinder2 =&gt; :standard
  :œÉ            =&gt; :km_s
  :œÉr_cylinder  =&gt; :km_s
  :œÉx           =&gt; :km_s
  :œÉy           =&gt; :km_s
  :œÉz           =&gt; :km_s
  :œÉœï_cylinder  =&gt; :km_s</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 8.5))

subplot(3, 3, 1)
title(&quot;|v| [km/s]&quot;)
imshow( permutedims(proj_z.maps[:v]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent, vmax=300.)
colorbar()


subplot(3, 3, 2)
title(&quot;vr [km/s]&quot;)
imshow( permutedims(proj_z.maps[:vr_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent, vmin=-200.,vmax=200.)
colorbar()


subplot(3, 3, 3)
title(&quot;vœï [km/s]&quot;)
imshow( permutedims(proj_z.maps[:vœï_cylinder]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 4)
title(&quot;œÉz [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉz]) ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 5)
title(&quot;œÉr [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉr_cylinder]  )), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(3, 3, 6)
title(&quot;œÉœï [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉœï_cylinder] )), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 7)
title(&quot;œÉ [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉ]) ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()



subplot(3, 3, 8)
title(&quot;œÉx [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉx]  )), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar()


subplot(3, 3, 9)
title(&quot;œÉy [km/s]&quot;)
imshow( (permutedims(proj_z.maps[:œÉy] )), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_z.cextent)
colorbar();</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_71_0.png" alt="png"/></p><h2 id="Remap-a-Projected-Data-onto-a-Coarser-Grid"><a class="docs-heading-anchor" href="#Remap-a-Projected-Data-onto-a-Coarser-Grid">Remap a Projected Data onto a Coarser Grid</a><a id="Remap-a-Projected-Data-onto-a-Coarser-Grid-1"></a><a class="docs-heading-anchor-permalink" href="#Remap-a-Projected-Data-onto-a-Coarser-Grid" title="Permalink"></a></h2><p>Pass the object with the projected data to the function <em>remap</em> and the level of the coarser grid:</p><pre><code class="language-julia hljs">proj_zlmax = remap(proj_z, 6, weighting=:mass);</code></pre><pre><code class="nohighlight hljs">remap from:
level 8 =&gt; 6
cellsize 187.5 [pc] =&gt; 750.0 [pc]
pixels (108, 108) =&gt; (27, 27)</code></pre><pre><code class="language-julia hljs">proj_zlmax.maps_lmax</code></pre><pre><code class="nohighlight hljs">DataStructures.SortedDict{Any,Any,Base.Order.ForwardOrdering} with 19 entries:
  :sd           =&gt; [0.000323146 0.000646292 ‚Ä¶ 0.000969439 0.0; 0.000323146 0.00‚Ä¶
  :v            =&gt; [146.277 168.298 ‚Ä¶ 156.122 NaN; 139.301 147.989 ‚Ä¶ 163.056 Na‚Ä¶
  :v2           =&gt; [4.97588 6.59448 ‚Ä¶ 5.72437 NaN; 4.51262 5.41716 ‚Ä¶ 6.34405 Na‚Ä¶
  :vr_cylinder  =&gt; [29.3132 84.1136 ‚Ä¶ 12.6568 NaN; -65.7457 1.40056 ‚Ä¶ -13.4105 ‚Ä¶
  :vr_cylinder2 =&gt; [0.199823 1.66491 ‚Ä¶ 1.15359 NaN; 1.0052 0.0947446 ‚Ä¶ 0.295219‚Ä¶
  :vx           =&gt; [1.22376 0.492592 ‚Ä¶ -1.53257 NaN; 2.0553 1.52317 ‚Ä¶ -1.57894 ‚Ä¶
  :vx2          =&gt; [1.49758 0.249049 ‚Ä¶ 2.51795 NaN; 4.22424 2.55826 ‚Ä¶ 2.92281 N‚Ä¶
  :vy           =&gt; [-1.84928 -2.42313 ‚Ä¶ -1.35159 NaN; -0.536675 -1.55209 ‚Ä¶ -1.8‚Ä¶
  :vy2          =&gt; [3.41984 5.88813 ‚Ä¶ 3.07412 NaN; 0.28802 2.57923 ‚Ä¶ 3.41524 Na‚Ä¶
  :vz           =&gt; [-0.241781 -0.672377 ‚Ä¶ -0.170057 NaN; -0.0189591 -0.412132 ‚Ä¶‚Ä¶
  :vz2          =&gt; [0.058458 0.457301 ‚Ä¶ 0.132298 NaN; 0.000359447 0.279663 ‚Ä¶ 0.‚Ä¶
  :vœï_cylinder  =&gt; [142.43 138.647 ‚Ä¶ 133.136 NaN; 122.804 142.63 ‚Ä¶ 158.394 NaN;‚Ä¶
  :vœï_cylinder2 =&gt; [4.7176 4.47227 ‚Ä¶ 4.43848 NaN; 3.50705 5.04275 ‚Ä¶ 6.04282 NaN‚Ä¶
  :œÉ            =&gt; [1.90735e-6 5.72296 ‚Ä¶ 15.5331 0.0; 0.0 37.3334 ‚Ä¶ 26.3214 0.0‚Ä¶
  :œÉr_cylinder  =&gt; [0.0 9.17629 ‚Ä¶ 69.2848 0.0; 0.0 20.1358 ‚Ä¶ 33.0096 0.0; ‚Ä¶ ; 0‚Ä¶
  :œÉx           =&gt; [0.0 5.24676 ‚Ä¶ 26.9716 0.0; 0.0 32.0052 ‚Ä¶ 42.9889 0.0; ‚Ä¶ ; 0‚Ä¶
  :œÉy           =&gt; [0.0 8.44153 ‚Ä¶ 73.2366 0.0; 0.0 27.0583 ‚Ä¶ 11.713 0.0; ‚Ä¶ ; 0.‚Ä¶
  :œÉz           =&gt; [1.72737e-7 4.73321 ‚Ä¶ 21.0841 0.0; 0.0 21.7301 ‚Ä¶ 4.72985 0.0‚Ä¶
  :œÉœï_cylinder  =&gt; [0.0 2.88507 ‚Ä¶ 36.8894 0.0; 0.0 36.6195 ‚Ä¶ 29.9383 0.0; ‚Ä¶ ; 0‚Ä¶</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 8.5))

subplot(3, 3, 1)
title(&quot;Radius [kpc]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:v]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()


subplot(3, 3, 2)
title(&quot;vr [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:vr_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent, vmin=-150.,vmax=150.)
colorbar()


subplot(3, 3, 3)
title(&quot;vœï [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:vœï_cylinder]  ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()



subplot(3, 3, 4)
title(&quot;œÉz [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉz]) , cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()



subplot(3, 3, 5)
title(&quot;œÉr [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉr_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()


subplot(3, 3, 6)
title(&quot;œÉœï [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉœï_cylinder] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()



subplot(3, 3, 7)
title(&quot;œÉ [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉ]) , cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()



subplot(3, 3, 8)
title(&quot;œÉx [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉx]), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar()


subplot(3, 3, 9)
title(&quot;œÉy [km/s]&quot;)
imshow( permutedims(proj_zlmax.maps_lmax[:œÉy] ), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_zlmax.cextent)
colorbar();</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_76_0.png" alt="png"/></p><h2 id="Projection-of-the-Birth/Age-Time"><a class="docs-heading-anchor" href="#Projection-of-the-Birth/Age-Time">Projection of the Birth/Age-Time</a><a id="Projection-of-the-Birth/Age-Time-1"></a><a class="docs-heading-anchor-permalink" href="#Projection-of-the-Birth/Age-Time" title="Permalink"></a></h2><p>Project the average birth-time of the particles to the grid:</p><pre><code class="language-julia hljs">proj_z = projection(particles, :birth, :Myr,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);
proj_x = projection(particles, :birth, :Myr,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x, verbose=false);</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:birth])), cmap=cmap2, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Birth) \ [Myr]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:birth])), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_x.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Birth) \ [Myr]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_80_0.png" alt="png"/></p><p>Project the average age of the particles to the grid. The age is taken relative to the loaded snapshot time by default.</p><pre><code class="language-julia hljs">proj_z = projection(particles, :age, :Myr,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);
proj_x = projection(particles, :age, :Myr,
                    lmax=6,  zrange=[0.45,0.55], direction=:x,  center=[0.,0.,0.], verbose=false);</code></pre><p>The reference time (code units) for the age calculation:</p><pre><code class="language-julia hljs">proj_z.ref_time</code></pre><pre><code class="nohighlight hljs">39.9019537349027</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_x.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_85_0.png" alt="png"/></p><p>Project the average age of the particles relative to a given reference time:</p><pre><code class="language-julia hljs">proj_z = projection(particles, :age, :Myr, ref_time=0.,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], verbose=false);
proj_x = projection(particles, :age, :Myr, ref_time = 0.,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x, verbose=false);</code></pre><p>The reference time (code units) for the age calculation:</p><pre><code class="language-julia hljs">proj_z.ref_time</code></pre><pre><code class="nohighlight hljs">0.0</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( ( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;)

subplot(1,2,2)
im = imshow( ( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_x.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_90_0.png" alt="png"/></p><h2 id="Projection-of-Masked-Data"><a class="docs-heading-anchor" href="#Projection-of-Masked-Data">Projection of Masked Data</a><a id="Projection-of-Masked-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Projection-of-Masked-Data" title="Permalink"></a></h2><p>Mask particles with ages higher than 500 Myr by creating a Bool-array where the smaller ages correspond to false entries:</p><pre><code class="language-julia hljs">mask = getvar(particles, :age, :Myr) .&gt; 500. ;</code></pre><pre><code class="language-julia hljs">proj_z = projection(particles, :age, :Myr, mask=mask,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.]);
proj_x = projection(particles, :age, :Myr, mask=mask,
                    lmax=6,  zrange=[0.45,0.55], center=[0.,0.,0.], direction=:x);</code></pre><pre><code class="nohighlight hljs"> [Mera]: 2020-02-18T23:14:17.09

domain:
xmin::xmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
ymin::ymax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
zmin::zmax: 0.45 :: 0.55  	==&gt; 21.6 [kpc] :: 26.4 [kpc]

Map data on given lmax: 6
xrange: 1 65
yrange: 1 65
zrange: 29 37
pixel-size: 750.0 [pc]

:mask provided by function

 [Mera]: 2020-02-18T23:14:24.262

domain:
xmin::xmax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
ymin::ymax: 0.0 :: 1.0  	==&gt; 0.0 [kpc] :: 48.0 [kpc]
zmin::zmax: 0.45 :: 0.55  	==&gt; 21.6 [kpc] :: 26.4 [kpc]

Map data on given lmax: 6
xrange: 1 65
yrange: 1 65
zrange: 29 37
pixel-size: 750.0 [pc]

:mask provided by function</code></pre><pre><code class="language-julia hljs">figure(figsize=(10, 3.5))
subplot(1,2,1)
im = imshow( log10.( permutedims(proj_z.maps[:age])), cmap=cmap2, aspect=proj_z.ratio, origin=&quot;lower&quot;, extent=proj_z.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;y [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;)

subplot(1,2,2)
im = imshow( log10.( permutedims(proj_x.maps[:age])), cmap=cmap2, origin=&quot;lower&quot;, extent=proj_x.cextent)
xlabel(&quot;x [kpc]&quot;)
ylabel(&quot;z [kpc]&quot;)
cb = colorbar(im, label=L&quot;\mathrm{log10(Age) \ [Myr]}&quot;,orientation=&quot;horizontal&quot;, pad=0.2);</code></pre><p><img src="../06_particles_Projection_files/06_particles_Projection_95_0.png" alt="png"/></p><pre><code class="language-julia hljs"></code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 16 April 2023 14:26">Sunday 16 April 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
